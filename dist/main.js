/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var xe=Object.defineProperty;var vn=Object.getOwnPropertyDescriptor;var Pn=Object.getOwnPropertyNames;var wn=Object.prototype.hasOwnProperty;var Dn=(e,t)=>{for(var n in t)xe(e,n,{get:t[n],enumerable:!0})},En=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Pn(t))!wn.call(e,a)&&a!==n&&xe(e,a,{get:()=>t[a],enumerable:!(i=vn(t,a))||i.enumerable});return e};var In=e=>En(xe({},"__esModule",{value:!0}),e);var Gn={};Dn(Gn,{default:()=>je,pluginInstance:()=>f,stateManager:()=>F,viewInstance:()=>I});module.exports=In(Gn);var T=require("obsidian");var R=require("obsidian");var Ce={AED:{name:"United Arab Emirates Dirham",demonym:"UAE",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:784,symbol:"\u062F.\u0625.",symbolNative:"\u062F.\u0625.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},AFN:{name:"Afghan Afghani",demonym:"Afghan",majorSingle:"Afghani",majorPlural:"Afghani",ISOnum:971,symbol:"Af",symbolNative:"\u060B",minorSingle:"Pul",minorPlural:"Pul",ISOdigits:2,decimals:2,numToBasic:100},ALL:{name:"Albanian Lek",demonym:"Albanian",majorSingle:"Lek",majorPlural:"Lek\xEB",ISOnum:8,symbol:"L",symbolNative:"L",minorSingle:"Qindarka",minorPlural:"Qindarka",ISOdigits:2,decimals:2,numToBasic:100},AMD:{name:"Armenian Dram",demonym:"Armenian",majorSingle:"Dram",majorPlural:"Dram",ISOnum:51,symbol:"\u058F",symbolNative:"\u0564\u0580",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100},ANG:{name:"Netherlands Antillean Guilder",demonym:"Netherlands Antillean",majorSingle:"Guilder",majorPlural:"Guilders",ISOnum:532,symbol:"\u0192",symbolNative:"\u0192",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AOA:{name:"Angolan Kwanza",demonym:"Angolan",majorSingle:"Kwanza",majorPlural:"Kwanza",ISOnum:973,symbol:"Kz",symbolNative:"Kz",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},ARS:{name:"Argentine Peso",demonym:"Argentine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:32,symbol:"AR$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},AUD:{name:"Australian Dollar",demonym:"Australian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:36,symbol:"AU$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AWG:{name:"Aruban Florin",demonym:"Aruban",majorSingle:"Florin",majorPlural:"Florin",ISOnum:533,symbol:"\u0192",symbolNative:"\u0192",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AZN:{name:"Azerbaijani Manat",demonym:"Azerbaijani",majorSingle:"Manat",majorPlural:"Manat",ISOnum:944,symbol:"\u043C\u0430\u043D",symbolNative:"\u20BC",minorSingle:"Qapik",minorPlural:"Qapik",ISOdigits:2,decimals:2,numToBasic:100},BAM:{name:"Bosnia and Herzegovina Convertible Mark",demonym:"Bosnia-Herzegovina",majorSingle:"Convertible Mark",majorPlural:"Marks",ISOnum:977,symbol:"KM",symbolNative:"\u041A\u041C",minorSingle:"Fening",minorPlural:"Fening",ISOdigits:2,decimals:2,numToBasic:100},BBD:{name:"Barbadian Dollar",demonym:"Barbadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:52,symbol:"BBD$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BDT:{name:"Bangladeshi Taka",demonym:"Bangladeshi",majorSingle:"Taka",majorPlural:"Taka",ISOnum:50,symbol:"\u09F3",symbolNative:"\u09F3",minorSingle:"Poisha",minorPlural:"Poisha",ISOdigits:2,decimals:2,numToBasic:100},BGN:{name:"Bulgarian Lev",demonym:"Bulgarian",majorSingle:"Lev",majorPlural:"Leva",ISOnum:975,symbol:"\u043B\u0432.",symbolNative:"\u043B\u0432.",minorSingle:"Stotinka",minorPlural:"Stotinki",ISOdigits:2,decimals:2,numToBasic:100},BHD:{name:"Bahraini Dinar",demonym:"Bahraini",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:48,symbol:"BD",symbolNative:"\u062F.\u0628.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},BIF:{name:"Burundian Franc",demonym:"Burundian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:108,symbol:"FBu",symbolNative:"FBu",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},BMD:{name:"Bermudian Dollar",demonym:"Bermudian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:60,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BND:{name:"Brunei Dollar",demonym:"Brunei",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:96,symbol:"B$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BOB:{name:"Bolivian Boliviano",demonym:"Bolivian",majorSingle:"Boliviano",majorPlural:"Bolivianos",ISOnum:68,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BRL:{name:"Brazilian Real",demonym:"Brazilian",majorSingle:"Real",majorPlural:"Reais",ISOnum:986,symbol:"R$",symbolNative:"R$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BSD:{name:"Bahamian Dollar",demonym:"Bahamian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:44,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BTN:{name:"Bhutanese Ngultrum",demonym:"Bhutanese",majorSingle:"Ngultrum",majorPlural:"Ngultrums",ISOnum:64,symbol:"Nu.",symbolNative:"Nu.",minorSingle:"Chetrum",minorPlural:"Chetrums",ISOdigits:2,decimals:2,numToBasic:100},BWP:{name:"Botswana Pula",demonym:"Botswana",majorSingle:"Pula",majorPlural:"Pula",ISOnum:72,symbol:"P",symbolNative:"P",minorSingle:"Thebe",minorPlural:"Thebe",ISOdigits:2,decimals:2,numToBasic:100},BYN:{name:"Belarusian Ruble",demonym:"Belarusian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:933,symbol:"Br",symbolNative:"\u0440\u0443\u0431.",minorSingle:"Kapiejka",minorPlural:"Kapiejka",ISOdigits:2,decimals:2,numToBasic:100},BZD:{name:"Belize Dollar",demonym:"Belize",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:84,symbol:"BZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CAD:{name:"Canadian Dollar",demonym:"Canadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:124,symbol:"CA$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CDF:{name:"Congolese Franc",demonym:"Congolese",majorSingle:"Franc",majorPlural:"Francs",ISOnum:976,symbol:"FC",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CHF:{name:"Swiss Franc",demonym:"Swiss",majorSingle:"Franc",majorPlural:"Francs",ISOnum:756,symbol:"Fr.",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CKD:{name:"Cook Islands Dollar",demonym:"Cook Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CLP:{name:"Chilean Peso",demonym:"Chilean",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:152,symbol:"CL$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:0,decimals:0,numToBasic:100},CNY:{name:"Chinese Yuan",demonym:"Chinese",majorSingle:"Yuan",majorPlural:"Yuan",ISOnum:156,symbol:"CN\xA5",symbolNative:"\xA5\u5143",minorSingle:"Fen",minorPlural:"Fen",ISOdigits:2,decimals:2,numToBasic:100},COP:{name:"Colombian Peso",demonym:"Colombian",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:170,symbol:"CO$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CRC:{name:"Costa Rican Colon",demonym:"Costa Rican",majorSingle:"Col\xF3n",majorPlural:"Colones",ISOnum:188,symbol:"\u20A1",symbolNative:"\u20A1",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},CUC:{name:"Cuban convertible Peso",demonym:"Cuban Convertible",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:931,symbol:"CUC$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CUP:{name:"Cuban Peso",demonym:"Cuban",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:192,symbol:"$MN",symbolNative:"\u20B1",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CVE:{name:"Cabo Verdean Escudo",demonym:"Cabo Verdean",majorSingle:"Escudo",majorPlural:"Escudo",ISOnum:132,symbol:"CV$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CZK:{name:"Czech Koruna",demonym:"Czech",majorSingle:"Koruna",majorPlural:"Koruny",ISOnum:203,symbol:"K\u010D",symbolNative:"K\u010D",minorSingle:"Hal\xE9\u0159",minorPlural:"Hal\xE9\u0159",ISOdigits:2,decimals:2,numToBasic:100},DJF:{name:"Djiboutian Franc",demonym:"Djiboutian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:262,symbol:"Fdj",symbolNative:"\u0641.\u062C.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},DKK:{name:"Danish Krone",demonym:"Danish",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:208,symbol:"kr.",symbolNative:"kr.",minorSingle:"\xD8re",minorPlural:"\xD8re",ISOdigits:2,decimals:2,numToBasic:100},DOP:{name:"Dominican Peso",demonym:"Dominican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:214,symbol:"RD$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},DZD:{name:"Algerian Dinar",demonym:"Algerian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:12,symbol:"DA",symbolNative:"\u062F.\u062C.",minorSingle:"Santeem",minorPlural:"Santeems",ISOdigits:2,decimals:2,numToBasic:100},EGP:{name:"Egyptian Pound",demonym:"Egyptian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:818,symbol:"E\xA3",symbolNative:"\u062C.\u0645.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},EHP:{name:"Sahrawi Peseta",demonym:"Sahrawi",majorSingle:"Peseta",majorPlural:"Pesetas",ISOnum:null,symbol:"Ptas.",symbolNative:"Ptas.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},ERN:{name:"Eritrean Nakfa",demonym:"Eritrean",majorSingle:"Nakfa",majorPlural:"Nakfa",ISOnum:232,symbol:"Nkf",symbolNative:"\u0646\u0627\u0643\u0641\u0627",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ETB:{name:"Ethiopian Birr",demonym:"Ethiopian",majorSingle:"Birr",majorPlural:"Birr",ISOnum:230,symbol:"Br",symbolNative:"\u1265\u122D",minorSingle:"Santim",minorPlural:"Santim",ISOdigits:2,decimals:2,numToBasic:100},EUR:{name:"Euro",demonym:"",majorSingle:"Euro",majorPlural:"Euros",ISOnum:978,symbol:"\u20AC",symbolNative:"\u20AC",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FJD:{name:"Fijian Dollar",demonym:"Fijian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:242,symbol:"FJ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FKP:{name:"Falkland Islands Pound",demonym:"Falkland Islands",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:238,symbol:"FK\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},FOK:{name:"Faroese Kr\xF3na",demonym:"Faroese",majorSingle:"Kr\xF3na",majorPlural:"Kr\xF3nas",ISOnum:null,symbol:"kr",symbolNative:"kr",minorSingle:"Oyra",minorPlural:"Oyra",ISOdigits:2,decimals:2,numToBasic:100},GBP:{name:"Pound Sterling",demonym:"Pound Sterling",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:826,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GEL:{name:"Georgian Lari",demonym:"Georgian",majorSingle:"Lari",majorPlural:"Lari",ISOnum:981,symbol:"\u20BE",symbolNative:"\u20BE",minorSingle:"Tetri",minorPlural:"Tetri",ISOdigits:2,decimals:2,numToBasic:100},GGP:{name:"Guernsey Pound",demonym:"Guernsey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GHS:{name:"Ghanaian Cedi",demonym:"Ghanaian",majorSingle:"Cedi",majorPlural:"Cedis",ISOnum:936,symbol:"GH\u20B5",symbolNative:"\u20B5",minorSingle:"Pesewa",minorPlural:"Pesewas",ISOdigits:2,decimals:2,numToBasic:100},GIP:{name:"Gibraltar Pound",demonym:"Gibraltar",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:292,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GMD:{name:"Gambian Dalasi",demonym:"Gambian",majorSingle:"Dalasi",majorPlural:"Dalasis",ISOnum:270,symbol:"D",symbolNative:"D",minorSingle:"Butut",minorPlural:"Bututs",ISOdigits:2,decimals:2,numToBasic:100},GNF:{name:"Guinean Franc",demonym:"Guinean",majorSingle:"Franc",majorPlural:"Francs",ISOnum:324,symbol:"FG",symbolNative:"FG",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},GTQ:{name:"Guatemalan Quetzal",demonym:"Guatemalan",majorSingle:"Quetzal",majorPlural:"Quetzales",ISOnum:320,symbol:"Q",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},GYD:{name:"Guyanese Dollar",demonym:"Guyanese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:328,symbol:"G$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HKD:{name:"Hong Kong Dollar",demonym:"Hong Kong",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:344,symbol:"HK$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HNL:{name:"Honduran Lempira",demonym:"Honduran",majorSingle:"Lempira",majorPlural:"Lempiras",ISOnum:340,symbol:"L",symbolNative:"L",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},HRK:{name:"Croatian Kuna",demonym:"Croatian",majorSingle:"Kuna",majorPlural:"Kuna",ISOnum:191,symbol:"kn",symbolNative:"kn",minorSingle:"Lipa",minorPlural:"Lipa",ISOdigits:2,decimals:2,numToBasic:100},HTG:{name:"Haitian Gourde",demonym:"Haitian",majorSingle:"Gourde",majorPlural:"Gourdes",ISOnum:332,symbol:"G",symbolNative:"G",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},HUF:{name:"Hungarian Forint",demonym:"Hungarian",majorSingle:"Forint",majorPlural:"Forint",ISOnum:348,symbol:"Ft",symbolNative:"Ft",minorSingle:"fill\xE9r",minorPlural:"fill\xE9r",ISOdigits:2,decimals:2,numToBasic:100},IDR:{name:"Indonesian Rupiah",demonym:"Indonesian",majorSingle:"Rupiah",majorPlural:"Rupiah",ISOnum:360,symbol:"Rp",symbolNative:"Rp",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},ILS:{name:"Israeli new Shekel",demonym:"Israeli",majorSingle:"Shekel",majorPlural:"Shekels",ISOnum:376,symbol:"\u20AA",symbolNative:"\u20AA",minorSingle:"Agora",minorPlural:"Agoras",ISOdigits:2,decimals:2,numToBasic:100},IMP:{name:"Manx Pound",demonym:"Manx",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},INR:{name:"Indian Rupee",demonym:"Indian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:356,symbol:"Rs.",symbolNative:"\u20B9",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},IQD:{name:"Iraqi Dinar",demonym:"Iraqi",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:368,symbol:"\u062F.\u0639.",symbolNative:"\u062F.\u0639.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},IRR:{name:"Iranian Rial",demonym:"Iranian",majorSingle:"Rial",majorPlural:"Rials",ISOnum:364,symbol:"\uFDFC",symbolNative:"\uFDFC",minorSingle:"Dinar",minorPlural:"Dinars",ISOdigits:2,decimals:2,numToBasic:100},ISK:{name:"Icelandic Krona",demonym:"Icelandic",majorSingle:"Krona",majorPlural:"Kr\xF3nur",ISOnum:352,symbol:"kr",symbolNative:"kr",minorSingle:"Aurar",minorPlural:"Aurar",ISOdigits:0,decimals:2,numToBasic:100},JEP:{name:"Jersey Pound",demonym:"Jersey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},JMD:{name:"Jamaican Dollar",demonym:"Jamaican",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:388,symbol:"J$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},JOD:{name:"Jordanian Dinar",demonym:"Jordanian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:400,symbol:"JD",symbolNative:"\u062F.\u0623.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},JPY:{name:"Japanese Yen",demonym:"Japanese",majorSingle:"Yen",majorPlural:"Yen",ISOnum:392,symbol:"\xA5",symbolNative:"\xA5",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:0,decimals:2,numToBasic:100},KES:{name:"Kenyan Shilling",demonym:"Kenyan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:404,symbol:"KSh",symbolNative:"KSh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KGS:{name:"Kyrgyzstani Som",demonym:"Kyrgyzstani",majorSingle:"Som",majorPlural:"Som",ISOnum:417,symbol:"\u0441",symbolNative:"\u0441",minorSingle:"Tyiyn",minorPlural:"Tyiyn",ISOdigits:2,decimals:2,numToBasic:100},KHR:{name:"Cambodian Riel",demonym:"Cambodian",majorSingle:"Riel",majorPlural:"Riels",ISOnum:116,symbol:"\u17DB",symbolNative:"\u17DB",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},KID:{name:"Kiribati Dollar",demonym:"Kiribati",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KMF:{name:"Comorian Franc",demonym:"Comorian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:174,symbol:"CF",symbolNative:"CF",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},KPW:{name:"North Korean Won",demonym:"North Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:408,symbol:"\u20A9",symbolNative:"\u20A9",minorSingle:"Chon",minorPlural:"Chon",ISOdigits:2,decimals:2,numToBasic:100},KRW:{name:"South Korean Won",demonym:"South Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:410,symbol:"\u20A9",symbolNative:"\u20A9",minorSingle:"Jeon",minorPlural:"Jeon",ISOdigits:0,decimals:2,numToBasic:100},KWD:{name:"Kuwaiti Dinar",demonym:"Kuwaiti",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:414,symbol:"KD",symbolNative:"\u062F.\u0643.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},KYD:{name:"Cayman Islands Dollar",demonym:"Cayman Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:136,symbol:"CI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KZT:{name:"Kazakhstani Tenge",demonym:"Kazakhstani",majorSingle:"Tenge",majorPlural:"Tenge",ISOnum:398,symbol:"\u20B8",symbolNative:"\u20B8",minorSingle:"T\u0131yn",minorPlural:"T\u0131yn",ISOdigits:2,decimals:2,numToBasic:100},LAK:{name:"Lao Kip",demonym:"Lao",majorSingle:"Kip",majorPlural:"Kip",ISOnum:418,symbol:"\u20ADN",symbolNative:"\u20AD",minorSingle:"Att",minorPlural:"Att",ISOdigits:2,decimals:2,numToBasic:100},LBP:{name:"Lebanese Pound",demonym:"Lebanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:422,symbol:"LL.",symbolNative:"\u0644.\u0644.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},LKR:{name:"Sri Lankan Rupee",demonym:"Sri Lankan",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:144,symbol:"Rs.",symbolNative:"\u0DBB\u0DD4 or \u0BB0\u0BC2",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LRD:{name:"Liberian Dollar",demonym:"Liberian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:430,symbol:"L$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LSL:{name:"Lesotho Loti",demonym:"Lesotho",majorSingle:"Loti",majorPlural:"maLoti",ISOnum:426,symbol:"L",symbolNative:"L",minorSingle:"Sente",minorPlural:"Lisente",ISOdigits:2,decimals:2,numToBasic:100},LYD:{name:"Libyan Dinar",demonym:"Libyan",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:434,symbol:"LD",symbolNative:"\u0644.\u062F.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:3,decimals:3,numToBasic:1e3},MAD:{name:"Moroccan Dirham",demonym:"Moroccan",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:504,symbol:"DH",symbolNative:"\u062F.\u0645.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},MDL:{name:"Moldovan Leu",demonym:"Moldovan",majorSingle:"Leu",majorPlural:"Lei",ISOnum:498,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},MGA:{name:"Malagasy Ariary",demonym:"Malagasy",majorSingle:"Ariary",majorPlural:"Ariary",ISOnum:969,symbol:"Ar",symbolNative:"Ar",minorSingle:"Iraimbilanja",minorPlural:"Iraimbilanja",ISOdigits:2,decimals:0,numToBasic:5},MKD:{name:"Macedonian Denar",demonym:"Macedonian",majorSingle:"Denar",majorPlural:"Denars",ISOnum:807,symbol:"den",symbolNative:"\u0434\u0435\u043D",minorSingle:"Deni",minorPlural:"Deni",ISOdigits:2,decimals:2,numToBasic:100},MMK:{name:"Myanmar Kyat",demonym:"Myanmar",majorSingle:"Kyat",majorPlural:"Kyat",ISOnum:104,symbol:"Ks",symbolNative:"Ks",minorSingle:"Pya",minorPlural:"Pya",ISOdigits:2,decimals:2,numToBasic:100},MNT:{name:"Mongolian T\xF6gr\xF6g",demonym:"Mongolian",majorSingle:"T\xF6gr\xF6g",majorPlural:"T\xF6gr\xF6g",ISOnum:496,symbol:"\u20AE",symbolNative:"\u20AE",minorSingle:"m\xF6ng\xF6",minorPlural:"m\xF6ng\xF6",ISOdigits:2,decimals:2,numToBasic:100},MOP:{name:"Macanese Pataca",demonym:"Macanese",majorSingle:"Pataca",majorPlural:"Patacas",ISOnum:446,symbol:"MOP$",symbolNative:"MOP$",minorSingle:"Avo",minorPlural:"Avos",ISOdigits:2,decimals:2,numToBasic:100},MRU:{name:"Mauritanian Ouguiya",demonym:"Mauritanian",majorSingle:"Ouguiya",majorPlural:"Ouguiya",ISOnum:929,symbol:"UM",symbolNative:"\u0623.\u0645.",minorSingle:"Khoums",minorPlural:"Khoums",ISOdigits:2,decimals:0,numToBasic:5},MUR:{name:"Mauritian Rupee",demonym:"Mauritian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:480,symbol:"Rs.",symbolNative:"\u0930\u0941 ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},MVR:{name:"Maldivian Rufiyaa",demonym:"Maldivian",majorSingle:"Rufiyaa",majorPlural:"Rufiyaa",ISOnum:462,symbol:"MRf",symbolNative:".\u0783",minorSingle:"laari",minorPlural:"laari",ISOdigits:2,decimals:2,numToBasic:100},MWK:{name:"Malawian Kwacha",demonym:"Malawian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:454,symbol:"MK",symbolNative:"MK",minorSingle:"Tambala",minorPlural:"Tambala",ISOdigits:2,decimals:2,numToBasic:100},MXN:{name:"Mexican Peso",demonym:"Mexican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:484,symbol:"MX$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},MYR:{name:"Malaysian Ringgit",demonym:"Malaysian",majorSingle:"Ringgit",majorPlural:"Ringgit",ISOnum:458,symbol:"RM",symbolNative:"RM",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},MZN:{name:"Mozambican Metical",demonym:"Mozambican",majorSingle:"Metical",majorPlural:"Meticais",ISOnum:943,symbol:"MTn",symbolNative:"MT",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NAD:{name:"Namibian Dollar",demonym:"Namibian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:516,symbol:"N$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},NGN:{name:"Nigerian Naira",demonym:"Nigerian",majorSingle:"Naira",majorPlural:"Naira",ISOnum:566,symbol:"\u20A6",symbolNative:"\u20A6",minorSingle:"Kobo",minorPlural:"Kobo",ISOdigits:2,decimals:2,numToBasic:100},NIO:{name:"Nicaraguan C\xF3rdoba",demonym:"Nicaraguan",majorSingle:"C\xF3rdoba Oro",majorPlural:"C\xF3rdoba Oro",ISOnum:558,symbol:"C$",symbolNative:"C$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NOK:{name:"Norwegian Krone",demonym:"Norwegian",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:578,symbol:"kr",symbolNative:"kr",minorSingle:"\xF8re",minorPlural:"\xF8re",ISOdigits:2,decimals:2,numToBasic:100},NPR:{name:"Nepalese Rupee",demonym:"Nepalese",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:524,symbol:"Rs.",symbolNative:"\u0930\u0942",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},NZD:{name:"New Zealand Dollar",demonym:"New Zealand",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:554,symbol:"NZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},OMR:{name:"Omani Rial",demonym:"Omani",majorSingle:"Rial",majorPlural:"Rials",ISOnum:512,symbol:"OR",symbolNative:"\u0631.\u0639.",minorSingle:"Baisa",minorPlural:"Baisa",ISOdigits:3,decimals:3,numToBasic:1e3},PAB:{name:"Panamanian Balboa",demonym:"Panamanian",majorSingle:"Balboa",majorPlural:"Balboa",ISOnum:590,symbol:"B/.",symbolNative:"B/.",minorSingle:"Cent\xE9simo",minorPlural:"Cent\xE9simos",ISOdigits:2,decimals:2,numToBasic:100},PEN:{name:"Peruvian Sol",demonym:"Peruvian",majorSingle:"Sol",majorPlural:"Soles",ISOnum:604,symbol:"S/.",symbolNative:"S/.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},PGK:{name:"Papua New Guinean Kina",demonym:"Papua New Guinean",majorSingle:"Kina",majorPlural:"Kina",ISOnum:598,symbol:"K",symbolNative:"K",minorSingle:"Toea",minorPlural:"Toea",ISOdigits:2,decimals:2,numToBasic:100},PHP:{name:"Philippine Peso",demonym:"Philippine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:608,symbol:"\u20B1",symbolNative:"\u20B1",minorSingle:"Sentimo",minorPlural:"Sentimo",ISOdigits:2,decimals:2,numToBasic:100},PKR:{name:"Pakistani Rupee",demonym:"Pakistani",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:586,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},PLN:{name:"Polish Zloty",demonym:"Polish",majorSingle:"Zloty",majorPlural:"Zlotys",ISOnum:985,symbol:"z\u0142",symbolNative:"z\u0142",minorSingle:"Grosz",minorPlural:"Groszy",ISOdigits:2,decimals:2,numToBasic:100},PND:{name:"Pitcairn Islands Dollar",demonym:"Pitcairn Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},PRB:{name:"Transnistrian Ruble",demonym:"Transnistrian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:null,symbol:"\u0440.",symbolNative:"\u0440.",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},PYG:{name:"Paraguayan Guaran\xED",demonym:"Paraguayan",majorSingle:"Guaran\xED",majorPlural:"Guaran\xEDes",ISOnum:600,symbol:"\u20B2",symbolNative:"\u20B2",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:0,decimals:2,numToBasic:100},QAR:{name:"Qatari Riyal",demonym:"Qatari",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:634,symbol:"QR",symbolNative:"\u0631.\u0642.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:2,decimals:2,numToBasic:100},RON:{name:"Romanian Leu",demonym:"Romanian",majorSingle:"Leu",majorPlural:"Lei",ISOnum:946,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},RSD:{name:"Serbian Dinar",demonym:"Serbian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:941,symbol:"din",symbolNative:"\u0434\u0438\u043D",minorSingle:"Para",minorPlural:"Para",ISOdigits:2,decimals:2,numToBasic:100},RUB:{name:"Russian Ruble",demonym:"Russian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:643,symbol:"\u20BD",symbolNative:"\u20BD",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},RWF:{name:"Rwandan Franc",demonym:"Rwandan",majorSingle:"Franc",majorPlural:"Francs",ISOnum:646,symbol:"FRw",symbolNative:"R\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},SAR:{name:"Saudi Riyal",demonym:"Saudi",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:682,symbol:"SR",symbolNative:"\u0631.\u0633.",minorSingle:"Halalah",minorPlural:"Halalahs",ISOdigits:2,decimals:2,numToBasic:100},SBD:{name:"Solomon Islands Dollar",demonym:"Solomon Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:90,symbol:"SI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SCR:{name:"Seychellois Rupee",demonym:"Seychellois",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:690,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SDG:{name:"Sudanese Pound",demonym:"Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:938,symbol:"\xA3SD",symbolNative:"\u062C.\u0633.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SEK:{name:"Swedish Krona",demonym:"Swedish",majorSingle:"Krona",majorPlural:"Kronor",ISOnum:752,symbol:"kr",symbolNative:"kr",minorSingle:"\xD6re",minorPlural:"\xD6re",ISOdigits:2,decimals:2,numToBasic:100},SGD:{name:"Singapore Dollar",demonym:"Singapore",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:702,symbol:"S$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SHP:{name:"Saint Helena Pound",demonym:"Saint Helena",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:654,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},SLL:{name:"Sierra Leonean Leone",demonym:"Sierra Leonean",majorSingle:"Leone",majorPlural:"Leones",ISOnum:694,symbol:"Le",symbolNative:"Le",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SLS:{name:"Somaliland Shilling",demonym:"Somaliland",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:null,symbol:"Sl",symbolNative:"Sl",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SOS:{name:"Somali Shilling",demonym:"Somali",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:706,symbol:"Sh.So.",symbolNative:"Ssh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},SRD:{name:"Surinamese Dollar",demonym:"Surinamese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:968,symbol:"Sr$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SSP:{name:"South Sudanese Pound",demonym:"South Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:728,symbol:"SS\xA3",symbolNative:"SS\xA3",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},STN:{name:"Sao Tome and Pr\xEDncipe Dobra",demonym:"Sao Tome",majorSingle:"Dobra",majorPlural:"Dobras",ISOnum:930,symbol:"Db",symbolNative:"Db",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},SVC:{name:"Salvadoran Col\xF3n",demonym:"Salvadoran",majorSingle:"Col\xF3n",majorPlural:"Colones",ISOnum:222,symbol:"\u20A1",symbolNative:"\u20A1",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},SYP:{name:"Syrian Pound",demonym:"Syrian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:760,symbol:"LS",symbolNative:"\u0644.\u0633.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SZL:{name:"Swazi Lilangeni",demonym:"Swazi",majorSingle:"Lilangeni",majorPlural:"Emalangeni",ISOnum:748,symbol:"L",symbolNative:"L",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},THB:{name:"Thai Baht",demonym:"Thai",majorSingle:"Baht",majorPlural:"Baht",ISOnum:764,symbol:"\u0E3F",symbolNative:"\u0E3F",minorSingle:"Satang",minorPlural:"Satang",ISOdigits:2,decimals:2,numToBasic:100},TJS:{name:"Tajikistani Somoni",demonym:"Tajikistani",majorSingle:"Somoni",majorPlural:"Somoni",ISOnum:972,symbol:"SM",symbolNative:"SM",minorSingle:"Diram",minorPlural:"Diram",ISOdigits:2,decimals:2,numToBasic:100},TMT:{name:"Turkmenistan Manat",demonym:"Turkmenistan",majorSingle:"Manat",majorPlural:"Manat",ISOnum:934,symbol:"m.",symbolNative:"T",minorSingle:"Tenge",minorPlural:"Tenge",ISOdigits:2,decimals:2,numToBasic:100},TND:{name:"Tunisian Dinar",demonym:"Tunisian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:788,symbol:"DT",symbolNative:"\u062F.\u062A.",minorSingle:"Millime",minorPlural:"Millime",ISOdigits:3,decimals:3,numToBasic:1e3},TOP:{name:"Tongan Pa\u02BBanga",demonym:"Tongan",majorSingle:"Pa'anga",majorPlural:"Pa'anga",ISOnum:776,symbol:"T$",symbolNative:"PT",minorSingle:"Seniti",minorPlural:"Seniti",ISOdigits:2,decimals:2,numToBasic:100},TRY:{name:"Turkish Lira",demonym:"Turkish",majorSingle:"Lira",majorPlural:"Lira",ISOnum:949,symbol:"TL",symbolNative:"\u20BA",minorSingle:"Kuru\u015F",minorPlural:"Kuru\u015F",ISOdigits:2,decimals:2,numToBasic:100},TTD:{name:"Trinidad and Tobago Dollar",demonym:"Trinidad and Tobago",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:780,symbol:"TT$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TVD:{name:"Tuvaluan Dollar",demonym:"Tuvaluan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TWD:{name:"New Taiwan Dollar",demonym:"New Taiwan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:901,symbol:"NT$",symbolNative:"\u5713",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TZS:{name:"Tanzanian Shilling",demonym:"Tanzanian",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:834,symbol:"TSh",symbolNative:"TSh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},UAH:{name:"Ukrainian Hryvnia",demonym:"Ukrainian",majorSingle:"Hryvnia",majorPlural:"Hryvnias",ISOnum:980,symbol:"\u20B4",symbolNative:"\u0433\u0440\u043D",minorSingle:"Kopiyka",minorPlural:"kopiyky",ISOdigits:2,decimals:2,numToBasic:100},UGX:{name:"Ugandan Shilling",demonym:"Ugandan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:800,symbol:"USh",symbolNative:"Sh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:0,decimals:2,numToBasic:100},USD:{name:"United States Dollar",demonym:"US",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:840,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},UYU:{name:"Uruguayan Peso",demonym:"Uruguayan",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:858,symbol:"$U",symbolNative:"$",minorSingle:"Cent\xE9simo",minorPlural:"Cent\xE9simos",ISOdigits:2,decimals:2,numToBasic:100},UZS:{name:"Uzbekistani Som",demonym:"Uzbekistani",majorSingle:"Som",majorPlural:"Som",ISOnum:860,symbol:"\u0441\u0443\u043C",symbolNative:"\u0441\u0443\u043C",minorSingle:"Tiyin",minorPlural:"Tiyin",ISOdigits:2,decimals:2,numToBasic:100},VED:{name:"Venezuelan bol\xEDvar digital",demonym:"Venezuelan",majorSingle:"Bol\xEDvar Digital",majorPlural:"Bol\xEDvars Digital",ISOnum:null,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},VES:{name:"Venezuelan Bol\xEDvar Soberano",demonym:"Venezuelan",majorSingle:"Bol\xEDvar",majorPlural:"Bol\xEDvares",ISOnum:928,symbol:"Bs.F",symbolNative:"Bs.F",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},VND:{name:"Vietnamese Dong",demonym:"Vietnamese",majorSingle:"Dong",majorPlural:"Dong",ISOnum:704,symbol:"\u20AB",symbolNative:"\u20AB",minorSingle:"H\xE0o",minorPlural:"H\xE0o",ISOdigits:0,decimals:2,numToBasic:10},VUV:{name:"Vanuatu Vatu",demonym:"Vanuatu",majorSingle:"Vatu",majorPlural:"Vatu",ISOnum:548,symbol:"VT",symbolNative:"VT",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},WST:{name:"Samoan Tala",demonym:"Samoan",majorSingle:"Tala",majorPlural:"Tala",ISOnum:882,symbol:"T",symbolNative:"ST",minorSingle:"Sene",minorPlural:"Sene",ISOdigits:2,decimals:2,numToBasic:100},XAF:{name:"Central African CFA Franc BEAC",demonym:"Central African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:950,symbol:"Fr",symbolNative:"Fr.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XCD:{name:"East Caribbean Dollar",demonym:"East Caribbean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:951,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},XOF:{name:"West African CFA Franc BCEAO",demonym:"West African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:952,symbol:"\u20A3",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XPF:{name:"CFP Franc (Franc Pacifique)",demonym:"CFP",majorSingle:"Franc",majorPlural:"Francs",ISOnum:953,symbol:"\u20A3",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:0,numToBasic:100},YER:{name:"Yemeni Rial",demonym:"Yemeni",majorSingle:"Rial",majorPlural:"Rials",ISOnum:886,symbol:"YR",symbolNative:"\u0631.\u064A.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},ZAR:{name:"South African Rand",demonym:"South African",majorSingle:"Rand",majorPlural:"Rand",ISOnum:710,symbol:"R",symbolNative:"R",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ZMW:{name:"Zambian Kwacha",demonym:"Zambian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:967,symbol:"ZK",symbolNative:"ZK",minorSingle:"Ngwee",minorPlural:"Ngwee",ISOdigits:2,decimals:2,numToBasic:100},ZWB:{name:"RTGS Dollar",demonym:"RTGS",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},ZWL:{name:"Zimbabwean Dollar",demonym:"Zimbabwean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:932,symbol:"Z$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},Abkhazia:{name:"Abkhazian Apsar",demonym:"Abkhazian",majorSingle:"Apsar",majorPlural:"Apsark",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},Artsakh:{name:"Artsakh Dram",demonym:"Artsakh",majorSingle:"Dram",majorPlural:"Dram",ISOnum:null,symbol:"\u0564\u0580.",symbolNative:"\u0564\u0580.",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100}};var ge=require("obsidian");var fe=async()=>{let{jsonData:e,content:t,status:n}=await j("Archive expenditure plan");if(n!=="success")return n;if(e===void 0)throw new Error("Archive expenditure plan data is undefined");if(e===null)return"success";if(t===void 0)throw new Error("Archive expenditure plan content is undefined");let{file:i,status:a}=await P("Expenditure plan");if(a!=="success")return a;if(i===void 0)throw new Error("Expenditure plan file is undefined");if(e.length>1)try{let o=e.map(s=>({...s,amount:0})),r=JSON.stringify(o,null,4),l=t.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await f.app.vault.modify(i,l),"success"}catch(o){return o}},ye=async()=>{let{jsonData:e,content:t,status:n}=await j("Archive income plan");if(n!=="success")return n;if(e===void 0)throw new Error("Archive expenditure plan data is null");if(e===null)return"success";if(t===void 0)throw new Error("Archive expenditure plan content is undefined");let{file:i,status:a}=await P("Income plan");if(a!=="success")return a;if(i===void 0)throw new Error("Income plan file is undefined");if(e.length>1)try{let o=e.map(s=>({...s,amount:0})),r=JSON.stringify(o,null,4),l=t.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await f.app.vault.modify(i,l),"success"}catch(o){return o}},Te=async()=>{let{jsonData:e,file:t,content:n,status:i}=await P("Expenditure plan");if(i!=="success")return i;if(e===void 0)throw new Error("Expenditure plan info is undefined");if(n===void 0)throw new Error("Expenditure plan content is undefined");if(t===void 0)throw new Error("Expenditure plan file is undefined");let{jsonData:a,status:o}=await j("Archive expenditure plan");if(o!=="success")return o;if(a===void 0)throw new Error("Archive expenditure plan info is undefined");if(a===null)return"success";if(e===null)await fe();else if(e.length<a.length)try{let r=a.filter(c=>!e.some(p=>p.id===c.id)).map(c=>({...c,amount:0})),l=[...e,...r],s=JSON.stringify(l,null,4),m=n.replace(/```json[\s\S]*?```/,"```json\n"+s+"\n```");return await f.app.vault.modify(t,m),"success"}catch(r){return r}else if(e.length>a.length)try{let r=a.filter(m=>e.some(c=>c.id===m.id)).map(m=>({...m,amount:0})),l=JSON.stringify(r,null,4),s=n.replace(/```json[\s\S]*?```/,"```json\n"+l+"\n```");return await f.app.vault.modify(t,s),"success"}catch(r){return r}},Ne=async()=>{let{jsonData:e,file:t,content:n,status:i}=await P("Income plan");if(i!=="success")return i;if(e===void 0)throw new Error("Income plan info is undefined");if(n===void 0)throw new Error("Income plan content is undefined");if(t===void 0)throw new Error("Income plan file is undefined");let{jsonData:a,status:o}=await j("Archive income plan");if(o!=="success")return o;if(a===void 0)throw new Error("Archive income plan info is undefined");if(a===null)return"success";if(e===null)await ye();else if(e.length<a.length)try{let r=a.filter(c=>!e.some(p=>p.id===c.id)).map(c=>({...c,amount:0})),l=[...e,...r],s=JSON.stringify(l,null,4),m=n.replace(/```json[\s\S]*?```/,"```json\n"+s+"\n```");return await f.app.vault.modify(t,m),"success"}catch(r){return r}else if(e.length>a.length)try{let r=a.filter(m=>e.some(c=>c.id===m.id)).map(m=>({...m,amount:0})),l=JSON.stringify(r,null,4),s=n.replace(/```json[\s\S]*?```/,"```json\n"+l+"\n```");return await f.app.vault.modify(t,s),"success"}catch(r){return r}},V=async()=>{let{jsonData:e,file:t,content:n,status:i}=await P("Expenditure plan");if(i!=="success")return i;if(e==null)throw new Error("Expenditure plan data is undefined");if(t===void 0)throw new Error("Expenditure plan file is undefined");if(n===void 0)throw new Error("Expenditure plan content is undefined");let{file:a,status:o}=await j("Archive expenditure plan");if(o!=="success")return o;if(a===void 0)throw new Error("Archive expenditure plan file is undefined");if(e.length<=1)try{let r=await app.vault.read(t);return await f.app.vault.modify(a,r),"success"}catch(r){return r}else try{let r=e.map(({amount:m,...c})=>c),l=JSON.stringify(r,null,4),s=n.replace(/```json[\s\S]*?```/,"```json\n"+l+"\n```");return await f.app.vault.modify(a,s),"success"}catch(r){return r}},Z=async()=>{let{jsonData:e,file:t,content:n,status:i}=await P("Income plan");if(i!=="success")return i;if(e==null)throw new Error("Income plan data is undefined");if(t===void 0)throw new Error("Income plan file is undefined");if(n===void 0)throw new Error("Income plan content is undefined");let{file:a,status:o}=await j("Archive income plan");if(o!=="success")return o;if(a===void 0)throw new Error("Archive income plan file is undefined");if(e.length<=1)try{let r=await app.vault.read(t);return await f.app.vault.modify(a,r),"success"}catch(r){return r}else try{let r=e.map(({amount:m,...c})=>c),l=JSON.stringify(r,null,4),s=n.replace(/```json[\s\S]*?```/,"```json\n"+l+"\n```");return await f.app.vault.modify(a,s),"success"}catch(r){return r}};var G=["January","February","March","April","May","June","July","August","September","October","November","December"],oe=async()=>{let{year:e,month:t}=Y(),n=!1,i=`---
tags:
  - ${f.settings.defaultTag}
---
\`\`\`json
\`\`\``,a=`${f.settings.targetFolder}/Archive`,o=`${a}/Archive expenditure plan.md`,r=`${a}/Archive income plan.md`,l=`${a}/Archive bills.md`,s=`${f.settings.targetFolder}/${e}`,m=`${s}/${t}`,c=`${m}/History.md`,p=`${m}/Expenditure plan.md`,u=`${m}/Income plan.md`;try{return await f.app.vault.adapter.exists(f.settings.targetFolder)||await f.app.vault.createFolder(f.settings.targetFolder),await f.app.vault.adapter.exists(s)||await f.app.vault.createFolder(s),await f.app.vault.adapter.exists(m)||await f.app.vault.createFolder(m),await f.app.vault.adapter.exists(c)||await f.app.vault.create(c,i),await f.app.vault.adapter.exists(p)?await Te():(await f.app.vault.create(p,i),await fe()),await f.app.vault.adapter.exists(u)?await Ne():(await f.app.vault.create(u,i),await ye()),await f.app.vault.adapter.exists(a)||await f.app.vault.createFolder(a),await f.app.vault.adapter.exists(o)||await f.app.vault.create(o,i),await f.app.vault.adapter.exists(r)||await f.app.vault.create(r,i),await f.app.vault.adapter.exists(l)||await f.app.vault.create(l,i),n=!0,n}catch(d){throw console.error("createDirectory error",d),d}},Ye=async(e,t)=>{let n=`---
tags:
  - ${f.settings.defaultTag}
---
\`\`\`json
\`\`\``,i=`${f.settings.targetFolder}/${t}`,a=`${i}/${G[e]}`,o=`${a}/History.md`,r=`${a}/Expenditure plan.md`,l=`${a}/Income plan.md`;try{return await f.app.vault.adapter.exists(f.settings.targetFolder)||await f.app.vault.createFolder(f.settings.targetFolder),await f.app.vault.adapter.exists(i)||await f.app.vault.createFolder(i),await f.app.vault.adapter.exists(a)||await f.app.vault.createFolder(a),await f.app.vault.adapter.exists(o)||await f.app.vault.create(o,n),await f.app.vault.adapter.exists(r)?await Te():(await f.app.vault.create(r,n),await fe()),await f.app.vault.adapter.exists(l)?await Ne():(await f.app.vault.create(l,n),await ye()),"success"}catch(s){return console.error("defCreateOtherMonthDirectory error",s),"Error creating directory"}};var P=async e=>{let{selectedYear:t,selectedMonth:n}=F(),{year:i,month:a}=t&&n?{year:t,month:n}:Y(),o=`${f.settings.targetFolder}/${i}/${a}/${e}.md`,r=app.vault.getAbstractFileByPath(o);if(!(r instanceof ge.TFile))return await oe(),{status:`File not found: ${o}. Please try again`};let l=await app.vault.read(r);if(!l)return{status:`File is empty: ${o}`};let s=l.match(/```json([\s\S]*?)```/);if(s===null)throw new Error("jsonMatch file is null");let m;return s[1].length>3?m=JSON.parse(s[1].trim()):m=null,{jsonData:m,content:l,file:r,status:"success"}},re=async(e,t,n)=>{let i=`${f.settings.targetFolder}/${t}/${n}/${e}.md`,a=app.vault.getAbstractFileByPath(i);if(!(a instanceof ge.TFile))return{status:"File not found"};let o=await app.vault.read(a);if(!o)return{status:"File is empty"};let r=o.match(/```json([\s\S]*?)```/);if(r===null)throw new Error("jsonMatch file is null");let l;return r[1].length>3?l=JSON.parse(r[1].trim()):l=null,{jsonData:l,content:o,file:a,status:"success"}},j=async e=>{let t=`${f.settings.targetFolder}/Archive/${e}.md`,n=app.vault.getAbstractFileByPath(t);if(!(n instanceof ge.TFile))return await oe(),{status:`File not found: ${t}. Please try again`};let i=await app.vault.read(n);if(!i)return{status:`File is empty: ${t}`};let a=i.match(/```json([\s\S]*?)```/);if(a===null)throw new Error("jsonMatch file is null");let o;return a[1].length>3?o=JSON.parse(a[1].trim()):o=null,{jsonData:o,content:i,file:n,status:"success"}},_=async(e,t)=>{let n={History:()=>P("History"),expense:()=>P("Expenditure plan"),income:()=>P("Income plan"),"Archive bills":()=>j("Archive bills")};try{let i=n[t];if(!i)return"Element not found";let{jsonData:a,status:o}=await i();if(o!=="success")return o;if(!a)throw new Error("jsonData is null or undefined");let r=a.find(l=>l.id===e);return r?{status:"success",item:r}:{status:"Item not found"}}catch(i){return{status:i}}},Ue=async e=>{try{let t=e.toLowerCase(),[n,i,a,o]=await Promise.all([P("History"),P("Expenditure plan"),P("Income plan"),j("Archive bills")]);if(n.status!=="success")return{status:n.status};if(!n.jsonData)throw new Error("History jsonData is null or undefined");if(!i.jsonData||!a.jsonData||!o.jsonData)throw new Error("Additional data is null or undefined");let l=[...i.jsonData,...a.jsonData,...o.jsonData].filter(m=>"name"in m&&m.name.toLowerCase().includes(t)).map(m=>m.id),s=n.jsonData.filter(m=>{var p,u,d,y;let c=((p=m.type)==null?void 0:p.toLowerCase().includes(t))||m.amount.toString().includes(e)||((u=m.comment)==null?void 0:u.toLowerCase().includes(t));return l.length===0?c:c||((d=m.bill)==null?void 0:d.id)&&l.includes(m.bill.id)||((y=m.category)==null?void 0:y.id)&&l.includes(m.category.id)});return{status:"success",jsonData:s.length?s:null}}catch(t){return{status:t}}};var Ve=["USD","EUR","RUB","KZT","UZS"],Se=()=>crypto.randomUUID(),Y=()=>{if(typeof moment!="undefined"){moment.locale("en");let e=moment(),t=e.format("YYYY"),n=e.format("MMMM");return{now:e,year:t,month:n}}else{let e=new Date,t=String(e.getFullYear()),n=G[e.getMonth()];return{now:e,year:t,month:n}}},he=()=>{let e=Object.entries(Ce).map(([i,a])=>({code:i,name:a.name||i,symbol:a.symbol||a.symbolNative})),t=e.filter(i=>Ve.includes(i.code)),n=e.filter(i=>!Ve.includes(i.code));return{popularCurrencies:t,otherCurrencies:n}};function be(e,t){let n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],{selectedYear:a,selectedMonth:o}=F();if(a===null&&o===null){let r=new Date,l=r.getFullYear(),s=r.getMonth(),m=new Date(l,s+1,0).getDate();for(let c=m;c>=1;c--){let p=new Date(l,s,c),u=p.getDate(),d=n[p.getDay()],y=i[s],g=`${u} ${y}, ${d}`,S=Math.floor((p-r)/(1e3*60*60*24));S===-1?g=`Today, ${g}`:S===0?g=`Tomorrow, ${g}`:S===1?g=`The day after tomorrow, ${g}`:S===-2?g=`Yesterday, ${g}`:S===-3&&(g=`The day before yesterday, ${g}`);let h=`${l}-${String(s+1).padStart(2,"0")}-${String(c).padStart(2,"0")}`,D=e.createEl("option",{text:g,attr:{value:h}});(h===t||S===-1)&&(D.selected=!0)}}else{let r=new Date(`${o} 1, ${a}`),l=isNaN(r)?null:r.getMonth(),s=new Date,m=Number(a),c=l,p=new Date(m,c+1,0).getDate();for(let u=p;u>=1;u--){let d=new Date(m,c,u),y=d.getDate(),g=n[d.getDay()],S=i[c],h=`${y} ${S}, ${g}`,D=`${m}-${String(c+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,v=e.createEl("option",{text:h,attr:{value:D}})}}}function ve(e,t){let n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t),a=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`;Array.from(e.options).find(r=>r.value===a)&&(e.value=a)}function Pe(e,t){return t==="expense"?`- ${e}`:t==="income"?`+ ${e}`:"Error"}function we(e){let t=H(e),n=U(e);return t===0?`+${n}`:n===0?`-${t}`:`-${t} +${n}`}function H(e){if(!e)return 0;let t=0;return e.forEach((n,i)=>{n.type==="expense"&&(t+=Number(n.amount))}),t}function U(e){if(!e)return 0;let t=0;return e.forEach((n,i)=>{n.type==="income"&&(t+=Number(n.amount))}),t}function ne(e){if(!e||e===null)return 0;let t=0;return e.forEach((n,i)=>{n.generalBalance&&(t+=Number(n.balance))}),t}function Ze(e){if(!e||e===null)return 0;let t=0;return e.forEach((n,i)=>{n.generalBalance||(t+=Number(n.balance))}),t}function We(e){let t=new Date,n=t.getFullYear(),i=t.getMonth(),a=new Date(n,i+1,0).getDate(),o=t.getDate(),r=a-o+1;return Math.trunc(e/r)}function $(e){let t=Ce[e];return t&&(t.symbol||t.symbolNative)||e}function Qe(e,t){let n=Number(ne(e))+Number(H(t)),i=Number(H(t))/n*100;return Number(H(t))<=n?100-i:i===0?100:i}function De(e){let[t,n,i]=e.split("-").map(Number),a=new Date(t,n-1,i),o=new Date;o.setHours(0,0,0,0);let r=Math.round((o-a)/(1e3*60*60*24)),l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],m="";r===0?m="Today":r===1&&(m="Yesterday");let c=`${s[a.getMonth()]} ${a.getDate()}, ${l[a.getDay()]}`;return m?`${m}, ${c}`:c}async function qe(e,t,n){let{jsonData:i,status:a}=await re("Expenditure plan",t,e);if(a!=="success")return;if(i===void 0)throw new Error("Expesnse plan is undefined");let{jsonData:o,status:r}=await re("Income plan",t,e);if(r!=="success")return;if(o===void 0)throw new Error("Expesnse plan is undefined");let l=H(i),s=U(o);s>=l?(n.createEl("span",{text:`-${l}`,cls:"expense-all-month-success"}),n.createEl("span",{text:`+${s}`,cls:"income-all-month"})):(n.createEl("span",{text:`-${l}`,cls:"expense-all-month-failure"}),n.createEl("span",{text:`+${s}`,cls:"income-all-month"}))}async function Xe(e){let t=0,n=0;for(let i=1;i<=12;i++){let{jsonData:a,status:o}=await re("Expenditure plan",e,G[i]);if(o==="File not found")continue;if(o==="File is empty")continue;if(a===void 0)throw new Error("Expesnse plan is undefined");let{jsonData:r,status:l}=await re("Income plan",e,G[i]);if(l!=="File not found"&&l!=="File is empty"){if(r===void 0)throw new Error("Expesnse plan is undefined");t+=H(a),n+=U(r)}}return`-${t} +${n}`}function en(){let e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[1].split(".")[0]}var ie=require("obsidian");var M=require("obsidian");var Bn=20,On=1,W=1e6,nn=1e6,xn=-7,Cn=21,Tn=!1,le="[big.js] ",Q=le+"Invalid ",Ee=Q+"decimal places",Nn=Q+"rounding mode",tn=le+"Division by zero",B={},J=void 0,Fn=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function an(){function e(t){var n=this;if(!(n instanceof e))return t===J&&arguments.length===0?an():new e(t);if(t instanceof e)n.s=t.s,n.e=t.e,n.c=t.c.slice();else{if(typeof t!="string"){if(e.strict===!0&&typeof t!="bigint")throw TypeError(Q+"value");t=t===0&&1/t<0?"-0":String(t)}An(n,t)}n.constructor=e}return e.prototype=B,e.DP=Bn,e.RM=On,e.NE=xn,e.PE=Cn,e.strict=Tn,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function An(e,t){var n,i,a;if(!Fn.test(t))throw Error(Q+"number");for(e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),a=t.length,i=0;i<a&&t.charAt(i)=="0";)++i;if(i==a)e.c=[e.e=0];else{for(;a>0&&t.charAt(--a)=="0";);for(e.e=n-i-1,e.c=[],n=0;i<=a;)e.c[n++]=+t.charAt(i++)}return e}function q(e,t,n,i){var a=e.c;if(n===J&&(n=e.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Nn);if(t<1)i=n===3&&(i||!!a[0])||t===0&&(n===1&&a[0]>=5||n===2&&(a[0]>5||a[0]===5&&(i||a[1]!==J))),a.length=1,i?(e.e=e.e-t+1,a[0]=1):a[0]=e.e=0;else if(t<a.length){if(i=n===1&&a[t]>=5||n===2&&(a[t]>5||a[t]===5&&(i||a[t+1]!==J||a[t-1]&1))||n===3&&(i||!!a[0]),a.length=t,i){for(;++a[--t]>9;)if(a[t]=0,t===0){++e.e,a.unshift(1);break}}for(t=a.length;!a[--t];)a.pop()}return e}function X(e,t,n){var i=e.e,a=e.c.join(""),o=a.length;if(t)a=a.charAt(0)+(o>1?"."+a.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)a="0"+a;a="0."+a}else if(i>0)if(++i>o)for(i-=o;i--;)a+="0";else i<o&&(a=a.slice(0,i)+"."+a.slice(i));else o>1&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&n?"-"+a:a}B.abs=function(){var e=new this.constructor(this);return e.s=1,e};B.cmp=function(e){var t,n=this,i=n.c,a=(e=new n.constructor(e)).c,o=n.s,r=e.s,l=n.e,s=e.e;if(!i[0]||!a[0])return i[0]?o:a[0]?-r:0;if(o!=r)return o;if(t=o<0,l!=s)return l>s^t?1:-1;for(r=(l=i.length)<(s=a.length)?l:s,o=-1;++o<r;)if(i[o]!=a[o])return i[o]>a[o]^t?1:-1;return l==s?0:l>s^t?1:-1};B.div=function(e){var t=this,n=t.constructor,i=t.c,a=(e=new n(e)).c,o=t.s==e.s?1:-1,r=n.DP;if(r!==~~r||r<0||r>W)throw Error(Ee);if(!a[0])throw Error(tn);if(!i[0])return e.s=o,e.c=[e.e=0],e;var l,s,m,c,p,u=a.slice(),d=l=a.length,y=i.length,g=i.slice(0,l),S=g.length,h=e,D=h.c=[],v=0,E=r+(h.e=t.e-e.e)+1;for(h.s=o,o=E<0?0:E,u.unshift(0);S++<l;)g.push(0);do{for(m=0;m<10;m++){if(l!=(S=g.length))c=l>S?1:-1;else for(p=-1,c=0;++p<l;)if(a[p]!=g[p]){c=a[p]>g[p]?1:-1;break}if(c<0){for(s=S==l?a:u;S;){if(g[--S]<s[S]){for(p=S;p&&!g[--p];)g[p]=9;--g[p],g[S]+=10}g[S]-=s[S]}for(;!g[0];)g.shift()}else break}D[v++]=c?m:++m,g[0]&&c?g[S]=i[d]||0:g=[i[d]]}while((d++<y||g[0]!==J)&&o--);return!D[0]&&v!=1&&(D.shift(),h.e--,E--),v>E&&q(h,E,n.RM,g[0]!==J),h};B.eq=function(e){return this.cmp(e)===0};B.gt=function(e){return this.cmp(e)>0};B.gte=function(e){return this.cmp(e)>-1};B.lt=function(e){return this.cmp(e)<0};B.lte=function(e){return this.cmp(e)<1};B.minus=B.sub=function(e){var t,n,i,a,o=this,r=o.constructor,l=o.s,s=(e=new r(e)).s;if(l!=s)return e.s=-s,o.plus(e);var m=o.c.slice(),c=o.e,p=e.c,u=e.e;if(!m[0]||!p[0])return p[0]?e.s=-s:m[0]?e=new r(o):e.s=1,e;if(l=c-u){for((a=l<0)?(l=-l,i=m):(u=c,i=p),i.reverse(),s=l;s--;)i.push(0);i.reverse()}else for(n=((a=m.length<p.length)?m:p).length,l=s=0;s<n;s++)if(m[s]!=p[s]){a=m[s]<p[s];break}if(a&&(i=m,m=p,p=i,e.s=-e.s),(s=(n=p.length)-(t=m.length))>0)for(;s--;)m[t++]=0;for(s=t;n>l;){if(m[--n]<p[n]){for(t=n;t&&!m[--t];)m[t]=9;--m[t],m[n]+=10}m[n]-=p[n]}for(;m[--s]===0;)m.pop();for(;m[0]===0;)m.shift(),--u;return m[0]||(e.s=1,m=[u=0]),e.c=m,e.e=u,e};B.mod=function(e){var t,n=this,i=n.constructor,a=n.s,o=(e=new i(e)).s;if(!e.c[0])throw Error(tn);return n.s=e.s=1,t=e.cmp(n)==1,n.s=a,e.s=o,t?new i(n):(a=i.DP,o=i.RM,i.DP=i.RM=0,n=n.div(e),i.DP=a,i.RM=o,this.minus(n.times(e)))};B.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};B.plus=B.add=function(e){var t,n,i,a=this,o=a.constructor;if(e=new o(e),a.s!=e.s)return e.s=-e.s,a.minus(e);var r=a.e,l=a.c,s=e.e,m=e.c;if(!l[0]||!m[0])return m[0]||(l[0]?e=new o(a):e.s=a.s),e;if(l=l.slice(),t=r-s){for(t>0?(s=r,i=m):(t=-t,i=l),i.reverse();t--;)i.push(0);i.reverse()}for(l.length-m.length<0&&(i=m,m=l,l=i),t=m.length,n=0;t;l[t]%=10)n=(l[--t]=l[t]+m[t]+n)/10|0;for(n&&(l.unshift(n),++s),t=l.length;l[--t]===0;)l.pop();return e.c=l,e.e=s,e};B.pow=function(e){var t=this,n=new t.constructor("1"),i=n,a=e<0;if(e!==~~e||e<-nn||e>nn)throw Error(Q+"exponent");for(a&&(e=-e);e&1&&(i=i.times(t)),e>>=1,!!e;)t=t.times(t);return a?n.div(i):i};B.prec=function(e,t){if(e!==~~e||e<1||e>W)throw Error(Q+"precision");return q(new this.constructor(this),e,t)};B.round=function(e,t){if(e===J)e=0;else if(e!==~~e||e<-W||e>W)throw Error(Ee);return q(new this.constructor(this),e+this.e+1,t)};B.sqrt=function(){var e,t,n,i=this,a=i.constructor,o=i.s,r=i.e,l=new a("0.5");if(!i.c[0])return new a(i);if(o<0)throw Error(le+"No square root");o=Math.sqrt(+X(i,!0,!0)),o===0||o===1/0?(t=i.c.join(""),t.length+r&1||(t+="0"),o=Math.sqrt(t),r=((r+1)/2|0)-(r<0||r&1),e=new a((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+r)):e=new a(o+""),r=e.e+(a.DP+=4);do n=e,e=l.times(n.plus(i.div(n)));while(n.c.slice(0,r).join("")!==e.c.slice(0,r).join(""));return q(e,(a.DP-=4)+e.e+1,a.RM)};B.times=B.mul=function(e){var t,n=this,i=n.constructor,a=n.c,o=(e=new i(e)).c,r=a.length,l=o.length,s=n.e,m=e.e;if(e.s=n.s==e.s?1:-1,!a[0]||!o[0])return e.c=[e.e=0],e;for(e.e=s+m,r<l&&(t=a,a=o,o=t,m=r,r=l,l=m),t=new Array(m=r+l);m--;)t[m]=0;for(s=l;s--;){for(l=0,m=r+s;m>s;)l=t[m]+o[s]*a[m-s-1]+l,t[m--]=l%10,l=l/10|0;t[m]=l}for(l?++e.e:t.shift(),s=t.length;!t[--s];)t.pop();return e.c=t,e};B.toExponential=function(e,t){var n=this,i=n.c[0];if(e!==J){if(e!==~~e||e<0||e>W)throw Error(Ee);for(n=q(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return X(n,!0,!!i)};B.toFixed=function(e,t){var n=this,i=n.c[0];if(e!==J){if(e!==~~e||e<0||e>W)throw Error(Ee);for(n=q(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return X(n,!1,!!i)};B.toJSON=B.toString=function(){var e=this,t=e.constructor;return X(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])};typeof Symbol!="undefined"&&(B[Symbol.for("nodejs.util.inspect.custom")]=B.toJSON);B.toNumber=function(){var e=+X(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(le+"Imprecise conversion");return e};B.toPrecision=function(e,t){var n=this,i=n.constructor,a=n.c[0];if(e!==J){if(e!==~~e||e<1||e>W)throw Error(Q+"precision");for(n=q(new i(n),e,t);n.c.length<e;)n.c.push(0)}return X(n,e<=n.e||n.e<=i.NE||n.e>=i.PE,!!a)};B.valueOf=function(){var e=this,t=e.constructor;if(t.strict===!0)throw Error(le+"valueOf disallowed");return X(e,e.e<=t.NE||e.e>=t.PE,!0)};var $n=an(),A=$n;var se=require("obsidian");var Ie=async(e,t)=>{let{jsonData:n}=await j("Archive bills");if(n==null)throw new Error("Bill is null or undefined");let i=n.find(o=>o.id===e.bill.id);if(!i)return`Bill ${e.bill.id} not found`;let a=t?new A(i.balance).plus(t.amount):new A(i.balance);return new A(e.amount).gt(a)?`On bill ${i.name} insufficient funds`:"success"},Fe=async(e,t)=>{let n=app.vault.getAbstractFileByPath(f.settings.targetFolder);if(!n||!(n instanceof se.TFolder))throw new Error("Finance folder not found or is not a folder");let i=[],a=o=>{for(let r of o.children)r instanceof se.TFolder?a(r):r instanceof se.TFile&&r.name==="History.md"&&i.push(r)};a(n);for(let o of i)try{let l=(await app.vault.read(o)).match(/```json([\s\S]*?)```/);if(!l||l[1].trim().length<=2)continue;let s=JSON.parse(l[1].trim());if(!Array.isArray(s))continue;if(s.some(c=>{var p,u;return t==="plan"?((p=c==null?void 0:c.category)==null?void 0:p.id)===e:t==="bill"?((u=c==null?void 0:c.bill)==null?void 0:u.id)===e:!1}))return!0}catch(r){console.error(`Error processing file: ${o.path}`,r)}return!1};var on=async(e,t)=>{let{jsonData:n,content:i,file:a,status:o}=await P("History");if(o!=="success")return o;if(!n)return"Error with data history";if(!i)return"Error with content history";if(!a)return"Error with file history";if(e.type==="expense"){let r=await Ie(e,t)}if(e.type==="expense"){let r=await te(e,"edit",t);if(r!=="success")return r}else if(e.type==="income"){let r=await ae(e,"edit",t);if(r!=="success")return r}else return"Error";try{let r=n.map(m=>m.id===e.id?{...m,...e}:m),l=JSON.stringify(r,null,4),s=i.replace(/```json[\s\S]*?```/,"```json\n"+l+"\n```");return await f.app.vault.modify(a,s),"success"}catch(r){return r}},rn=async e=>{let t={expense:()=>P("Expenditure plan"),income:()=>P("Income plan")};try{let n=t[e.type];if(!n)return"Element not found";let{jsonData:i,content:a,file:o,status:r}=await n();if(r!=="success")return r;if(!i)return"jsonData is null or undefined";if(!o)return"History file is null or undefined";if(!a)return"History content is null or undefined";let l=i.map(c=>c.id===e.id?{...c,...e}:c),s=JSON.stringify(l,null,4)+"\n```",m=a.replace(/```json[\s\S]*?```/,"```json\n"+s);if(await f.app.vault.modify(o,m),e.type==="expense")await V();else if(e.type==="income")await Z();else return"Error: Plan archiving error";return"success"}catch(n){return n}},ln=async e=>{let{jsonData:t,content:n,file:i,status:a}=await j("Archive bills");if(a!=="success")return a;if(!t)return"Error with data bill";if(!n)return"Error with content bill";if(!i)return"Error with file bill";try{let o=t.map(s=>s.id===e.id?{...s,...e}:s),r=JSON.stringify(o,null,4)+"\n```",l=n.replace(/```json[\s\S]*?```/,"```json\n"+r);return await f.app.vault.modify(i,l),"success"}catch(o){return o}},me=async(e,t,n)=>{try{let i=JSON.stringify(e,null,4),a=n.replace(/```json[\s\S]*?```/,"```json\n"+i+"\n```");return await f.app.vault.modify(t,a),"success"}catch(i){return`Error update ${t.name}: ${i}`}};A.DP=2;A.RM=A.roundHalfUp;var te=async(e,t,n)=>{let i=new A(e.amount),a=await j("Archive bills");if(a.status!=="success")return a.status;if(!a.jsonData||!a.file||!a.content)return"Bills data error";let o=await P("Expenditure plan");if(o.status!=="success")return o.status;if(!o.jsonData||!o.file||!o.content)return"Plans data error";let r=a.jsonData,l=o.jsonData,s=async()=>{let p=await me(r,a.file,a.content);if(p!=="success")return p;let u=await me(l,o.file,o.content);return u!=="success"?u:"success"},m=(p,u)=>{r=r.map(d=>d.id===p?{...d,balance:new A(d.balance).plus(u).toFixed(2)}:d)},c=(p,u)=>{l=l.map(d=>d.id===p?{...d,amount:new A(d.amount).plus(u).toFixed(2)}:d)};switch(t){case"add":return m(e.bill.id,i.times(-1)),c(e.category.id,i),await s();case"remove":return m(e.bill.id,i),c(e.category.id,i.times(-1)),await s();case"edit":if(!n)return"Old data is required for edit";console.log(n,e);let p=new A(n.amount);m(n.bill.id,p),c(n.category.id,p.times(-1)),await s();let u=await j("Archive bills"),d=await P("Expenditure plan");return!u.jsonData||!d.jsonData?"Reload data error":(r=u.jsonData,l=d.jsonData,m(e.bill.id,i.times(-1)),c(e.category.id,i),await s());default:return"Invalid modifier"}},ae=async(e,t,n)=>{let i=new A(e.amount),a=await j("Archive bills");if(a.status!=="success")return a.status;if(!a.jsonData||!a.file||!a.content)return"Bills data error";let o=await P("Income plan");if(o.status!=="success")return o.status;if(!o.jsonData||!o.file||!o.content)return"Plans data error";let r=a.jsonData,l=o.jsonData,s=async()=>{let p=await me(r,a.file,a.content);if(p!=="success")return p;let u=await me(l,o.file,o.content);return u!=="success"?u:"success"},m=(p,u)=>{r=r.map(d=>d.id===p?{...d,balance:new A(d.balance).plus(u).toFixed(2)}:d)},c=(p,u)=>{l=l.map(d=>d.id===p?{...d,amount:new A(d.amount).plus(u).toFixed(2)}:d)};switch(t){case"add":return m(e.bill.id,i),c(e.category.id,i),await s();case"remove":return m(e.bill.id,i.times(-1)),c(e.category.id,i.times(-1)),await s();case"edit":if(!n)return"Old data is required for edit";let p=new A(n.amount);m(n.bill.id,p.times(-1)),c(n.category.id,p.times(-1)),await s();let u=await j("Archive bills"),d=await P("Income plan");return!u.jsonData||!d.jsonData?"Reload data error":(r=u.jsonData,l=d.jsonData,m(e.bill.id,i),c(e.category.id,i),await s());default:return"Invalid modifier"}},sn=async e=>{if(e.fromBillId===e.toBillId)return"Cannot transfer to the same bill";let{jsonData:t,file:n,content:i,status:a}=await j("Archive bills");if(a!=="success")return a;if(!t)return"Bills is null or undefined";if(!i)return"Bill content is null or undefined";if(!n)return"Bill file is null or undefined";let o=t.find(p=>p.id===e.fromBillId),r=t.find(p=>p.id===e.toBillId);if(!o||!r)return"One of the bills was not found";let l=new A(e.amount),s=new A(o.balance);if(l.gt(s))return`Insufficient funds in the ${o.name}`;let m=s.minus(l),c=new A(r.balance).plus(l);try{let p=t.map(y=>y.id===e.fromBillId?{...y,balance:m.toFixed(2)}:y.id===e.toBillId?{...y,balance:c.toFixed(2)}:y),u=JSON.stringify(p,null,4),d=i.replace(/```json[\s\S]*?```/,"```json\n"+u+"\n```");return await f.app.vault.modify(n,d),"success"}catch(p){return p}};var mn=async e=>{let t=await Ie(e);if(e.type==="expense"&&t!=="success")return t;let{jsonData:n,content:i,file:a,status:o}=await P("History");if(o!=="success")return o;if(e.type==="expense"){let r=await te(e,"add");if(r!=="success")return r}else if(e.type==="income"){let r=await ae(e,"add");if(r!=="success")return r}else return"Error";if(i===void 0)throw new Error("content is undefined");if(a===void 0)throw new Error("file is undefined");try{if(n==null){let r=JSON.stringify([e],null,4)+"\n```",l=i.replace(/\```$/,r);return await f.app.vault.modify(a,l),"success"}else if(n.length>=1){let r=JSON.stringify([e],null,4)+"]\n```",l=i.lastIndexOf("}"),s=i.slice(0,l+1)+`,
`+r.replace(/\[/,"").replace(/\]/,"");return await f.app.vault.modify(a,s),"success"}else throw new Error("jsonData has an unexpected format")}catch(r){return r}},cn=async e=>e.type==="expense"?await Mn(e):e.type==="income"?await kn(e):"Error";async function Mn(e){let{jsonData:t,content:n,file:i,status:a}=await P("Expenditure plan");if(a!=="success")return a;if(t===void 0)throw new Error("Archive bills is null or undefined");if(n==null)throw new Error("Archive bills content is null or undefined");if(i==null)throw new Error("Archive bills content is null or undefined");try{if(t===null){let o=JSON.stringify([e],null,4)+"\n```",r=n.replace(/\```$/,o);return await f.app.vault.modify(i,r),await V()!=="success"?"Error archiving expenditure plan":"success"}else if(t.length>=1){let o=JSON.stringify([e],null,4)+"]\n```",r=n.lastIndexOf("}"),l=n.slice(0,r+1)+`,
`+o.replace(/\[/,"").replace(/\]/,"");return await f.app.vault.modify(i,l),await V()!=="success"?"Error archiving expenditure plan":"success"}else return"Error with jsonData expenditure plan"}catch(o){return o}}async function kn(e){let{jsonData:t,content:n,file:i,status:a}=await P("Income plan");if(a!=="success")return a;if(t===void 0)throw new Error("Archive bills is null or undefined");if(n==null)throw new Error("Archive bills content is null or undefined");if(i==null)throw new Error("Archive bills content is null or undefined");try{if(t===null){let o=JSON.stringify([e],null,4)+"\n```",r=n.replace(/\```$/,o);return await f.app.vault.modify(i,r),await Z()!=="success"?"Error archiving income plan":"success"}else if(t.length>=1){let o=JSON.stringify([e],null,4)+"]\n```",r=n.lastIndexOf("}"),l=n.slice(0,r+1)+`,
`+o.replace(/\[/,"").replace(/\]/,"");return await f.app.vault.modify(i,l),await Z()!=="success"?"Error archiving income plan":"success"}else return"Error with jsonData income plan"}catch(o){return o}}var un=async e=>{let{jsonData:t,content:n,file:i,status:a}=await j("Archive bills");if(a!=="success")return a;if(t===void 0)throw new Error("Archive bills is null or undefined");if(n==null)throw new Error("Archive bills content is null or undefined");if(i==null)throw new Error("Archive bills content is null or undefined");try{if(t===null){let o=JSON.stringify([e],null,4)+"\n```",r=n.replace(/\```$/,o);return await f.app.vault.modify(i,r),"success"}else if(t.length>=1){let o=JSON.stringify([e],null,4)+"]\n```",r=n.lastIndexOf("}"),l=n.slice(0,r+1)+`,
`+o.replace(/\[/,"").replace(/\]/,"");return await f.app.vault.modify(i,l),"success"}else return"Error with jsonData archive bills"}catch(o){return o}};var dn=async()=>{let{jsonData:e,status:t}=await j("Archive bills");if(t!=="success")return t;if(e===void 0)throw new Error("Bill is undefined");if(e===null)return new M.Notice("Add a bill");let{jsonData:n,status:i}=await P("Expenditure plan");if(i!=="success")return i;if(n===void 0)throw new Error("Expediture Plan is undefined");if(n===null)return new M.Notice("Add a expenditure plan");let{jsonData:a,status:o}=await P("Income plan");if(o!=="success")return i;if(a===void 0)throw new Error("Income Plan is undefined");if(a===null)return new M.Notice("Add a income plan");let{jsonData:r,status:l}=await P("History");if(l!=="success")return l;if(r===void 0)throw new Error("History is undefined");let{contentEl:s}=I,{selectedYear:m,selectedMonth:c}=F();s.empty(),s.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Operation"});let u=s.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,M.setIcon)(u,"arrow-left"),u.addEventListener("click",()=>{I.onOpen()});let d=s.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}),y,g=d.createEl("div",{cls:"main-form_radio"}),S=g.createEl("button",{text:"Expense",cls:"main-radio_exprense",attr:{"data-radio":"expense",type:"button"}});S.dataset.radio==="expense"&&(y=S.dataset.radio,S.addClass("main-radion-button--active"));let h=g.createEl("button",{text:"Income",cls:"main-radio_income",attr:{"data-radio":"income",type:"button"}});h.addEventListener("click",()=>{h.dataset.radio==="income"&&(S.removeClass("main-radion-button--active"),h.addClass("main-radion-button--active"),y=h.dataset.radio,x(),v.focus())}),S.addEventListener("click",()=>{S.dataset.radio==="expense"&&(h.removeClass("main-radion-button--active"),S.addClass("main-radion-button--active"),y=S.dataset.radio,x(),v.focus())});let D=d.createEl("div",{cls:"main-form-input"}),v=D.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",inputmode:"decimal"}});v.focus();let E=D.createEl("select",{cls:"form-selects",attr:{name:"select-bills",id:"select-bills"}});if(e.some(w=>w.generalBalance===!0)){let w=document.createElement("optgroup");w.label="Main",e.forEach(C=>{if(C.generalBalance){let N=document.createElement("option");N.value=C.id,N.textContent=`${C.emoji} ${C.name} \u2022 ${C.balance} ${$(f.settings.baseCurrency)}`,w.appendChild(N)}}),E.appendChild(w)}if(e.some(w=>w.generalBalance===!1)){let w=document.createElement("optgroup");w.label="Additional",e.forEach(C=>{if(!C.generalBalance){let N=document.createElement("option");N.value=C.id,N.textContent=`${C.emoji} ${C.name} \u2022 ${C.balance} ${$(f.settings.baseCurrency)}`,w.appendChild(N)}}),E.appendChild(w)}if(r===null)e.sort((w,C)=>Number(C.balance)-Number(w.balance)),E.value=e[0].id;else{let w={};r.forEach(K=>{let z=K.bill.id;w[z]=(w[z]||0)+1});let C=0,N=null;for(let K in w)w[K]>C?(C=w[K],N=K):w[K]===C&&(e.sort((z,Oe)=>Number(Oe.balance)-Number(z.balance)),E.value=e[0].id);let Be=e.sort((K,z)=>K.id===N?-1:z.id===N?1:0);E.value=Be[0].id}let b=D.createEl("select",{cls:"form-selects",attr:{name:"select-category",id:"select-category"}});x();async function x(){y==="expense"?(b.empty(),n&&(n.sort((w,C)=>Number(C.amount)-Number(w.amount)),n.forEach(w=>{b.createEl("option",{text:`${w.emoji} ${w.name} \u2022 ${w.amount} ${$(f.settings.baseCurrency)}`,attr:{value:w.id}})}))):(b.empty(),a&&(a.sort((w,C)=>Number(C.amount)-Number(w.amount)),a.forEach(w=>{b.createEl("option",{text:`${w.emoji} ${w.name} \u2022 ${w.amount} ${$(f.settings.baseCurrency)}`,attr:{value:w.id}})})))}let L=D.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}}),k=D.createEl("select",{cls:"form-selects",attr:{name:"select-date",id:"select-date"}});be(k);let de=Date.now()-new Date(new Date().getFullYear(),new Date().getMonth(),0).getTime()>3*24*60*60*1e3,_e=Date.now()-new Date(new Date().getFullYear(),new Date().getMonth(),0).getTime()>2*24*60*60*1e3,pe=D.createEl("div",{cls:"form-selects-date-buttons"});m===null&&c===null&&_e&&(pe.createEl("button",{text:"Today",attr:{type:"button"}}).addEventListener("click",()=>{ve(k,0)}),pe.createEl("button",{text:"Yesterday",attr:{type:"button"}}).addEventListener("click",()=>{ve(k,-1)})),m===null&&c===null&&de&&pe.createEl("button",{text:"The day before yesterday",attr:{type:"button"}}).addEventListener("click",()=>{ve(k,-2)}),D.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async w=>{if(w.preventDefault(),!(Number(v.value)>=1))return v.focus(),new M.Notice("Enter the amount");let C={id:String(Se()),amount:String(v.value),bill:{id:E.value},category:{id:b.value},comment:L.value.trim(),date:`${k.value}T${en()}`,type:y},N=await mn(C);N==="success"?setTimeout(()=>{I.onOpen(),new M.Notice("Operation added")},100):new M.Notice(N)})},pn=()=>{let{contentEl:e}=I;e.empty();let t=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,M.setIcon)(t,"arrow-left"),t.addEventListener("click",()=>{I.onOpen()}),e.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let i=e.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}),a,o=i.createEl("div",{cls:"main-form_radio"}),r=o.createEl("button",{text:"Expense",cls:"main-radio_exprense",attr:{"data-radio":"expense",type:"button"}});r.dataset.radio==="expense"&&(a=r.dataset.radio,r.addClass("main-radion-button--active"));let l=o.createEl("button",{text:"Income",cls:"main-radio_income",attr:{"data-radio":"income",type:"button"}});l.addEventListener("click",()=>{l.dataset.radio==="income"&&(r.removeClass("main-radion-button--active"),l.addClass("main-radion-button--active"),a=l.dataset.radio,m.focus())}),r.addEventListener("click",()=>{r.dataset.radio==="expense"&&(l.removeClass("main-radion-button--active"),r.addClass("main-radion-button--active"),a=r.dataset.radio,m.focus())});let s=i.createEl("div",{cls:"main-form-input"}),m=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text"}});m.focus();let c=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text"}});c.addEventListener("input",()=>{let d=c.value,g=Array.from(d).filter(S=>/\p{Extended_Pictographic}/u.test(S));c.value=g.slice(0,1).join("")});let p=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}});s.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async d=>{if(d.preventDefault(),!m.value)return m.focus(),new M.Notice("Enter the name");let y={id:String(Se()),name:m.value.trim(),emoji:c.value,amount:"0",comment:p.value.trim(),type:a},g=await cn(y);g==="success"?setTimeout(()=>{I.onOpen(),new M.Notice("The plan has been added.")},100):new M.Notice(g)})},fn=()=>{let{contentEl:e}=I;e.empty();let t=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,M.setIcon)(t,"arrow-left"),t.addEventListener("click",()=>{I.onOpen()}),e.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let a=e.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),o=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text"}});o.focus();let r=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text"}});r.addEventListener("input",()=>{let h=r.value,v=Array.from(h).filter(E=>/\p{Extended_Pictographic}/u.test(E));r.value=v.slice(0,1).join("")});let l=a.createEl("select",{cls:"form-selects",attr:{name:"select-currency",id:"select-currency"}}),{popularCurrencies:s,otherCurrencies:m}=he(),c=document.createElement("optgroup");c.label="Popular",s.forEach(h=>{let D=document.createElement("option");D.value=h.code,D.textContent=`${h.code} \u2022 ${h.name} \u2022 ${h.symbol}`,c.appendChild(D)});let p=document.createElement("optgroup");p.label="All currencies",m.forEach(h=>{let D=document.createElement("option");D.value=h.code,D.textContent=`${h.code} ${h.name} \u2022 ${h.symbol}`,p.appendChild(D)}),l.appendChild(c),l.appendChild(p),l.value=f.settings.baseCurrency;let u=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Current balance",id:"input-current-balance",type:"number",inputmode:"decimal"}}),d=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}}),y=a.createEl("div",{cls:"form-checkbox-div"}),g=y.createEl("input",{cls:"form-checkbox",attr:{id:"input-checkbox",type:"checkbox",checked:!0}});y.createEl("span",{text:"Take into account in the general balance",cls:"form-text"}),a.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async h=>{if(h.preventDefault(),!o.value)return o.focus(),new M.Notice("Enter the name");let D={id:String(Se()),name:o.value.trim(),emoji:r.value,balance:String(u.value),currency:l.value,generalBalance:g.checked,comment:d.value.trim()},v=await un(D);v==="success"?setTimeout(()=>{I.onOpen(),new M.Notice("The bill has been added.")},100):new M.Notice(v)})};var O=require("obsidian");var yn=async e=>{if(e==null)return"Element not found";let{jsonData:t,content:n,file:i,status:a}=await P("History");if(a!=="success")return a;if(i==null)return"History file is null or undefined";if(n==null)return"History content is null or undefined";if(t==null)return"History data is null or undefined";if(e.type==="expense"){let o=await te(e,"remove");if(o!=="success")return o}else if(e.type==="income"){let o=await ae(e,"remove");if(o!=="success")return o}else return"Error";if(t.length<=1)try{let o=n.replace(/```json[\s\S]*?```/,"```json\n```");return await f.app.vault.modify(i,o),"success"}catch(o){return`Error deleting item: ${o}`}else try{let o=t.filter(s=>s.id!==e.id),r=JSON.stringify(o,null,4),l=n.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await f.app.vault.modify(i,l),"success"}catch(o){return`Error deleting item: ${o}`}},gn=async e=>{let{id:t,name:n,emoji:i,type:a}=e;if(!t)return"Element not found";let o={expense:()=>P("Expenditure plan"),income:()=>P("Income plan")};try{let r=o[a];if(!r)return"Element not found";let{jsonData:l,content:s,file:m,status:c}=await r();if(c!=="success")return c;if(!l)return"jsonData is null or undefined";if(!m)return"History file is null or undefined";if(!s)return"History content is null or undefined";if(await Fe(t,"plan"))return`The category ${i} \u2022 ${n} cannot be deleted because it is used in history.`;let u=(()=>{if(l.length<=1)return s.replace(/```json[\s\S]*?```/,"```json\n```");if(l.length>=2){let d=l.filter(S=>S.id!==t),y=JSON.stringify(d,null,4);return s.replace(/```json[\s\S]*?```/,"```json\n"+y+"\n```")}else return"Error"})();if(u==="Error")return"Error with create new content";if(await f.app.vault.modify(m,u),a==="expense"){if(await V()!=="success")return"Error archiving expense plan"}else if(a==="income"){if(await Z()!=="success")return"Error archiving income plan"}else return"Error";return"success"}catch(r){return`Error deleting item: ${r}`}},Sn=async e=>{let{id:t,name:n,emoji:i}=e;if(!t)return"Element not found";let{jsonData:a,content:o,file:r,status:l}=await j("Archive bills");if(l!=="success")return l;if(!a)return"jsonData is null or undefined";if(!r)return"History file is null or undefined";if(!o)return"History content is null or undefined";try{if(await Fe(t,"bill"))return"The bill ${emoji} \u2022 ${name} cannot be deleted because it is in use in history.";let m=(()=>{if(a.length<=1)return o.replace(/```json[\s\S]*?```/,"```json\n```");if(a.length>=2){let c=a.filter(d=>d.id!==t),p=JSON.stringify(c,null,4);return o.replace(/```json[\s\S]*?```/,"```json\n"+p+"\n```")}else return"Error"})();return m==="Error"?"Error with create new content":(await f.app.vault.modify(r,m),"success")}catch(s){return`Error deleting item: ${s}`}};var Ae=async e=>{let{id:t}=e.target.closest("li").dataset;if(!t)return"Element not found";let{item:n,status:i}=await _(t,"History");if(i!=="success")return i;let{contentEl:a}=I;a.empty(),a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F"});let r=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,O.setIcon)(r,"arrow-left"),r.addEventListener("click",()=>{I.onOpen()});let l=a.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,O.setIcon)(l,"trash-2"),l.addEventListener("click",async()=>{let v=await yn(n);v==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("The operation is remote.")},100):new O.Notice(v)});let m=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),c=m.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",value:n.amount,inputmode:"decimal"}}),p=m.createEl("select",{cls:"form-selects",attr:{name:"select-bills",id:"select-bills"}}),{jsonData:u,status:d}=await j("Archive bills");if(d!=="success")return d;if(u==null)throw new Error("Bill is null or undefined");if(u.some(v=>v.generalBalance===!0)){let v=document.createElement("optgroup");v.label="Main",u.forEach(E=>{if(E.generalBalance){let b=document.createElement("option");b.value=E.id,b.textContent=`${E.emoji} ${E.name} \u2022 ${E.balance} ${$(f.settings.baseCurrency)}`,v.appendChild(b)}}),p.appendChild(v)}if(u.some(v=>v.generalBalance===!1)){let v=document.createElement("optgroup");v.label="Additional",u.forEach(E=>{if(!E.generalBalance){let b=document.createElement("option");b.value=E.id,b.textContent=`${E.emoji} ${E.name} \u2022 ${E.balance} ${$(f.settings.baseCurrency)}`,v.appendChild(b)}}),p.appendChild(v)}p.value=n.bill.id;let y=m.createEl("select",{cls:"form-selects",attr:{name:"select-category",id:"select-category"}});g();async function g(){if(n.type==="expense"){y.empty();let{jsonData:v,status:E}=await P("Expenditure plan");if(E!=="success")return E;if(v==null)throw new Error("Expenditure plan is null or undefined");v.sort((b,x)=>Number(x.amount)-Number(b.amount)),v.forEach(b=>{if(b.id===n.category.id){y.createEl("option",{text:`${b.emoji} ${b.name} \u2022 ${b.amount} ${$(f.settings.baseCurrency)}`,attr:{value:b.id,selected:"selected"}});return}y.createEl("option",{text:`${b.emoji} ${b.name} \u2022 ${b.amount} ${$(f.settings.baseCurrency)}`,attr:{value:b.id}})})}else if(n.type==="income"){y.empty();let{jsonData:v,status:E}=await P("Income plan");if(E!=="success")return E;if(v==null)throw new Error("Expenditure plan is null or undefined");v.sort((b,x)=>Number(x.amount)-Number(b.amount)),v.forEach(b=>{if(b.id===n.category.id){y.createEl("option",{text:`${b.emoji} ${b.name} \u2022 ${b.amount} ${$(f.settings.baseCurrency)}`,attr:{value:b.id,selected:"selected"}});return}y.createEl("option",{text:`${b.emoji} ${b.name} \u2022 ${b.amount} ${$(f.settings.baseCurrency)}`,attr:{value:b.id}})})}else return"Error category type"}let S=m.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:n.comment}}),h=m.createEl("select",{cls:"form-selects",attr:{name:"select-date",id:"select-date"}});be(h,n.date),h.value=n.date.split("T")[0],m.createEl("button",{text:"Safe",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async v=>{if(v.preventDefault(),!(Number(c.value)>=1))return c.focus(),new O.Notice("Enter the amount");let E={id:n.id,amount:String(c.value),bill:{id:p.value},category:{id:y.value},comment:S.value,date:`${h.value}T${n.date.split("T")[1]}`,type:n.type},b=await on(E,n);b==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("Operation changed")},100):new O.Notice(b)})},$e=async e=>{let{id:t,type:n}=e.target.closest("li").dataset;if(!t)return"Element not found";let{item:i,status:a}=await _(t,n);if(a!=="success")return a;let{contentEl:o}=I;o.empty();let r=o.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,O.setIcon)(r,"arrow-left"),r.addEventListener("click",()=>{I.onOpen()});let l=o.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,O.setIcon)(l,"trash-2"),l.addEventListener("click",async()=>{let S=await gn(i);S==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("The plan has been removed.")},100):new O.Notice(S)}),o.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let c=o.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),p=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text",value:i.name}}),u=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text",value:i.emoji}});u.addEventListener("input",()=>{let S=u.value,D=Array.from(S).filter(v=>/\p{Extended_Pictographic}/u.test(v));u.value=D.slice(0,1).join("")});let d=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:i.comment}});c.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async S=>{if(S.preventDefault(),!p.value)return p.focus(),new O.Notice("Enter the name");let h={id:i.id,name:p.value.trim(),emoji:u.value,amount:i.amount,comment:d.value.trim(),type:i.type},D=await rn(h);D==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("The plan has been edited.")},100):new O.Notice(D)});let{jsonData:g}=await P("History");if(g===void 0)throw new Error("History is undefined");if(g!==null){let S=g.filter(x=>x.category.id===t);if(S.length<1)return;let h=new Date,v=Object.values(S.reduce((x,L)=>{let k=L.date.split("T")[0];return x[k]||(x[k]=[]),x[k].push(L),x},{})).sort((x,L)=>new Date(L[0].date).getTime()-new Date(x[0].date).getTime()).map(x=>x.sort((L,k)=>Math.abs(new Date(L.date).getTime()-h)-Math.abs(new Date(k.date).getTime()-h))),E=o.createEl("h1",{text:"History of the plan"}),b=o.createEl("div",{cls:"history-plan"});v.forEach((x,L)=>{let k=b.createEl("div",{cls:"history-block"}),de=k.createEl("div",{cls:"full-data-block"}),_e=de.createEl("span",{text:De(x[0].date.split("T")[0])}),pe=de.createEl("span",{text:we(x)}),ze=k.createEl("ul",{cls:"data-list"});x.forEach(async(w,C)=>{let N=ze.createEl("li",{cls:"data-item",attr:{"data-id":w.id}});N.onclick=async bn=>{await Ae(bn)};let{item:Be,status:K}=await _(w.category.id,w.type);K==="success"?N.createEl("p",{text:`${Be.name}`}):N.createEl("p",{text:"Error: Plan not found by id"});let{item:z,status:Oe}=await _(w.bill.id,"Archive bills");Oe==="success"?N.createEl("span",{text:z.name}):N.createEl("span",{text:"Error: Bill not found by id"});let _n=N.createEl("p",{text:Pe(w.amount,w.type)})})})}},Me=async e=>{let{id:t}=e.target.closest("li").dataset;if(!t)return"Element not found";let{item:n,status:i}=await _(t,"Archive bills");if(!i)return i;let{contentEl:a}=I;a.empty();let o=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,O.setIcon)(o,"arrow-left"),o.addEventListener("click",()=>{I.onOpen()});let r=a.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,O.setIcon)(r,"trash-2"),r.addEventListener("click",async()=>{let b=await Sn(n);b==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("The bill has been removed.")},100):new O.Notice(b)});let s=a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"}),c=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),p=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text",value:n.name}}),u=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text",value:n.emoji}});u.addEventListener("input",()=>{let b=u.value,L=Array.from(b).filter(k=>/\p{Extended_Pictographic}/u.test(k));u.value=L.slice(0,1).join("")});let d=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Current balance",id:"input-current-balance",type:"number",value:n.balance,inputmode:"decimal"}}),y=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:n.comment}}),{jsonData:g,status:S}=await j("Archive bills");if(S!=="success")return S;if(g==null)throw new Error("Bills is null or undefined");if(g.length>1){let b=c.createEl("div",{cls:"form-transfer-expense-div"});(0,O.setIcon)(b,"upload");let x=b.createEl("span",{text:"Transactions between bills",cls:"form-text-transfer"});b.addEventListener("click",async()=>{await Rn(n.id)})}let h=c.createEl("div",{cls:"form-checkbox-div"}),D=h.createEl("input",{cls:"form-checkbox",attr:{id:"input-checkbox",type:"checkbox",checked:n.generalbalance}}),v=h.createEl("span",{text:"Take into account in the general balance",cls:"form-text"});c.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async()=>{if(e.preventDefault(),!p.value)return p.focus(),new O.Notice("Enter the name");let b={id:n.id,name:p.value.trim(),emoji:u.value,balance:String(d.value.trim()),currency:n.currency,generalBalance:D.checked,comment:y.value.trim()},x=await ln(b);x==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("The bill has been edited.")},100):new O.Notice(x)})},Rn=async e=>{if(!e)return"Element not found";let{jsonData:t,status:n}=await j("Archive bills");if(!n)return n;if(!t)return"Bill is null or undifined";let{contentEl:i}=I;i.empty();let a=i.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,O.setIcon)(a,"arrow-left"),a.addEventListener("click",()=>{I.onOpen()});let r=i.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Transfer"}),s=i.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),m=s.createEl("select",{cls:"form-selects",attr:{name:"select-from-bill",id:"select-from-bill"}});if(t.some(d=>d.generalBalance===!0)){let d=document.createElement("optgroup");d.label="Main",t.forEach(y=>{if(y.generalBalance){let g=document.createElement("option");g.value=y.id,g.textContent=`${y.name} \u2022 ${y.balance} ${$(f.settings.baseCurrency)}`,d.appendChild(g)}}),m.appendChild(d)}if(t.some(d=>d.generalBalance===!1)){let d=document.createElement("optgroup");d.label="Additional",t.forEach(y=>{if(!y.generalBalance){let g=document.createElement("option");g.value=y.id,g.textContent=`${y.name} \u2022 ${y.balance} ${$(f.settings.baseCurrency)}`,d.appendChild(g)}}),m.appendChild(d)}m.value=e;let c=s.createEl("select",{cls:"form-selects",attr:{name:"select-to-bill",id:"select-to-bill"}});if(c.createEl("option",{text:"Select an account",attr:{value:"",selected:"",disabled:"",hidden:""}}),t.some(d=>d.generalBalance===!0)){let d=document.createElement("optgroup");d.label="Main",t.forEach(y=>{if(y.generalBalance){let g=document.createElement("option");g.value=y.id,g.textContent=`${y.name} \u2022 ${y.balance} ${$(f.settings.baseCurrency)}`,d.appendChild(g)}}),c.appendChild(d)}if(t.some(d=>d.generalBalance===!1)){let d=document.createElement("optgroup");d.label="Additional",t.forEach(y=>{if(!y.generalBalance){let g=document.createElement("option");g.value=y.id,g.textContent=`${y.name} \u2022 ${y.balance} ${$(f.settings.baseCurrency)}`,d.appendChild(g)}}),c.appendChild(d)}let p=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",inputmode:"decimal"}});s.createEl("button",{text:"Transfer",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async d=>{if(d.preventDefault(),!p.value)return p.focus(),new O.Notice("Enter the amount");if(c.value==="")return new O.Notice("Select an account");let y={fromBillId:m.value,toBillId:c.value,amount:String(p.value)},g=await sn(y);g==="success"?setTimeout(()=>{I.onOpen(),new O.Notice("Transfer completed")},100):new O.Notice(g)})};var ee=async(e,t)=>{F({openPageNow:"History"});let{jsonData:n,status:i}=await P("History");if(i!=="success"&&(new ie.Notice(i),console.error(i)),n===null){let o=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined");let r=o.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),l=o.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else e.removeClass("main-content-body--undefined"),e.createEl("input",{cls:"input-search",attr:{id:"input-search",type:"search",placeholder:"\u{1F50E} Search by operations"}}).addEventListener("input",async r=>{let l=r.target.value,{jsonData:s,status:m}=await Ue(l);if(s===void 0)throw new Error("jsonData is null or undefined");if(m!=="success"&&(new ie.Notice(m),console.error(m)),a.empty(),s===null){let c=a.createEl("div",{cls:"undefined-content"});a.addClass("main-content-body--undefined");let p=c.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),u=c.createEl("p",{text:"No matching operations found."})}else s.length>=1?(a.removeClass("main-content-body--undefined"),await ke(a,e,s)):(a.removeClass("main-content-body--undefined"),await ke(a,e,n))});let a=e.createEl("div",{cls:"history-content"});await ke(a,e,n,t)};async function ke(e,t,n,i){if(n!==null){let o=new Date,l=Object.values(n.reduce((s,m)=>{let c=m.date.split("T")[0];return s[c]||(s[c]=[]),s[c].push(m),s},{})).sort((s,m)=>new Date(m[0].date).getTime()-new Date(s[0].date).getTime()).map(s=>s.sort((m,c)=>Math.abs(new Date(m.date).getTime()-o)-Math.abs(new Date(c.date).getTime()-o)));n.length>=5&&t.addClass("main-content-body--padding"),l.forEach((s,m)=>{let c=e.createEl("div",{cls:"history-block"}),p=c.createEl("div",{cls:"full-data-block"}),u=p.createEl("span",{text:De(s[0].date.split("T")[0])}),d=p.createEl("span",{text:`${we(s)}`}),y=c.createEl("ul",{cls:"data-list"});s.forEach(async(g,S)=>{let h=y.createEl("li",{cls:"data-item",attr:{"data-id":g.id}});h.onclick=async L=>{await Ae(L)};let{item:D,status:v}=await _(g.category.id,g.type);v==="success"?h.createEl("p",{text:`${D.emoji} ${D.name}`}):h.createEl("p",{text:"Error: Plan not found by id"});let{item:E,status:b}=await _(g.bill.id,"Archive bills");b==="success"?h.createEl("span",{text:`${E.emoji} ${E.name}`}):h.createEl("span",{text:"Error: Bill not found by id"});let x=h.createEl("p",{text:Pe(g.amount,g.type)})})})}i.createEl("button",{text:"Add an expense or income",cls:"add-button"}).addEventListener("click",async()=>{dn()})}var ce=async(e,t)=>{F({openPageNow:"Plans"});let{jsonData:n,status:i}=await P("Expenditure plan");if(n===void 0)throw new Error("jsonData is undefined");i!=="success"&&(new ie.Notice(i),console.error(i));let{jsonData:a,status:o}=await P("Income plan");o!=="success"&&(new ie.Notice(o),console.error(o));let r=[];if(n===null&&a===null){let s=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined");let m=s.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),c=s.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else{if(n!==null){e.removeClass("main-content-body--undefined");let s=n.sort((y,g)=>g.amount-y.amount);s.forEach(y=>r.push(y));let m=e.createEl("div",{cls:"plan-block"}),c=m.createEl("div",{cls:"full-data-block"}),p=c.createEl("span",{text:"Expense"}),u=c.createEl("span",{text:String(H(s))}),d=m.createEl("ul",{cls:"data-list"});s.forEach((y,g)=>{let S=d.createEl("li",{cls:"data-item",attr:{"data-id":y.id,"data-type":y.type}});S.onclick=async v=>{await $e(v)};let h=S.createEl("p",{text:`${y.emoji} ${y.name}`}),D=S.createEl("p",{text:String(y.amount)})})}if(a!==null){if(a===void 0)throw new Error("incomePlanInfo is undefined");e.removeClass("main-content-body--undefined");let s=a.sort((y,g)=>g.amount-y.amount);s.forEach(y=>r.push(y));let m=e.createEl("div",{cls:"plan-block"}),c=m.createEl("div",{cls:"full-data-block"}),p=c.createEl("span",{text:"Income"}),u=c.createEl("span",{text:String(U(s))}),d=m.createEl("ul",{cls:"data-list"});s.forEach((y,g)=>{let S=d.createEl("li",{cls:"data-item",attr:{"data-id":y.id,"data-type":y.type}});S.onclick=async v=>{await $e(v)};let h=S.createEl("p",{text:`${y.emoji} ${y.name}`}),D=S.createEl("p",{text:String(y.amount)})})}}r.length>5&&e.addClass("main-content-body--padding"),t.createEl("button",{text:"Create a category",cls:"add-button"}).addEventListener("click",async()=>{pn()})},Re=async(e,t)=>{F({openPageNow:"Bills"});let{jsonData:n,status:i}=await j("Archive bills");if(i!=="success"&&(new ie.Notice(i),console.error(i)),n===void 0)throw new Error("Bill is undefined");if(n===null){let o=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined");let r=o.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),l=o.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else{if(n.length>5&&e.addClass("main-content-body--padding"),n.filter(o=>o.generalBalance).length>=1){e.removeClass("main-content-body--undefined");let o=e.createEl("div",{cls:"bill-block"}),r=o.createEl("div",{cls:"full-data-block"}),l=r.createEl("span",{text:"Main"}),s=r.createEl("span",{text:String(ne(n))}),m=o.createEl("ul",{cls:"data-list"});n.forEach((c,p)=>{if(c.generalBalance){let u=m.createEl("li",{cls:"data-item",attr:{"data-id":c.id}});u.onclick=async g=>{await Me(g)};let d=u.createEl("p",{text:`${c.emoji} ${c.name}`}),y=u.createEl("p",{text:String(c.balance)})}})}if(n.filter(o=>!o.generalBalance).length>=1){e.removeClass("main-content-body--undefined");let o=e.createEl("div",{cls:"bill-block"}),r=o.createEl("div",{cls:"full-data-block"}),l=r.createEl("span",{text:"Additional"}),s=r.createEl("span",{text:String(Ze(n))}),m=o.createEl("ul",{cls:"data-list"});n.forEach((c,p)=>{if(!c.generalBalance){let u=m.createEl("li",{cls:"data-item",attr:{"data-id":c.id}});u.onclick=async g=>{await Me(g)};let d=u.createEl("p",{text:`${c.emoji} ${c.name}`}),y=u.createEl("p",{text:String(c.balance)})}})}}t.createEl("button",{text:"Add a bill",cls:"add-button"}).addEventListener("click",async()=>{fn()})};var Le=async()=>{if(!I||!f)return;if(F({selectedMonth:null,selectedYear:null}),!await oe())return Le();let{contentEl:t}=I,{month:n}=Y(),{jsonData:i,status:a}=await j("Archive bills");if(a!=="success"&&(new R.Notice(a),console.error(a)),i===void 0)throw new Error("billsInfo is undefined");let{jsonData:o,status:r}=await P("Expenditure plan");if(r!=="success"&&(new R.Notice(r),console.error(r)),o===void 0)throw new Error("expenditurePlanInfo is undefined");let{jsonData:l,status:s}=await P("Income plan");if(s!=="success"&&(new R.Notice(s),console.error(s)),l===void 0)throw new Error("incomePlanInfo is undefined");t.empty(),t.addClass("finance-content");let c=t.createEl("div",{cls:"finance-header"}).createEl("button",{attr:{id:"showAllMonths"}});(0,R.setIcon)(c,"calendar-days"),c.createEl("span",{text:n}),c.addEventListener("click",async()=>{t.dataset.page==="home"&&(t.setAttribute("data-page","months"),await hn())}),t.setAttribute("data-page","home");let p=t.createEl("div",{cls:"balance"}),u=p.createEl("div",{cls:"balance-top"});u.createEl("span",{text:"Balance"}),u.createEl("p",{text:`${ne(i)} ${$(f.settings.baseCurrency)}`}),u.createEl("span",{text:`~${We(ne(i))} for a day`}),p.createEl("div",{cls:"balance-line"}).style.setProperty("--after-width",`${Qe(i,o)}%`);let y=p.createEl("div",{cls:"balance-body"}),g=y.createEl("div",{cls:"balance_body-expenses"});g.createEl("span",{text:"Expense"});let S=g.createEl("div",{cls:"balance_expenses-check"});(0,R.setIcon)(S,"upload"),S.createEl("p",{text:String(H(o))});let h=y.createEl("div",{cls:"balance_body-income"});h.createEl("span",{text:"Income"});let D=h.createEl("div",{cls:"balance_income-check"});(0,R.setIcon)(D,"download"),D.createEl("p",{text:String(U(l))}),Ln()},Ln=async()=>{let{contentEl:e}=I,{openPageNow:t}=F(),n=e.createEl("div",{cls:"main-nav"}),a=e.createEl("div",{cls:"main-content"}).createEl("div",{cls:"main-content-body"}),o=e.createEl("div",{cls:"main-content-button"}),r=n.createEl("a",{text:"History",cls:"home_button--active",attr:{id:"history-button",href:"#"}});r.addEventListener("click",async()=>{l.removeClass("home_button--active"),s.removeClass("home_button--active"),r.addClass("home_button--active"),a.empty(),o.empty(),await ee(a,o)});let l=n.createEl("a",{text:"Plan",attr:{id:"plan-button",href:"#"}});l.addEventListener("click",async()=>{r.removeClass("home_button--active"),s.removeClass("home_button--active"),l.addClass("home_button--active"),a.empty(),o.empty(),await ce(a,o)});let s=n.createEl("a",{text:"Bills",attr:{id:"bills-button",href:"#"}});s.addEventListener("click",async()=>{r.removeClass("home_button--active"),l.removeClass("home_button--active"),s.addClass("home_button--active"),a.empty(),o.empty(),await Re(a,o)}),!t||t==="History"||t===null?(await ee(a,o),r.addClass("home_button--active"),s.removeClass("home_button--active"),l.removeClass("home_button--active")):t==="Plans"?(await ce(a,o),r.removeClass("home_button--active"),l.addClass("home_button--active"),s.removeClass("home_button--active")):t==="Bills"?(await Re(a,o),r.removeClass("home_button--active"),l.removeClass("home_button--active"),s.addClass("home_button--active")):(await ee(a,o),r.addClass("home_button--active"),s.removeClass("home_button--active"),l.removeClass("home_button--active"))},hn=async()=>{let{contentEl:e}=I;e.empty();let{year:t}=Y(),n=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,R.setIcon)(n,"arrow-left"),n.addEventListener("click",()=>{var r;(r=I)==null||r.onOpen()}),e.createEl("div",{cls:"calendar-header"}).createEl("h1",{text:"Calendar"});let a=e.createEl("div",{cls:"calendar-main"}),o=["\u2603\uFE0F January","\u{1F328}\uFE0F February","\u{1F337} March","\u{1F331} April","\u2600\uFE0F May","\u{1F333} June","\u{1F3D6}\uFE0F July","\u{1F33E} August","\u{1F341} September","\u{1F342} October","\u2614 November","\u2744\uFE0F December"];for(let r=Number(t);r>=f.settings.startYear;r--){let l=a.createEl("div",{cls:"calendar-list-title"});l.createEl("span",{text:String(r)}),l.createEl("span",{text:await Xe(String(r))});let s=a.createEl("ul",{cls:"calendar-list",attr:{"data-year":r}});for(let m=o.length-1;m>=0;m--){let c=s.createEl("li",{attr:{"data-month":`${m+1}`,"data-year":`${r}`}});c.onclick=async u=>{await Hn(u)},c.createEl("p",{text:o[m]});let p=c.createEl("div",{cls:"story-month"});qe(G[m],String(r),p)}}},Hn=async e=>{var l,s,m,c,p;let{year:t,month:n}=Y(),i=((s=(l=e.target)==null?void 0:l.closest)==null?void 0:s.call(l,"[data-month]"))||e.target,a=Number((m=i==null?void 0:i.dataset)==null?void 0:m.month),o=String((c=i==null?void 0:i.dataset)==null?void 0:c.year);if(G[a-1]===n&&o===t)return(p=I)==null?void 0:p.onOpen();F({selectedMonth:G[a-1],selectedYear:o});let r=await Ye(a-1,o);r!=="success"&&new R.Notice(r),await He()},He=async()=>{if(!I||!f)return;let{selectedMonth:e}=F(),{jsonData:t,status:n}=await P("Expenditure plan");if(n!=="success"&&(new R.Notice(n),console.error(n)),t==null)throw new Error("expenditurePlanInfo is null or undefined");let{jsonData:i,status:a}=await P("Income plan");if(a!=="success"&&(new R.Notice(a),console.error(a)),i==null)throw new Error("incomePlanInfo is null or undefined");let{contentEl:o}=I;o.empty();let r=o.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,R.setIcon)(r,"arrow-left"),r.addEventListener("click",()=>{var g;F({selectedMonth:null,selectedYear:null}),(g=I)==null||g.onOpen()}),o.createEl("div",{cls:"finance-header"}).createEl("button",{text:`\u{1F5D3}\uFE0F ${e}`,attr:{id:"showAllMonths"}}).addEventListener("click",async()=>{o.dataset.page==="home"&&(o.setAttribute("data-page","months"),await hn())}),o.setAttribute("data-page","home");let m=o.createEl("div",{cls:"balance"});m.addClass("balance-other");let c=m.createEl("div",{cls:"balance-body"}),p=c.createEl("div",{cls:"balance_body-expenses"});p.createEl("span",{text:"Expense"});let u=p.createEl("div",{cls:"balance_expenses-check"});(0,R.setIcon)(u,"upload"),u.createEl("p",{text:String(H(t))});let d=c.createEl("div",{cls:"balance_body-income"});d.createEl("span",{text:"Income"});let y=d.createEl("div",{cls:"balance_income-check"});(0,R.setIcon)(y,"download"),y.createEl("p",{text:String(U(i))}),Kn()},Kn=async()=>{let{contentEl:e}=I,t=e.createEl("div",{cls:"main-nav"}),i=e.createEl("div",{cls:"main-content"}).createEl("div",{cls:"main-content-body"}),a=e.createEl("div",{cls:"main-content-button"}),o=t.createEl("a",{text:"History",cls:"home_button--active",attr:{id:"history-button",href:"#"}});o.addEventListener("click",async()=>{r.removeClass("home_button--active"),o.addClass("home_button--active"),i.empty(),a.empty(),await ee(i,a)});let r=t.createEl("a",{text:"Plan",attr:{id:"plan-button",href:"#"}});r.addEventListener("click",async()=>{o.removeClass("home_button--active"),r.addClass("home_button--active"),i.empty(),a.empty(),await ce(i,a)});let{openPageNow:l}=F();!l||l==="History"||l===null?(await ee(i,a),o.addClass("home_button--active"),r.removeClass("home_button--active")):l==="Plans"?(await ce(i,a),o.removeClass("home_button--active"),r.addClass("home_button--active")):(await ee(i,a),o.addClass("home_button--active"),r.removeClass("home_button--active"))};var ue="financial-accounting-view",f,I,je=class extends T.Plugin{async onload(){await this.loadSettings(),this.registerView(ue,n=>new Ke(n)),this.app.workspace.onLayoutReady(async()=>{this.addSettingTab(new Ge(this.app,this)),this.addRibbonIcon("badge-dollar-sign","Add operation",async()=>{await this.activateView()}),this.addCommand({id:"financial-accounting-view",name:"Open the finance panel",callback:()=>this.activateView()})}),f=this,console.log("Financial accounting plugin loaded")}async activateView(){let{workspace:n}=this.app,i=n.getLeavesOfType(ue)[0];i||(T.Platform.isDesktop?i=n.getRightLeaf(!1):i=n.getLeaf(!0),i&&await i.setViewState({type:ue,active:!0})),i&&n.revealLeaf(i)}async loadSettings(){let n=await this.loadData(),i=new Je;this.settings=Object.assign({},i,n||{})}async saveSettings(){await this.saveData(this.settings)}onunload(){this.app.workspace.detachLeavesOfType(ue)}},Ke=class extends T.ItemView{constructor(t){super(t)}getViewType(){return ue}getDisplayText(){return"Financial accounting view"}getIcon(){return"chart-pie"}async onOpen(){I=this;let{selectedYear:t,selectedMonth:n}=F();n===null&&t===null?await Le():await He()}async onClose(){}},Je=class{constructor(){this.targetFolder="Finances",this.startYear=2020,this.baseCurrency="USD",this.defaultTag="Finances"}},Ge=class extends T.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}display(){let{containerEl:n}=this;n.empty(),n.createEl("h1",{text:"Plugin settings"});let i=this.app.vault.getAllLoadedFiles().filter(u=>u instanceof T.TFolder).map(u=>u.path),a=this.plugin.settings.targetFolder||"Finances/",o=i.includes(a);new T.Setting(n).setName("Working directory").setDesc("Select the folder the plugin will work with.").addDropdown(u=>{for(let d of i)u.addOption(d,d);o||u.addOption(a,`${a} (does not exist)`),u.setValue(a),u.onChange(async d=>{this.plugin.settings.targetFolder=d,await this.plugin.saveSettings(),new T.Notice(`Folder selected: ${d}`)})}),new T.Setting(n).setName("Initial year of accounting").setDesc("Select the year from which financial accounting has been conducted").addDropdown(u=>{let d=new Date().getFullYear();for(let y=d-100;y<=d;y++)u.addOption(String(y),String(y));u.setValue(String(this.plugin.settings.startYear)),u.onChange(async y=>{this.plugin.settings.startYear=Number(y),await this.plugin.saveSettings(),new T.Notice(`The starting year has been changed to ${y}`)})});let l=new T.Setting(n).setName("Main currency").setDesc("Select the currency from which the conversion will be performed").settingEl.createEl("select",{cls:"currency-select"}),{popularCurrencies:s,otherCurrencies:m}=he(),c=document.createElement("optgroup");c.label="Popular",s.forEach(u=>{let d=document.createElement("option");d.value=u.code,d.textContent=`${u.code} \u2022 ${u.name} \u2022 ${u.symbol}`,c.appendChild(d)});let p=document.createElement("optgroup");p.label="All currencies",m.forEach(u=>{let d=document.createElement("option");d.value=u.code,d.textContent=`${u.code} ${u.name} \u2022 ${u.symbol}`,p.appendChild(d)}),l.appendChild(c),l.appendChild(p),l.value=this.plugin.settings.baseCurrency,l.addEventListener("change",async u=>{this.plugin.settings.baseCurrency=u.target.value,await this.plugin.saveSettings(),new T.Notice(`The main currency has been changed to ${u.target.value}`)}),new T.Setting(n).setName("Default tag for Obsidian").setDesc("Enter one word to use as a tag (no spaces).").addText(u=>{u.setPlaceholder("For example: Finances").setValue(this.plugin.settings.defaultTag||""),u.inputEl.addEventListener("keydown",async d=>{d.key==="Enter"&&(d.preventDefault(),u.inputEl.blur())}),u.inputEl.addEventListener("blur",async()=>{let d=u.getValue().trim();if(/\s/.test(d)){new T.Notice("Error: Tag must not contain spaces.");return}if(!/^[\w\---]+$/.test(d)){new T.Notice("The tag can only contain letters, numbers, underscores and hyphens.");return}this.plugin.settings.defaultTag=d,await this.plugin.saveSettings(),new T.Notice(`The tag "${d}" has been saved.`)})})}},Jn=()=>{let e={openPageNow:null,selectedYear:null,selectedMonth:null};return function(n){return n&&(e={...e,...n}),e}},F=Jn();
