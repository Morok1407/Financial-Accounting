/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Oe=Object.defineProperty;var bn=Object.getOwnPropertyDescriptor;var vn=Object.getOwnPropertyNames;var Dn=Object.prototype.hasOwnProperty;var En=(e,n)=>{for(var t in n)Oe(e,t,{get:n[t],enumerable:!0})},wn=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of vn(n))!Dn.call(e,a)&&a!==t&&Oe(e,a,{get:()=>n[a],enumerable:!(r=bn(n,a))||r.enumerable});return e};var Pn=e=>wn(Oe({},"__esModule",{value:!0}),e);var et={};En(et,{FinancialAccountingView:()=>w,default:()=>g,stateManager:()=>F});module.exports=Pn(et);var C=require("obsidian");var k=require("obsidian");var jn=20,Bn=1,Q=1e6,Ye=1e6,In=-7,On=21,xn=!1,se="[big.js] ",q=se+"Invalid ",pe=q+"decimal places",Tn=q+"rounding mode",ze=se+"Division by zero",O={},Y=void 0,Cn=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function _e(){function e(n){var t=this;if(!(t instanceof e))return n===Y&&arguments.length===0?_e():new e(n);if(n instanceof e)t.s=n.s,t.e=n.e,t.c=n.c.slice();else{if(typeof n!="string"){if(e.strict===!0&&typeof n!="bigint")throw TypeError(q+"value");n=n===0&&1/n<0?"-0":String(n)}Nn(t,n)}t.constructor=e}return e.prototype=O,e.DP=jn,e.RM=Bn,e.NE=In,e.PE=On,e.strict=xn,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function Nn(e,n){var t,r,a;if(!Cn.test(n))throw Error(q+"number");for(e.s=n.charAt(0)=="-"?(n=n.slice(1),-1):1,(t=n.indexOf("."))>-1&&(n=n.replace(".","")),(r=n.search(/e/i))>0?(t<0&&(t=r),t+=+n.slice(r+1),n=n.substring(0,r)):t<0&&(t=n.length),a=n.length,r=0;r<a&&n.charAt(r)=="0";)++r;if(r==a)e.c=[e.e=0];else{for(;a>0&&n.charAt(--a)=="0";);for(e.e=t-r-1,e.c=[],t=0;r<=a;)e.c[t++]=+n.charAt(r++)}return e}function X(e,n,t,r){var a=e.c;if(t===Y&&(t=e.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(Tn);if(n<1)r=t===3&&(r||!!a[0])||n===0&&(t===1&&a[0]>=5||t===2&&(a[0]>5||a[0]===5&&(r||a[1]!==Y))),a.length=1,r?(e.e=e.e-n+1,a[0]=1):a[0]=e.e=0;else if(n<a.length){if(r=t===1&&a[n]>=5||t===2&&(a[n]>5||a[n]===5&&(r||a[n+1]!==Y||a[n-1]&1))||t===3&&(r||!!a[0]),a.length=n,r){for(;++a[--n]>9;)if(a[n]=0,n===0){++e.e,a.unshift(1);break}}for(n=a.length;!a[--n];)a.pop()}return e}function ee(e,n,t){var r=e.e,a=e.c.join(""),o=a.length;if(n)a=a.charAt(0)+(o>1?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(r>0)if(++r>o)for(r-=o;r--;)a+="0";else r<o&&(a=a.slice(0,r)+"."+a.slice(r));else o>1&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&t?"-"+a:a}O.abs=function(){var e=new this.constructor(this);return e.s=1,e};O.cmp=function(e){var n,t=this,r=t.c,a=(e=new t.constructor(e)).c,o=t.s,s=e.s,i=t.e,c=e.e;if(!r[0]||!a[0])return r[0]?o:a[0]?-s:0;if(o!=s)return o;if(n=o<0,i!=c)return i>c^n?1:-1;for(s=(i=r.length)<(c=a.length)?i:c,o=-1;++o<s;)if(r[o]!=a[o])return r[o]>a[o]^n?1:-1;return i==c?0:i>c^n?1:-1};O.div=function(e){var n=this,t=n.constructor,r=n.c,a=(e=new t(e)).c,o=n.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>Q)throw Error(pe);if(!a[0])throw Error(ze);if(!r[0])return e.s=o,e.c=[e.e=0],e;var i,c,l,f,p,m=a.slice(),u=i=a.length,d=r.length,y=r.slice(0,i),h=y.length,b=e,j=b.c=[],v=0,S=s+(b.e=n.e-e.e)+1;for(b.s=o,o=S<0?0:S,m.unshift(0);h++<i;)y.push(0);do{for(l=0;l<10;l++){if(i!=(h=y.length))f=i>h?1:-1;else for(p=-1,f=0;++p<i;)if(a[p]!=y[p]){f=a[p]>y[p]?1:-1;break}if(f<0){for(c=h==i?a:m;h;){if(y[--h]<c[h]){for(p=h;p&&!y[--p];)y[p]=9;--y[p],y[h]+=10}y[h]-=c[h]}for(;!y[0];)y.shift()}else break}j[v++]=f?l:++l,y[0]&&f?y[h]=r[u]||0:y=[r[u]]}while((u++<d||y[0]!==Y)&&o--);return!j[0]&&v!=1&&(j.shift(),b.e--,S--),v>S&&X(b,S,t.RM,y[0]!==Y),b};O.eq=function(e){return this.cmp(e)===0};O.gt=function(e){return this.cmp(e)>0};O.gte=function(e){return this.cmp(e)>-1};O.lt=function(e){return this.cmp(e)<0};O.lte=function(e){return this.cmp(e)<1};O.minus=O.sub=function(e){var n,t,r,a,o=this,s=o.constructor,i=o.s,c=(e=new s(e)).s;if(i!=c)return e.s=-c,o.plus(e);var l=o.c.slice(),f=o.e,p=e.c,m=e.e;if(!l[0]||!p[0])return p[0]?e.s=-c:l[0]?e=new s(o):e.s=1,e;if(i=f-m){for((a=i<0)?(i=-i,r=l):(m=f,r=p),r.reverse(),c=i;c--;)r.push(0);r.reverse()}else for(t=((a=l.length<p.length)?l:p).length,i=c=0;c<t;c++)if(l[c]!=p[c]){a=l[c]<p[c];break}if(a&&(r=l,l=p,p=r,e.s=-e.s),(c=(t=p.length)-(n=l.length))>0)for(;c--;)l[n++]=0;for(c=n;t>i;){if(l[--t]<p[t]){for(n=t;n&&!l[--n];)l[n]=9;--l[n],l[t]+=10}l[t]-=p[t]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--m;return l[0]||(e.s=1,l=[m=0]),e.c=l,e.e=m,e};O.mod=function(e){var n,t=this,r=t.constructor,a=t.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(ze);return t.s=e.s=1,n=e.cmp(t)==1,t.s=a,e.s=o,n?new r(t):(a=r.DP,o=r.RM,r.DP=r.RM=0,t=t.div(e),r.DP=a,r.RM=o,this.minus(t.times(e)))};O.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};O.plus=O.add=function(e){var n,t,r,a=this,o=a.constructor;if(e=new o(e),a.s!=e.s)return e.s=-e.s,a.minus(e);var s=a.e,i=a.c,c=e.e,l=e.c;if(!i[0]||!l[0])return l[0]||(i[0]?e=new o(a):e.s=a.s),e;if(i=i.slice(),n=s-c){for(n>0?(c=s,r=l):(n=-n,r=i),r.reverse();n--;)r.push(0);r.reverse()}for(i.length-l.length<0&&(r=l,l=i,i=r),n=l.length,t=0;n;i[n]%=10)t=(i[--n]=i[n]+l[n]+t)/10|0;for(t&&(i.unshift(t),++c),n=i.length;i[--n]===0;)i.pop();return e.c=i,e.e=c,e};O.pow=function(e){var n=this,t=new n.constructor("1"),r=t,a=e<0;if(e!==~~e||e<-Ye||e>Ye)throw Error(q+"exponent");for(a&&(e=-e);e&1&&(r=r.times(n)),e>>=1,!!e;)n=n.times(n);return a?t.div(r):r};O.prec=function(e,n){if(e!==~~e||e<1||e>Q)throw Error(q+"precision");return X(new this.constructor(this),e,n)};O.round=function(e,n){if(e===Y)e=0;else if(e!==~~e||e<-Q||e>Q)throw Error(pe);return X(new this.constructor(this),e+this.e+1,n)};O.sqrt=function(){var e,n,t,r=this,a=r.constructor,o=r.s,s=r.e,i=new a("0.5");if(!r.c[0])return new a(r);if(o<0)throw Error(se+"No square root");o=Math.sqrt(+ee(r,!0,!0)),o===0||o===1/0?(n=r.c.join(""),n.length+s&1||(n+="0"),o=Math.sqrt(n),s=((s+1)/2|0)-(s<0||s&1),e=new a((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new a(o+""),s=e.e+(a.DP+=4);do t=e,e=i.times(t.plus(r.div(t)));while(t.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return X(e,(a.DP-=4)+e.e+1,a.RM)};O.times=O.mul=function(e){var n,t=this,r=t.constructor,a=t.c,o=(e=new r(e)).c,s=a.length,i=o.length,c=t.e,l=e.e;if(e.s=t.s==e.s?1:-1,!a[0]||!o[0])return e.c=[e.e=0],e;for(e.e=c+l,s<i&&(n=a,a=o,o=n,l=s,s=i,i=l),n=new Array(l=s+i);l--;)n[l]=0;for(c=i;c--;){for(i=0,l=s+c;l>c;)i=n[l]+o[c]*a[l-c-1]+i,n[l--]=i%10,i=i/10|0;n[l]=i}for(i?++e.e:n.shift(),c=n.length;!n[--c];)n.pop();return e.c=n,e};O.toExponential=function(e,n){var t=this,r=t.c[0];if(e!==Y){if(e!==~~e||e<0||e>Q)throw Error(pe);for(t=X(new t.constructor(t),++e,n);t.c.length<e;)t.c.push(0)}return ee(t,!0,!!r)};O.toFixed=function(e,n){var t=this,r=t.c[0];if(e!==Y){if(e!==~~e||e<0||e>Q)throw Error(pe);for(t=X(new t.constructor(t),e+t.e+1,n),e=e+t.e+1;t.c.length<e;)t.c.push(0)}return ee(t,!1,!!r)};O.toJSON=O.toString=function(){var e=this,n=e.constructor;return ee(e,e.e<=n.NE||e.e>=n.PE,!!e.c[0])};typeof Symbol!="undefined"&&(O[Symbol.for("nodejs.util.inspect.custom")]=O.toJSON);O.toNumber=function(){var e=+ee(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(se+"Imprecise conversion");return e};O.toPrecision=function(e,n){var t=this,r=t.constructor,a=t.c[0];if(e!==Y){if(e!==~~e||e<1||e>Q)throw Error(q+"precision");for(t=X(new r(t),e,n);t.c.length<e;)t.c.push(0)}return ee(t,e<=t.e||t.e<=r.NE||t.e>=r.PE,!!a)};O.valueOf=function(){var e=this,n=e.constructor;if(n.strict===!0)throw Error(se+"valueOf disallowed");return ee(e,e.e<=n.NE||e.e>=n.PE,!0)};var $n=_e(),E=$n;var xe={AED:{name:"United Arab Emirates Dirham",demonym:"UAE",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:784,symbol:"\u062F.\u0625.",symbolNative:"\u062F.\u0625.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},AFN:{name:"Afghan Afghani",demonym:"Afghan",majorSingle:"Afghani",majorPlural:"Afghani",ISOnum:971,symbol:"Af",symbolNative:"\u060B",minorSingle:"Pul",minorPlural:"Pul",ISOdigits:2,decimals:2,numToBasic:100},ALL:{name:"Albanian Lek",demonym:"Albanian",majorSingle:"Lek",majorPlural:"Lek\xEB",ISOnum:8,symbol:"L",symbolNative:"L",minorSingle:"Qindarka",minorPlural:"Qindarka",ISOdigits:2,decimals:2,numToBasic:100},AMD:{name:"Armenian Dram",demonym:"Armenian",majorSingle:"Dram",majorPlural:"Dram",ISOnum:51,symbol:"\u058F",symbolNative:"\u0564\u0580",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100},ANG:{name:"Netherlands Antillean Guilder",demonym:"Netherlands Antillean",majorSingle:"Guilder",majorPlural:"Guilders",ISOnum:532,symbol:"\u0192",symbolNative:"\u0192",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AOA:{name:"Angolan Kwanza",demonym:"Angolan",majorSingle:"Kwanza",majorPlural:"Kwanza",ISOnum:973,symbol:"Kz",symbolNative:"Kz",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},ARS:{name:"Argentine Peso",demonym:"Argentine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:32,symbol:"AR$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},AUD:{name:"Australian Dollar",demonym:"Australian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:36,symbol:"AU$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AWG:{name:"Aruban Florin",demonym:"Aruban",majorSingle:"Florin",majorPlural:"Florin",ISOnum:533,symbol:"\u0192",symbolNative:"\u0192",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AZN:{name:"Azerbaijani Manat",demonym:"Azerbaijani",majorSingle:"Manat",majorPlural:"Manat",ISOnum:944,symbol:"\u043C\u0430\u043D",symbolNative:"\u20BC",minorSingle:"Qapik",minorPlural:"Qapik",ISOdigits:2,decimals:2,numToBasic:100},BAM:{name:"Bosnia and Herzegovina Convertible Mark",demonym:"Bosnia-Herzegovina",majorSingle:"Convertible Mark",majorPlural:"Marks",ISOnum:977,symbol:"KM",symbolNative:"\u041A\u041C",minorSingle:"Fening",minorPlural:"Fening",ISOdigits:2,decimals:2,numToBasic:100},BBD:{name:"Barbadian Dollar",demonym:"Barbadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:52,symbol:"BBD$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BDT:{name:"Bangladeshi Taka",demonym:"Bangladeshi",majorSingle:"Taka",majorPlural:"Taka",ISOnum:50,symbol:"\u09F3",symbolNative:"\u09F3",minorSingle:"Poisha",minorPlural:"Poisha",ISOdigits:2,decimals:2,numToBasic:100},BGN:{name:"Bulgarian Lev",demonym:"Bulgarian",majorSingle:"Lev",majorPlural:"Leva",ISOnum:975,symbol:"\u043B\u0432.",symbolNative:"\u043B\u0432.",minorSingle:"Stotinka",minorPlural:"Stotinki",ISOdigits:2,decimals:2,numToBasic:100},BHD:{name:"Bahraini Dinar",demonym:"Bahraini",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:48,symbol:"BD",symbolNative:"\u062F.\u0628.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},BIF:{name:"Burundian Franc",demonym:"Burundian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:108,symbol:"FBu",symbolNative:"FBu",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},BMD:{name:"Bermudian Dollar",demonym:"Bermudian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:60,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BND:{name:"Brunei Dollar",demonym:"Brunei",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:96,symbol:"B$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BOB:{name:"Bolivian Boliviano",demonym:"Bolivian",majorSingle:"Boliviano",majorPlural:"Bolivianos",ISOnum:68,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BRL:{name:"Brazilian Real",demonym:"Brazilian",majorSingle:"Real",majorPlural:"Reais",ISOnum:986,symbol:"R$",symbolNative:"R$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BSD:{name:"Bahamian Dollar",demonym:"Bahamian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:44,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BTN:{name:"Bhutanese Ngultrum",demonym:"Bhutanese",majorSingle:"Ngultrum",majorPlural:"Ngultrums",ISOnum:64,symbol:"Nu.",symbolNative:"Nu.",minorSingle:"Chetrum",minorPlural:"Chetrums",ISOdigits:2,decimals:2,numToBasic:100},BWP:{name:"Botswana Pula",demonym:"Botswana",majorSingle:"Pula",majorPlural:"Pula",ISOnum:72,symbol:"P",symbolNative:"P",minorSingle:"Thebe",minorPlural:"Thebe",ISOdigits:2,decimals:2,numToBasic:100},BYN:{name:"Belarusian Ruble",demonym:"Belarusian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:933,symbol:"Br",symbolNative:"\u0440\u0443\u0431.",minorSingle:"Kapiejka",minorPlural:"Kapiejka",ISOdigits:2,decimals:2,numToBasic:100},BZD:{name:"Belize Dollar",demonym:"Belize",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:84,symbol:"BZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CAD:{name:"Canadian Dollar",demonym:"Canadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:124,symbol:"CA$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CDF:{name:"Congolese Franc",demonym:"Congolese",majorSingle:"Franc",majorPlural:"Francs",ISOnum:976,symbol:"FC",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CHF:{name:"Swiss Franc",demonym:"Swiss",majorSingle:"Franc",majorPlural:"Francs",ISOnum:756,symbol:"Fr.",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CKD:{name:"Cook Islands Dollar",demonym:"Cook Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CLP:{name:"Chilean Peso",demonym:"Chilean",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:152,symbol:"CL$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:0,decimals:0,numToBasic:100},CNY:{name:"Chinese Yuan",demonym:"Chinese",majorSingle:"Yuan",majorPlural:"Yuan",ISOnum:156,symbol:"CN\xA5",symbolNative:"\xA5\u5143",minorSingle:"Fen",minorPlural:"Fen",ISOdigits:2,decimals:2,numToBasic:100},COP:{name:"Colombian Peso",demonym:"Colombian",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:170,symbol:"CO$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CRC:{name:"Costa Rican Colon",demonym:"Costa Rican",majorSingle:"Col\xF3n",majorPlural:"Colones",ISOnum:188,symbol:"\u20A1",symbolNative:"\u20A1",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},CUC:{name:"Cuban convertible Peso",demonym:"Cuban Convertible",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:931,symbol:"CUC$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CUP:{name:"Cuban Peso",demonym:"Cuban",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:192,symbol:"$MN",symbolNative:"\u20B1",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CVE:{name:"Cabo Verdean Escudo",demonym:"Cabo Verdean",majorSingle:"Escudo",majorPlural:"Escudo",ISOnum:132,symbol:"CV$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CZK:{name:"Czech Koruna",demonym:"Czech",majorSingle:"Koruna",majorPlural:"Koruny",ISOnum:203,symbol:"K\u010D",symbolNative:"K\u010D",minorSingle:"Hal\xE9\u0159",minorPlural:"Hal\xE9\u0159",ISOdigits:2,decimals:2,numToBasic:100},DJF:{name:"Djiboutian Franc",demonym:"Djiboutian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:262,symbol:"Fdj",symbolNative:"\u0641.\u062C.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},DKK:{name:"Danish Krone",demonym:"Danish",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:208,symbol:"kr.",symbolNative:"kr.",minorSingle:"\xD8re",minorPlural:"\xD8re",ISOdigits:2,decimals:2,numToBasic:100},DOP:{name:"Dominican Peso",demonym:"Dominican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:214,symbol:"RD$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},DZD:{name:"Algerian Dinar",demonym:"Algerian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:12,symbol:"DA",symbolNative:"\u062F.\u062C.",minorSingle:"Santeem",minorPlural:"Santeems",ISOdigits:2,decimals:2,numToBasic:100},EGP:{name:"Egyptian Pound",demonym:"Egyptian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:818,symbol:"E\xA3",symbolNative:"\u062C.\u0645.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},EHP:{name:"Sahrawi Peseta",demonym:"Sahrawi",majorSingle:"Peseta",majorPlural:"Pesetas",ISOnum:null,symbol:"Ptas.",symbolNative:"Ptas.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},ERN:{name:"Eritrean Nakfa",demonym:"Eritrean",majorSingle:"Nakfa",majorPlural:"Nakfa",ISOnum:232,symbol:"Nkf",symbolNative:"\u0646\u0627\u0643\u0641\u0627",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ETB:{name:"Ethiopian Birr",demonym:"Ethiopian",majorSingle:"Birr",majorPlural:"Birr",ISOnum:230,symbol:"Br",symbolNative:"\u1265\u122D",minorSingle:"Santim",minorPlural:"Santim",ISOdigits:2,decimals:2,numToBasic:100},EUR:{name:"Euro",demonym:"",majorSingle:"Euro",majorPlural:"Euros",ISOnum:978,symbol:"\u20AC",symbolNative:"\u20AC",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FJD:{name:"Fijian Dollar",demonym:"Fijian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:242,symbol:"FJ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FKP:{name:"Falkland Islands Pound",demonym:"Falkland Islands",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:238,symbol:"FK\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},FOK:{name:"Faroese Kr\xF3na",demonym:"Faroese",majorSingle:"Kr\xF3na",majorPlural:"Kr\xF3nas",ISOnum:null,symbol:"kr",symbolNative:"kr",minorSingle:"Oyra",minorPlural:"Oyra",ISOdigits:2,decimals:2,numToBasic:100},GBP:{name:"Pound Sterling",demonym:"Pound Sterling",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:826,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GEL:{name:"Georgian Lari",demonym:"Georgian",majorSingle:"Lari",majorPlural:"Lari",ISOnum:981,symbol:"\u20BE",symbolNative:"\u20BE",minorSingle:"Tetri",minorPlural:"Tetri",ISOdigits:2,decimals:2,numToBasic:100},GGP:{name:"Guernsey Pound",demonym:"Guernsey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GHS:{name:"Ghanaian Cedi",demonym:"Ghanaian",majorSingle:"Cedi",majorPlural:"Cedis",ISOnum:936,symbol:"GH\u20B5",symbolNative:"\u20B5",minorSingle:"Pesewa",minorPlural:"Pesewas",ISOdigits:2,decimals:2,numToBasic:100},GIP:{name:"Gibraltar Pound",demonym:"Gibraltar",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:292,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GMD:{name:"Gambian Dalasi",demonym:"Gambian",majorSingle:"Dalasi",majorPlural:"Dalasis",ISOnum:270,symbol:"D",symbolNative:"D",minorSingle:"Butut",minorPlural:"Bututs",ISOdigits:2,decimals:2,numToBasic:100},GNF:{name:"Guinean Franc",demonym:"Guinean",majorSingle:"Franc",majorPlural:"Francs",ISOnum:324,symbol:"FG",symbolNative:"FG",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},GTQ:{name:"Guatemalan Quetzal",demonym:"Guatemalan",majorSingle:"Quetzal",majorPlural:"Quetzales",ISOnum:320,symbol:"Q",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},GYD:{name:"Guyanese Dollar",demonym:"Guyanese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:328,symbol:"G$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HKD:{name:"Hong Kong Dollar",demonym:"Hong Kong",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:344,symbol:"HK$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HNL:{name:"Honduran Lempira",demonym:"Honduran",majorSingle:"Lempira",majorPlural:"Lempiras",ISOnum:340,symbol:"L",symbolNative:"L",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},HRK:{name:"Croatian Kuna",demonym:"Croatian",majorSingle:"Kuna",majorPlural:"Kuna",ISOnum:191,symbol:"kn",symbolNative:"kn",minorSingle:"Lipa",minorPlural:"Lipa",ISOdigits:2,decimals:2,numToBasic:100},HTG:{name:"Haitian Gourde",demonym:"Haitian",majorSingle:"Gourde",majorPlural:"Gourdes",ISOnum:332,symbol:"G",symbolNative:"G",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},HUF:{name:"Hungarian Forint",demonym:"Hungarian",majorSingle:"Forint",majorPlural:"Forint",ISOnum:348,symbol:"Ft",symbolNative:"Ft",minorSingle:"fill\xE9r",minorPlural:"fill\xE9r",ISOdigits:2,decimals:2,numToBasic:100},IDR:{name:"Indonesian Rupiah",demonym:"Indonesian",majorSingle:"Rupiah",majorPlural:"Rupiah",ISOnum:360,symbol:"Rp",symbolNative:"Rp",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},ILS:{name:"Israeli new Shekel",demonym:"Israeli",majorSingle:"Shekel",majorPlural:"Shekels",ISOnum:376,symbol:"\u20AA",symbolNative:"\u20AA",minorSingle:"Agora",minorPlural:"Agoras",ISOdigits:2,decimals:2,numToBasic:100},IMP:{name:"Manx Pound",demonym:"Manx",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},INR:{name:"Indian Rupee",demonym:"Indian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:356,symbol:"Rs.",symbolNative:"\u20B9",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},IQD:{name:"Iraqi Dinar",demonym:"Iraqi",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:368,symbol:"\u062F.\u0639.",symbolNative:"\u062F.\u0639.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},IRR:{name:"Iranian Rial",demonym:"Iranian",majorSingle:"Rial",majorPlural:"Rials",ISOnum:364,symbol:"\uFDFC",symbolNative:"\uFDFC",minorSingle:"Dinar",minorPlural:"Dinars",ISOdigits:2,decimals:2,numToBasic:100},ISK:{name:"Icelandic Krona",demonym:"Icelandic",majorSingle:"Krona",majorPlural:"Kr\xF3nur",ISOnum:352,symbol:"kr",symbolNative:"kr",minorSingle:"Aurar",minorPlural:"Aurar",ISOdigits:0,decimals:2,numToBasic:100},JEP:{name:"Jersey Pound",demonym:"Jersey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},JMD:{name:"Jamaican Dollar",demonym:"Jamaican",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:388,symbol:"J$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},JOD:{name:"Jordanian Dinar",demonym:"Jordanian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:400,symbol:"JD",symbolNative:"\u062F.\u0623.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},JPY:{name:"Japanese Yen",demonym:"Japanese",majorSingle:"Yen",majorPlural:"Yen",ISOnum:392,symbol:"\xA5",symbolNative:"\xA5",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:0,decimals:2,numToBasic:100},KES:{name:"Kenyan Shilling",demonym:"Kenyan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:404,symbol:"KSh",symbolNative:"KSh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KGS:{name:"Kyrgyzstani Som",demonym:"Kyrgyzstani",majorSingle:"Som",majorPlural:"Som",ISOnum:417,symbol:"\u0441",symbolNative:"\u0441",minorSingle:"Tyiyn",minorPlural:"Tyiyn",ISOdigits:2,decimals:2,numToBasic:100},KHR:{name:"Cambodian Riel",demonym:"Cambodian",majorSingle:"Riel",majorPlural:"Riels",ISOnum:116,symbol:"\u17DB",symbolNative:"\u17DB",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},KID:{name:"Kiribati Dollar",demonym:"Kiribati",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KMF:{name:"Comorian Franc",demonym:"Comorian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:174,symbol:"CF",symbolNative:"CF",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},KPW:{name:"North Korean Won",demonym:"North Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:408,symbol:"\u20A9",symbolNative:"\u20A9",minorSingle:"Chon",minorPlural:"Chon",ISOdigits:2,decimals:2,numToBasic:100},KRW:{name:"South Korean Won",demonym:"South Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:410,symbol:"\u20A9",symbolNative:"\u20A9",minorSingle:"Jeon",minorPlural:"Jeon",ISOdigits:0,decimals:2,numToBasic:100},KWD:{name:"Kuwaiti Dinar",demonym:"Kuwaiti",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:414,symbol:"KD",symbolNative:"\u062F.\u0643.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},KYD:{name:"Cayman Islands Dollar",demonym:"Cayman Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:136,symbol:"CI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KZT:{name:"Kazakhstani Tenge",demonym:"Kazakhstani",majorSingle:"Tenge",majorPlural:"Tenge",ISOnum:398,symbol:"\u20B8",symbolNative:"\u20B8",minorSingle:"T\u0131yn",minorPlural:"T\u0131yn",ISOdigits:2,decimals:2,numToBasic:100},LAK:{name:"Lao Kip",demonym:"Lao",majorSingle:"Kip",majorPlural:"Kip",ISOnum:418,symbol:"\u20ADN",symbolNative:"\u20AD",minorSingle:"Att",minorPlural:"Att",ISOdigits:2,decimals:2,numToBasic:100},LBP:{name:"Lebanese Pound",demonym:"Lebanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:422,symbol:"LL.",symbolNative:"\u0644.\u0644.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},LKR:{name:"Sri Lankan Rupee",demonym:"Sri Lankan",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:144,symbol:"Rs.",symbolNative:"\u0DBB\u0DD4 or \u0BB0\u0BC2",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LRD:{name:"Liberian Dollar",demonym:"Liberian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:430,symbol:"L$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LSL:{name:"Lesotho Loti",demonym:"Lesotho",majorSingle:"Loti",majorPlural:"maLoti",ISOnum:426,symbol:"L",symbolNative:"L",minorSingle:"Sente",minorPlural:"Lisente",ISOdigits:2,decimals:2,numToBasic:100},LYD:{name:"Libyan Dinar",demonym:"Libyan",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:434,symbol:"LD",symbolNative:"\u0644.\u062F.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:3,decimals:3,numToBasic:1e3},MAD:{name:"Moroccan Dirham",demonym:"Moroccan",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:504,symbol:"DH",symbolNative:"\u062F.\u0645.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},MDL:{name:"Moldovan Leu",demonym:"Moldovan",majorSingle:"Leu",majorPlural:"Lei",ISOnum:498,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},MGA:{name:"Malagasy Ariary",demonym:"Malagasy",majorSingle:"Ariary",majorPlural:"Ariary",ISOnum:969,symbol:"Ar",symbolNative:"Ar",minorSingle:"Iraimbilanja",minorPlural:"Iraimbilanja",ISOdigits:2,decimals:0,numToBasic:5},MKD:{name:"Macedonian Denar",demonym:"Macedonian",majorSingle:"Denar",majorPlural:"Denars",ISOnum:807,symbol:"den",symbolNative:"\u0434\u0435\u043D",minorSingle:"Deni",minorPlural:"Deni",ISOdigits:2,decimals:2,numToBasic:100},MMK:{name:"Myanmar Kyat",demonym:"Myanmar",majorSingle:"Kyat",majorPlural:"Kyat",ISOnum:104,symbol:"Ks",symbolNative:"Ks",minorSingle:"Pya",minorPlural:"Pya",ISOdigits:2,decimals:2,numToBasic:100},MNT:{name:"Mongolian T\xF6gr\xF6g",demonym:"Mongolian",majorSingle:"T\xF6gr\xF6g",majorPlural:"T\xF6gr\xF6g",ISOnum:496,symbol:"\u20AE",symbolNative:"\u20AE",minorSingle:"m\xF6ng\xF6",minorPlural:"m\xF6ng\xF6",ISOdigits:2,decimals:2,numToBasic:100},MOP:{name:"Macanese Pataca",demonym:"Macanese",majorSingle:"Pataca",majorPlural:"Patacas",ISOnum:446,symbol:"MOP$",symbolNative:"MOP$",minorSingle:"Avo",minorPlural:"Avos",ISOdigits:2,decimals:2,numToBasic:100},MRU:{name:"Mauritanian Ouguiya",demonym:"Mauritanian",majorSingle:"Ouguiya",majorPlural:"Ouguiya",ISOnum:929,symbol:"UM",symbolNative:"\u0623.\u0645.",minorSingle:"Khoums",minorPlural:"Khoums",ISOdigits:2,decimals:0,numToBasic:5},MUR:{name:"Mauritian Rupee",demonym:"Mauritian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:480,symbol:"Rs.",symbolNative:"\u0930\u0941 ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},MVR:{name:"Maldivian Rufiyaa",demonym:"Maldivian",majorSingle:"Rufiyaa",majorPlural:"Rufiyaa",ISOnum:462,symbol:"MRf",symbolNative:".\u0783",minorSingle:"laari",minorPlural:"laari",ISOdigits:2,decimals:2,numToBasic:100},MWK:{name:"Malawian Kwacha",demonym:"Malawian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:454,symbol:"MK",symbolNative:"MK",minorSingle:"Tambala",minorPlural:"Tambala",ISOdigits:2,decimals:2,numToBasic:100},MXN:{name:"Mexican Peso",demonym:"Mexican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:484,symbol:"MX$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},MYR:{name:"Malaysian Ringgit",demonym:"Malaysian",majorSingle:"Ringgit",majorPlural:"Ringgit",ISOnum:458,symbol:"RM",symbolNative:"RM",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},MZN:{name:"Mozambican Metical",demonym:"Mozambican",majorSingle:"Metical",majorPlural:"Meticais",ISOnum:943,symbol:"MTn",symbolNative:"MT",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NAD:{name:"Namibian Dollar",demonym:"Namibian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:516,symbol:"N$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},NGN:{name:"Nigerian Naira",demonym:"Nigerian",majorSingle:"Naira",majorPlural:"Naira",ISOnum:566,symbol:"\u20A6",symbolNative:"\u20A6",minorSingle:"Kobo",minorPlural:"Kobo",ISOdigits:2,decimals:2,numToBasic:100},NIO:{name:"Nicaraguan C\xF3rdoba",demonym:"Nicaraguan",majorSingle:"C\xF3rdoba Oro",majorPlural:"C\xF3rdoba Oro",ISOnum:558,symbol:"C$",symbolNative:"C$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NOK:{name:"Norwegian Krone",demonym:"Norwegian",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:578,symbol:"kr",symbolNative:"kr",minorSingle:"\xF8re",minorPlural:"\xF8re",ISOdigits:2,decimals:2,numToBasic:100},NPR:{name:"Nepalese Rupee",demonym:"Nepalese",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:524,symbol:"Rs.",symbolNative:"\u0930\u0942",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},NZD:{name:"New Zealand Dollar",demonym:"New Zealand",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:554,symbol:"NZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},OMR:{name:"Omani Rial",demonym:"Omani",majorSingle:"Rial",majorPlural:"Rials",ISOnum:512,symbol:"OR",symbolNative:"\u0631.\u0639.",minorSingle:"Baisa",minorPlural:"Baisa",ISOdigits:3,decimals:3,numToBasic:1e3},PAB:{name:"Panamanian Balboa",demonym:"Panamanian",majorSingle:"Balboa",majorPlural:"Balboa",ISOnum:590,symbol:"B/.",symbolNative:"B/.",minorSingle:"Cent\xE9simo",minorPlural:"Cent\xE9simos",ISOdigits:2,decimals:2,numToBasic:100},PEN:{name:"Peruvian Sol",demonym:"Peruvian",majorSingle:"Sol",majorPlural:"Soles",ISOnum:604,symbol:"S/.",symbolNative:"S/.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},PGK:{name:"Papua New Guinean Kina",demonym:"Papua New Guinean",majorSingle:"Kina",majorPlural:"Kina",ISOnum:598,symbol:"K",symbolNative:"K",minorSingle:"Toea",minorPlural:"Toea",ISOdigits:2,decimals:2,numToBasic:100},PHP:{name:"Philippine Peso",demonym:"Philippine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:608,symbol:"\u20B1",symbolNative:"\u20B1",minorSingle:"Sentimo",minorPlural:"Sentimo",ISOdigits:2,decimals:2,numToBasic:100},PKR:{name:"Pakistani Rupee",demonym:"Pakistani",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:586,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},PLN:{name:"Polish Zloty",demonym:"Polish",majorSingle:"Zloty",majorPlural:"Zlotys",ISOnum:985,symbol:"z\u0142",symbolNative:"z\u0142",minorSingle:"Grosz",minorPlural:"Groszy",ISOdigits:2,decimals:2,numToBasic:100},PND:{name:"Pitcairn Islands Dollar",demonym:"Pitcairn Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},PRB:{name:"Transnistrian Ruble",demonym:"Transnistrian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:null,symbol:"\u0440.",symbolNative:"\u0440.",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},PYG:{name:"Paraguayan Guaran\xED",demonym:"Paraguayan",majorSingle:"Guaran\xED",majorPlural:"Guaran\xEDes",ISOnum:600,symbol:"\u20B2",symbolNative:"\u20B2",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:0,decimals:2,numToBasic:100},QAR:{name:"Qatari Riyal",demonym:"Qatari",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:634,symbol:"QR",symbolNative:"\u0631.\u0642.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:2,decimals:2,numToBasic:100},RON:{name:"Romanian Leu",demonym:"Romanian",majorSingle:"Leu",majorPlural:"Lei",ISOnum:946,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},RSD:{name:"Serbian Dinar",demonym:"Serbian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:941,symbol:"din",symbolNative:"\u0434\u0438\u043D",minorSingle:"Para",minorPlural:"Para",ISOdigits:2,decimals:2,numToBasic:100},RUB:{name:"Russian Ruble",demonym:"Russian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:643,symbol:"\u20BD",symbolNative:"\u20BD",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},RWF:{name:"Rwandan Franc",demonym:"Rwandan",majorSingle:"Franc",majorPlural:"Francs",ISOnum:646,symbol:"FRw",symbolNative:"R\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},SAR:{name:"Saudi Riyal",demonym:"Saudi",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:682,symbol:"SR",symbolNative:"\u0631.\u0633.",minorSingle:"Halalah",minorPlural:"Halalahs",ISOdigits:2,decimals:2,numToBasic:100},SBD:{name:"Solomon Islands Dollar",demonym:"Solomon Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:90,symbol:"SI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SCR:{name:"Seychellois Rupee",demonym:"Seychellois",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:690,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SDG:{name:"Sudanese Pound",demonym:"Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:938,symbol:"\xA3SD",symbolNative:"\u062C.\u0633.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SEK:{name:"Swedish Krona",demonym:"Swedish",majorSingle:"Krona",majorPlural:"Kronor",ISOnum:752,symbol:"kr",symbolNative:"kr",minorSingle:"\xD6re",minorPlural:"\xD6re",ISOdigits:2,decimals:2,numToBasic:100},SGD:{name:"Singapore Dollar",demonym:"Singapore",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:702,symbol:"S$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SHP:{name:"Saint Helena Pound",demonym:"Saint Helena",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:654,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},SLL:{name:"Sierra Leonean Leone",demonym:"Sierra Leonean",majorSingle:"Leone",majorPlural:"Leones",ISOnum:694,symbol:"Le",symbolNative:"Le",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SLS:{name:"Somaliland Shilling",demonym:"Somaliland",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:null,symbol:"Sl",symbolNative:"Sl",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SOS:{name:"Somali Shilling",demonym:"Somali",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:706,symbol:"Sh.So.",symbolNative:"Ssh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},SRD:{name:"Surinamese Dollar",demonym:"Surinamese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:968,symbol:"Sr$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SSP:{name:"South Sudanese Pound",demonym:"South Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:728,symbol:"SS\xA3",symbolNative:"SS\xA3",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},STN:{name:"Sao Tome and Pr\xEDncipe Dobra",demonym:"Sao Tome",majorSingle:"Dobra",majorPlural:"Dobras",ISOnum:930,symbol:"Db",symbolNative:"Db",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},SVC:{name:"Salvadoran Col\xF3n",demonym:"Salvadoran",majorSingle:"Col\xF3n",majorPlural:"Colones",ISOnum:222,symbol:"\u20A1",symbolNative:"\u20A1",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},SYP:{name:"Syrian Pound",demonym:"Syrian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:760,symbol:"LS",symbolNative:"\u0644.\u0633.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SZL:{name:"Swazi Lilangeni",demonym:"Swazi",majorSingle:"Lilangeni",majorPlural:"Emalangeni",ISOnum:748,symbol:"L",symbolNative:"L",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},THB:{name:"Thai Baht",demonym:"Thai",majorSingle:"Baht",majorPlural:"Baht",ISOnum:764,symbol:"\u0E3F",symbolNative:"\u0E3F",minorSingle:"Satang",minorPlural:"Satang",ISOdigits:2,decimals:2,numToBasic:100},TJS:{name:"Tajikistani Somoni",demonym:"Tajikistani",majorSingle:"Somoni",majorPlural:"Somoni",ISOnum:972,symbol:"SM",symbolNative:"SM",minorSingle:"Diram",minorPlural:"Diram",ISOdigits:2,decimals:2,numToBasic:100},TMT:{name:"Turkmenistan Manat",demonym:"Turkmenistan",majorSingle:"Manat",majorPlural:"Manat",ISOnum:934,symbol:"m.",symbolNative:"T",minorSingle:"Tenge",minorPlural:"Tenge",ISOdigits:2,decimals:2,numToBasic:100},TND:{name:"Tunisian Dinar",demonym:"Tunisian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:788,symbol:"DT",symbolNative:"\u062F.\u062A.",minorSingle:"Millime",minorPlural:"Millime",ISOdigits:3,decimals:3,numToBasic:1e3},TOP:{name:"Tongan Pa\u02BBanga",demonym:"Tongan",majorSingle:"Pa'anga",majorPlural:"Pa'anga",ISOnum:776,symbol:"T$",symbolNative:"PT",minorSingle:"Seniti",minorPlural:"Seniti",ISOdigits:2,decimals:2,numToBasic:100},TRY:{name:"Turkish Lira",demonym:"Turkish",majorSingle:"Lira",majorPlural:"Lira",ISOnum:949,symbol:"TL",symbolNative:"\u20BA",minorSingle:"Kuru\u015F",minorPlural:"Kuru\u015F",ISOdigits:2,decimals:2,numToBasic:100},TTD:{name:"Trinidad and Tobago Dollar",demonym:"Trinidad and Tobago",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:780,symbol:"TT$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TVD:{name:"Tuvaluan Dollar",demonym:"Tuvaluan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TWD:{name:"New Taiwan Dollar",demonym:"New Taiwan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:901,symbol:"NT$",symbolNative:"\u5713",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TZS:{name:"Tanzanian Shilling",demonym:"Tanzanian",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:834,symbol:"TSh",symbolNative:"TSh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},UAH:{name:"Ukrainian Hryvnia",demonym:"Ukrainian",majorSingle:"Hryvnia",majorPlural:"Hryvnias",ISOnum:980,symbol:"\u20B4",symbolNative:"\u0433\u0440\u043D",minorSingle:"Kopiyka",minorPlural:"kopiyky",ISOdigits:2,decimals:2,numToBasic:100},UGX:{name:"Ugandan Shilling",demonym:"Ugandan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:800,symbol:"USh",symbolNative:"Sh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:0,decimals:2,numToBasic:100},USD:{name:"United States Dollar",demonym:"US",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:840,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},UYU:{name:"Uruguayan Peso",demonym:"Uruguayan",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:858,symbol:"$U",symbolNative:"$",minorSingle:"Cent\xE9simo",minorPlural:"Cent\xE9simos",ISOdigits:2,decimals:2,numToBasic:100},UZS:{name:"Uzbekistani Som",demonym:"Uzbekistani",majorSingle:"Som",majorPlural:"Som",ISOnum:860,symbol:"\u0441\u0443\u043C",symbolNative:"\u0441\u0443\u043C",minorSingle:"Tiyin",minorPlural:"Tiyin",ISOdigits:2,decimals:2,numToBasic:100},VED:{name:"Venezuelan bol\xEDvar digital",demonym:"Venezuelan",majorSingle:"Bol\xEDvar Digital",majorPlural:"Bol\xEDvars Digital",ISOnum:null,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},VES:{name:"Venezuelan Bol\xEDvar Soberano",demonym:"Venezuelan",majorSingle:"Bol\xEDvar",majorPlural:"Bol\xEDvares",ISOnum:928,symbol:"Bs.F",symbolNative:"Bs.F",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},VND:{name:"Vietnamese Dong",demonym:"Vietnamese",majorSingle:"Dong",majorPlural:"Dong",ISOnum:704,symbol:"\u20AB",symbolNative:"\u20AB",minorSingle:"H\xE0o",minorPlural:"H\xE0o",ISOdigits:0,decimals:2,numToBasic:10},VUV:{name:"Vanuatu Vatu",demonym:"Vanuatu",majorSingle:"Vatu",majorPlural:"Vatu",ISOnum:548,symbol:"VT",symbolNative:"VT",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},WST:{name:"Samoan Tala",demonym:"Samoan",majorSingle:"Tala",majorPlural:"Tala",ISOnum:882,symbol:"T",symbolNative:"ST",minorSingle:"Sene",minorPlural:"Sene",ISOdigits:2,decimals:2,numToBasic:100},XAF:{name:"Central African CFA Franc BEAC",demonym:"Central African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:950,symbol:"Fr",symbolNative:"Fr.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XCD:{name:"East Caribbean Dollar",demonym:"East Caribbean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:951,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},XOF:{name:"West African CFA Franc BCEAO",demonym:"West African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:952,symbol:"\u20A3",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XPF:{name:"CFP Franc (Franc Pacifique)",demonym:"CFP",majorSingle:"Franc",majorPlural:"Francs",ISOnum:953,symbol:"\u20A3",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:0,numToBasic:100},YER:{name:"Yemeni Rial",demonym:"Yemeni",majorSingle:"Rial",majorPlural:"Rials",ISOnum:886,symbol:"YR",symbolNative:"\u0631.\u064A.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},ZAR:{name:"South African Rand",demonym:"South African",majorSingle:"Rand",majorPlural:"Rand",ISOnum:710,symbol:"R",symbolNative:"R",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ZMW:{name:"Zambian Kwacha",demonym:"Zambian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:967,symbol:"ZK",symbolNative:"ZK",minorSingle:"Ngwee",minorPlural:"Ngwee",ISOdigits:2,decimals:2,numToBasic:100},ZWB:{name:"RTGS Dollar",demonym:"RTGS",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},ZWL:{name:"Zimbabwean Dollar",demonym:"Zimbabwean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:932,symbol:"Z$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},Abkhazia:{name:"Abkhazian Apsar",demonym:"Abkhazian",majorSingle:"Apsar",majorPlural:"Apsark",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},Artsakh:{name:"Artsakh Dram",demonym:"Artsakh",majorSingle:"Dram",majorPlural:"Dram",ISOnum:null,symbol:"\u0564\u0580.",symbolNative:"\u0564\u0580.",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100}};var Se=require("obsidian");var ge=async()=>{let e=await I("Archive expenditure plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Archive expenditure plan data is undefined")};if(e.jsonData===null)return{status:"success"};if(e.content===void 0)return{status:"error",error:new Error("Archive expenditure plan content is undefined")};let n=await D("Expenditure plan");if(n.status==="error")return{status:"error",error:n.error};if(n.file===void 0)return{status:"error",error:new Error("Expenditure plan file is undefined")};if(e.jsonData.length>0)try{let t=e.jsonData.map(o=>({...o,amount:0})),r=JSON.stringify(t,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to create new month expenditure plan: ${String(t)}`)}}else return{status:"success"}},ye=async()=>{let e=await I("Archive income plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Archive income plan data is undefined")};if(e.jsonData===null)return{status:"success"};if(e.content===void 0)return{status:"error",error:new Error("Archive income plan content is undefined")};let n=await D("Income plan");if(n.status==="error")return{status:"error",error:n.error};if(n.file===void 0)return{status:"error",error:new Error("Income plan file is undefined")};if(e.jsonData.length>0)try{let t=e.jsonData.map(o=>({...o,amount:0})),r=JSON.stringify(t,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to create new month income plan: ${String(t)}`)}}else return{status:"success"}},Te=async()=>{let e=await D("Expenditure plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Expenditure plan info is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Expenditure plan content is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Expenditure plan file is undefined")};let n=e.jsonData,t=await I("Archive expenditure plan");if(t.status==="error")return{status:"error",error:t.error};if(t.jsonData===void 0)return{status:"error",error:new Error("Archive expenditure plan info is undefined")};if(t.jsonData===null)return{status:"success"};if(n===null)return await ge();if(n.length<t.jsonData.length)try{let r=t.jsonData.filter(i=>!n.some(c=>c.id===i.id)).map(i=>({...i,amount:0})),a=[...n,...r],o=JSON.stringify(a,null,4),s=e.content.replace(/```json[\s\S]*?```/,"```json\n"+o+"\n```");return await g.instance.app.vault.modify(e.file,s),{status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(`Failed to check expense plan for compliance: ${String(r)}`)}}else if(n.length>t.jsonData.length)try{let r=t.jsonData.filter(s=>n.some(i=>i.id===s.id)).map(s=>({...s,amount:0})),a=JSON.stringify(r,null,4),o=e.content.replace(/```json[\s\S]*?```/,"```json\n"+a+"\n```");return await g.instance.app.vault.modify(e.file,o),{status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(`Failed to check expense plan for compliance: ${String(r)}`)}}else return{status:"success"}},Ce=async()=>{let e=await D("Income plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Income plan info is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Income plan content is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Income plan file is undefined")};let n=e.jsonData,t=await I("Archive income plan");if(t.status==="error")return{status:"error",error:t.error};if(t.jsonData===void 0)return{status:"error",error:new Error("Archive income plan info is undefined")};if(t.jsonData===null)return{status:"success"};if(n===null)return await ye();if(n.length<t.jsonData.length)try{let r=t.jsonData.filter(i=>!n.some(c=>c.id===i.id)).map(i=>({...i,amount:0})),a=[...n,...r],o=JSON.stringify(a,null,4),s=e.content.replace(/```json[\s\S]*?```/,"```json\n"+o+"\n```");return await g.instance.app.vault.modify(e.file,s),{status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(`Failed to check income plan for compliance: ${String(r)}`)}}else if(n.length>t.jsonData.length)try{let r=t.jsonData.filter(s=>n.some(i=>i.id===s.id)).map(s=>({...s,amount:0})),a=JSON.stringify(r,null,4),o=e.content.replace(/```json[\s\S]*?```/,"```json\n"+a+"\n```");return await g.instance.app.vault.modify(e.file,o),{status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(`Failed to check income plan for compliance: ${String(r)}`)}}else return{status:"success"}},ne=async()=>{let e=await D("Expenditure plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0||e.jsonData===null)return{status:"error",error:new Error("Expenditure plan data is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Expenditure plan file is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Expenditure plan content is undefined")};let n=await I("Archive expenditure plan");if(n.status==="error")return{status:"error",error:n.error};if(n.file===void 0)return{status:"error",error:new Error("Archive expenditure plan file is undefined")};if(e.jsonData.length<=1)try{return await g.instance.app.vault.modify(n.file,e.content),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to archive expenditure plan: ${String(t)}`)}}else try{let t=e.jsonData.map(({amount:o,...s})=>s),r=JSON.stringify(t,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to archive expenditure plan: ${String(t)}`)}}},te=async()=>{let e=await D("Income plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0||e.jsonData===null)return{status:"error",error:new Error("Income plan data is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Income plan file is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Income plan content is undefined")};let n=await I("Archive income plan");if(n.status==="error")return{status:"error",error:n.error};if(n.file===void 0)return{status:"error",error:new Error("Archive income plan file is undefined")};if(e.jsonData.length<=1)try{return await g.instance.app.vault.modify(n.file,e.content),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to archive income plan: ${String(t)}`)}}else try{let t=e.jsonData.map(({amount:o,...s})=>s),r=JSON.stringify(t,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to archive income plan: ${String(t)}`)}}};var U=["January","February","March","April","May","June","July","August","September","October","November","December"],le=async()=>{let{year:e,month:n}=V(),t=!1,r=`---
tags:
  - ${g.instance.settings.defaultTag}
---
\`\`\`json
\`\`\``,a=`${g.instance.settings.targetFolder}/Archive`,o=`${a}/Archive expenditure plan.md`,s=`${a}/Archive income plan.md`,i=`${a}/Archive bills.md`,c=`${g.instance.settings.targetFolder}/${e}`,l=`${c}/${n}`,f=`${l}/History.md`,p=`${l}/Expenditure plan.md`,m=`${l}/Income plan.md`;try{return await g.instance.app.vault.adapter.exists(g.instance.settings.targetFolder)||await g.instance.app.vault.createFolder(g.instance.settings.targetFolder),await g.instance.app.vault.adapter.exists(c)||await g.instance.app.vault.createFolder(c),await g.instance.app.vault.adapter.exists(l)||await g.instance.app.vault.createFolder(l),await g.instance.app.vault.adapter.exists(f)||await g.instance.app.vault.create(f,r),await g.instance.app.vault.adapter.exists(p)?await Te():(await g.instance.app.vault.create(p,r),await ge()),await g.instance.app.vault.adapter.exists(m)?await Ce():(await g.instance.app.vault.create(m,r),await ye()),await g.instance.app.vault.adapter.exists(a)||await g.instance.app.vault.createFolder(a),await g.instance.app.vault.adapter.exists(o)||await g.instance.app.vault.create(o,r),await g.instance.app.vault.adapter.exists(s)||await g.instance.app.vault.create(s,r),await g.instance.app.vault.adapter.exists(i)||await g.instance.app.vault.create(i,r),t=!0,t}catch(u){throw console.error("createDirectory error",u),u}},Ue=async(e,n)=>{let t=`---
tags:
  - ${g.instance.settings.defaultTag}
---
\`\`\`json
\`\`\``,r=`${g.instance.settings.targetFolder}/${n}`,a=`${r}/${U[e]}`,o=`${a}/History.md`,s=`${a}/Expenditure plan.md`,i=`${a}/Income plan.md`;try{return await g.instance.app.vault.adapter.exists(g.instance.settings.targetFolder)||await g.instance.app.vault.createFolder(g.instance.settings.targetFolder),await g.instance.app.vault.adapter.exists(r)||await g.instance.app.vault.createFolder(r),await g.instance.app.vault.adapter.exists(a)||await g.instance.app.vault.createFolder(a),await g.instance.app.vault.adapter.exists(o)||await g.instance.app.vault.create(o,t),await g.instance.app.vault.adapter.exists(s)?await Te():(await g.instance.app.vault.create(s,t),await ge()),await g.instance.app.vault.adapter.exists(i)?await Ce():(await g.instance.app.vault.create(i,t),await ye()),"success"}catch(c){return console.error("defCreateOtherMonthDirectory error",c),"Error creating directory"}};var D=async e=>{let{selectedYear:n,selectedMonth:t}=F(),{year:r,month:a}=n&&t?{year:n,month:t}:V(),o=`${g.instance.settings.targetFolder}/${r}/${a}/${e}.md`,s=app.vault.getAbstractFileByPath(o);if(!(s instanceof Se.TFile))return await le(),{status:"error",error:new Error(`File not found: ${o}. Please try again`)};let i=await app.vault.read(s);if(!i)return{status:"error",error:new Error(`File is empty: ${o}`)};let c=i.match(/```json([\s\S]*?)```/);if(c===null)throw new Error("jsonMatch file is null");let l;return c[1].length>3?l=JSON.parse(c[1].trim()):l=null,{jsonData:l,content:i,file:s,status:"success"}},ce=async(e,n,t)=>{let r=`${g.instance.settings.targetFolder}/${n}/${t}/${e}.md`,a=app.vault.getAbstractFileByPath(r);if(!(a instanceof Se.TFile))return{status:"error",error:new Error(`File not found: ${r}`)};let o=await app.vault.read(a);if(!o)return{status:"error",error:new Error(`File is empty: ${r}`)};let s=o.match(/```json([\s\S]*?)```/);if(s===null)throw new Error("jsonMatch file is null");let i;return s[1].length>3?i=JSON.parse(s[1].trim()):i=null,{jsonData:i,content:o,file:a,status:"success"}},I=async e=>{let n=`${g.instance.settings.targetFolder}/Archive/${e}.md`,t=app.vault.getAbstractFileByPath(n);if(!(t instanceof Se.TFile))return await le(),{status:"error",error:new Error(`File not found: ${n}. Please try again`)};let r=await app.vault.read(t);if(!r)return{status:"error",error:new Error(`File is empty: ${n}`)};let a=r.match(/```json([\s\S]*?)```/);if(a===null)throw new Error("jsonMatch file is null");let o;return a[1].length>3?o=JSON.parse(a[1].trim()):o=null,{jsonData:o,content:r,file:t,status:"success"}},K=async(e,n)=>{let t={History:()=>D("History"),expense:()=>D("Expenditure plan"),income:()=>D("Income plan"),"Archive bills":()=>I("Archive bills")};try{let r=t[n];if(!r)return{status:"error",error:new Error("Element not found")};let a=await r();if(a.status==="error")return{status:"error",error:a.error};if(!a.jsonData)return{status:"error",error:new Error("jsonData is null or undefined")};let o=a.jsonData.find(i=>i.id===e);return o===void 0?{status:"error",error:new Error("Item is undefined")}:{item:o,status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(String(r))}}},Ve=async e=>{try{let n=e.toLowerCase(),[t,r,a,o]=await Promise.all([D("History"),D("Expenditure plan"),D("Income plan"),I("Archive bills")]);if(t.status==="error")return t;if(!t.jsonData)throw new Error("History jsonData is null or undefined");if(r.status==="error"||a.status==="error"||o.status==="error")throw new Error("One of the additional data files returned an error");if(!r.jsonData||!a.jsonData||!o.jsonData)throw new Error("Additional data is null or undefined");let i=[...r.jsonData,...a.jsonData,...o.jsonData].filter(l=>"name"in l&&l.name.toLowerCase().includes(n)).map(l=>l.id),c=t.jsonData.filter(l=>{var p,m,u,d;let f=((p=l.type)==null?void 0:p.toLowerCase().includes(n))||l.amount.toString().includes(e)||((m=l.comment)==null?void 0:m.toLowerCase().includes(n));return i.length===0?f:f||((u=l.bill)==null?void 0:u.id)&&i.includes(l.bill.id)||((d=l.category)==null?void 0:d.id)&&i.includes(l.category.id)});return{status:"success",jsonData:c.length?c:null}}catch(n){return{status:"error",error:n instanceof Error?n:new Error(String(n))}}};var Ne=require("obsidian"),Ze=["USD","EUR","RUB","KZT","UZS"],he=()=>crypto.randomUUID(),V=()=>{Ne.moment.locale("en");let e=(0,Ne.moment)();return{now:e,year:e.format("YYYY"),month:e.format("MMMM")}},be=()=>{let e=Object.entries(xe).map(([r,a])=>({code:r,name:a.name||r,symbol:a.symbol||a.symbolNative})),n=e.filter(r=>Ze.includes(r.code)),t=e.filter(r=>!Ze.includes(r.code));return{popularCurrencies:n,otherCurrencies:t}};function ve(e,n){let t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],{selectedYear:a,selectedMonth:o}=F();if(a===null&&o===null){let s=new Date,i=s.getFullYear(),c=s.getMonth(),l=new Date(i,c+1,0).getDate();for(let f=l;f>=1;f--){let p=new Date(i,c,f),m=p.getDate(),u=t[p.getDay()],d=r[c],y=`${m} ${d}, ${u}`,h=Math.floor((p.getTime()-s.getTime())/(1e3*60*60*24));h===-1?y=`Today, ${y}`:h===0?y=`Tomorrow, ${y}`:h===1?y=`The day after tomorrow, ${y}`:h===-2?y=`Yesterday, ${y}`:h===-3&&(y=`The day before yesterday, ${y}`);let b=`${i}-${String(c+1).padStart(2,"0")}-${String(f).padStart(2,"0")}`,j=e.createEl("option",{text:y,attr:{value:b}});(b===n||h===-1)&&(j.selected=!0)}}else{let s=new Date(`${o} 1, ${a}`),i=isNaN(s.getTime())?null:s.getMonth();if(i===null)throw new Error("Invalid month or year");let c=Number(a),l=i,f=new Date(c,l+1,0).getDate();for(let p=f;p>=1;p--){let m=new Date(c,l,p),u=m.getDate(),d=t[m.getDay()],y=r[l],h=`${u} ${y}, ${d}`,b=`${c}-${String(l+1).padStart(2,"0")}-${String(p).padStart(2,"0")}`;e.createEl("option",{text:h,attr:{value:b}})}}}function De(e,n){let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+n),a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;Array.from(e.options).find(s=>s.value===a)&&(e.value=a)}function Ee(e,n){let t=new E(e);return n==="expense"?`- ${t.toString()}`:n==="income"?`+ ${t.toString()}`:"Error"}function we(e){let n=J(e),t=Z(e);return n.eq(0)?`+${t.toString()}`:t.eq(0)?`-${n.toString()}`:`-${n.toString()} +${t.toString()}`}function J(e){var n;return e?((n=e[0])==null?void 0:n.type)!==void 0?e.reduce((r,a)=>a.type==="expense"?r.plus(new E(a.amount)):r,new E(0)):new E(0):new E(0)}function Z(e){var n;return e?((n=e[0])==null?void 0:n.type)!==void 0?e.reduce((r,a)=>a.type==="income"?r.plus(new E(a.amount)):r,new E(0)):new E(0):new E(0)}function ae(e){return e?e.reduce((n,t)=>t.generalBalance?n.plus(new E(t.balance)):n,new E(0)):new E(0)}function We(e){return e?e.reduce((n,t)=>t.generalBalance?n:n.plus(new E(t.balance)),new E(0)):new E(0)}function Qe(e){let n=new Date,t=n.getFullYear(),r=n.getMonth(),a=new Date(t,r+1,0).getDate(),o=n.getDate(),s=a-o+1;return new E(e).div(s).round(0,0).toNumber()}function N(e){let n=xe[e];return n&&(n.symbol||n.symbolNative)||e}function qe(e,n){let t=Number(ae(e))+Number(J(n)),r=Number(J(n))/t*100;return Number(J(n))<=t?100-r:r===0?100:r}function Pe(e){let[n,t,r]=e.split("-").map(Number),a=new Date(n,t-1,r),o=new Date;o.setHours(0,0,0,0);let s=Math.round((o.getTime()-a.getTime())/(1e3*60*60*24)),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],l="";s===0?l="Today":s===1?l="Yesterday":s===-1?l="Tomorrow":s===2?l="The day before yesterday":s===-2&&(l="The day after tomorrow");let f=o.getFullYear(),m=a.getFullYear()!==f?`${c[a.getMonth()]} ${a.getDate()}, ${a.getFullYear()}, ${i[a.getDay()]}`:`${c[a.getMonth()]} ${a.getDate()}, ${i[a.getDay()]}`;return l?`${l}, ${m}`:m}async function Xe(e,n,t){let r=await ce("Expenditure plan",n,e);if(r.status==="error")return r.error;if(r.jsonData===void 0)throw new Error("Expesnse plan is undefined");let a=await ce("Income plan",n,e);if(a.status==="error")return a.error;if(a.jsonData===void 0)throw new Error("Expesnse plan is undefined");let o=J(r.jsonData),s=Z(a.jsonData);s.gte(o)?(t.createEl("span",{text:`-${o.toString()}`,cls:"expense-all-month-success"}),t.createEl("span",{text:`+${s.toString()}`,cls:"income-all-month"})):(t.createEl("span",{text:`-${o.toString()}`,cls:"expense-all-month-failure"}),t.createEl("span",{text:`+${s.toString()}`,cls:"income-all-month"}))}async function en(e){let n=new E(0),t=new E(0);for(let r=0;r<12;r++){let a=await ce("Expenditure plan",e,U[r]);if(a.status==="error")return;if(!a.jsonData)throw new Error("Expense plan is undefined");let o=await ce("Income plan",e,U[r]);if(o.status==="error")return;if(!o.jsonData)throw new Error("Income plan is undefined");n=n.plus(J(a.jsonData)),t=t.plus(Z(o.jsonData))}return`-${n.toString()} +${t.toString()}`}function nn(){let e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[1].split(".")[0]}var W=require("obsidian");var x=require("obsidian");var me=require("obsidian");var je=async(e,n)=>{let t=await I("Archive bills");if(t.status==="error")return{status:"error",error:t.error};if(t.jsonData===null||t.jsonData===void 0)throw new Error("Bill is null or undefined");let r=t.jsonData.find(o=>o.id===e.bill.id);if(!r)return{status:"error",error:new Error(`Bill ${e.bill.id} not found`)};let a=n?new E(r.balance).plus(n.amount):new E(r.balance);return new E(e.amount).gt(a)?{status:"error",error:new Error(`On bill ${r.name} insufficient funds`)}:{status:"success"}},$e=async(e,n)=>{let t=app.vault.getAbstractFileByPath(g.instance.settings.targetFolder);if(!t||!(t instanceof me.TFolder))throw new Error("Finance folder not found or is not a folder");let r=[],a=o=>{for(let s of o.children)s instanceof me.TFolder?a(s):s instanceof me.TFile&&s.name==="History.md"&&r.push(s)};a(t);for(let o of r)try{let i=(await app.vault.read(o)).match(/```json([\s\S]*?)```/);if(!i||i[1].trim().length<=2)continue;let c=JSON.parse(i[1].trim());if(!Array.isArray(c))continue;if(c.some(f=>{var p,m;return n==="plan"?((p=f==null?void 0:f.category)==null?void 0:p.id)===e:n==="bill"?((m=f==null?void 0:f.bill)==null?void 0:m.id)===e:!1}))return!0}catch(s){console.error(`Error processing file: ${o.path}`,s)}return!1};var tn=async(e,n)=>{let t=await D("History");if(t.status==="error")return{status:"error",error:t.error};if(!t.jsonData)return{status:"error",error:new Error("Error with data history")};if(!t.content)return{status:"error",error:new Error("Error with content history")};if(!t.file)return{status:"error",error:new Error("Error with file history")};if(e.type==="expense"){let r=await je(e,n);if(r.status==="error")return{status:"error",error:r.error}}if(e.type==="expense"){let r=await oe(e,"edit",n);if(r.status==="error")return{status:"error",error:r.error}}else if(e.type==="income"){let r=await ie(e,"edit",n);if(r.status==="error")return{status:"error",error:r.error}}else return{status:"error",error:new Error("The specified type is not suitable")};try{let r=t.jsonData.map(s=>s.id===e.id?{...s,...e}:s),a=JSON.stringify(r,null,4),o=t.content.replace(/```json[\s\S]*?```/,"```json\n"+a+"\n```");return await g.instance.app.vault.modify(t.file,o),{status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(`Failed to editing JSON to history: ${String(r)}`)}}},rn=async e=>{let n={expense:()=>D("Expenditure plan"),income:()=>D("Income plan")};try{let t=n[e.type];if(!t)return{status:"error",error:new Error("Element not found")};let r=await t();if(r.status==="error")return{status:"error",error:r.error};if(!r.jsonData)return{status:"error",error:new Error("jsonData is null or undefined")};if(!r.file)return{status:"error",error:new Error("History file is null or undefined")};if(!r.content)return{status:"error",error:new Error("History content is null or undefined")};let a=r.jsonData.map(i=>i.id===e.id?{...i,...e}:i),o=JSON.stringify(a,null,4),s=r.content.replace(/```json[\s\S]*?```/,"```json\n"+o+"\n```");if(await g.instance.app.vault.modify(r.file,s),e.type==="expense")await ne();else if(e.type==="income")await te();else return{status:"error",error:new Error("The specified type is not suitable")};return{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to editing JSON to plan: ${String(t)}`)}}},an=async e=>{e.balance===""&&(e.balance="0");let n=await I("Archive bills");if(n.status==="error")return{status:"error",error:n.error};if(!n.jsonData)return{status:"error",error:new Error("Error with data bill")};if(!n.content)return{status:"error",error:new Error("Error with content bill")};if(!n.file)return{status:"error",error:new Error("Error with file bill")};try{let t=n.jsonData.map(o=>o.id===e.id?{...o,...e}:o),r=JSON.stringify(t,null,4),a=n.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to editing JSON to bill: ${String(t)}`)}}},ue=async(e,n,t)=>{try{let r=JSON.stringify(e,null,4),a=t.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n,a),{status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(`Error update ${n.name}: ${String(r)}`)}}};E.DP=2;E.RM=E.roundHalfUp;var oe=async(e,n,t)=>{let r=new E(e.amount),a=await I("Archive bills");if(a.status==="error")return{status:"error",error:a.error};if(a.jsonData===void 0||a.jsonData===null)return{status:"error",error:new Error("Bill jsonData is undefined")};let o=await D("Expenditure plan");if(o.status==="error")return{status:"error",error:o.error};if(o.jsonData===void 0||o.jsonData===null)return{status:"error",error:new Error("Plan jsonData is undefined")};let s=a.jsonData,i=o.jsonData,c=async()=>{if(a.file===void 0)return{status:"error",error:new Error("Bill file is undefined")};if(a.content===void 0)return{status:"error",error:new Error("Bill content is undefined")};if(o.file===void 0)return{status:"error",error:new Error("Plan file is undefined")};if(o.content===void 0)return{status:"error",error:new Error("Plan content is undefined")};let m=await ue(s,a.file,a.content);if(m.status==="error")return{status:"error",error:m.error};let u=await ue(i,o.file,o.content);return u.status==="error"?{status:"error",error:u.error}:{status:"success"}},l=(m,u)=>{s=s.map(d=>d.id===m?{...d,balance:new E(d.balance).plus(u).toFixed(2)}:d)},f=(m,u)=>{i=i.map(d=>d.id===m?{...d,amount:new E(d.amount).plus(u).toFixed(2)}:d)},p=async()=>{if(!t)return{status:"error",error:new Error("Old data is required for edit")};let m=new E(t.amount);l(t.bill.id,m),f(t.category.id,m.times(-1)),await c();let u=await I("Archive bills"),d=await D("Expenditure plan");return u.status==="error"?{status:"error",error:u.error}:d.status==="error"?{status:"error",error:d.error}:!u.jsonData||!d.jsonData?{status:"error",error:new Error("Reload data error")}:(s=u.jsonData,i=d.jsonData,l(e.bill.id,r.times(-1)),f(e.category.id,r),await c())};switch(n){case"add":return l(e.bill.id,r.times(-1)),f(e.category.id,r),await c();case"remove":return l(e.bill.id,r),f(e.category.id,r.times(-1)),await c();case"edit":return await p();default:return{status:"error",error:new Error("Invalid modifier")}}},ie=async(e,n,t)=>{let r=new E(e.amount),a=await I("Archive bills");if(a.status==="error")return{status:"error",error:a.error};if(a.jsonData===void 0||a.jsonData===null)return{status:"error",error:new Error("Bill jsonData is undefined")};let o=await D("Income plan");if(o.status==="error")return{status:"error",error:o.error};if(o.jsonData===void 0||o.jsonData===null)return{status:"error",error:new Error("Plan jsonData is undefined")};let s=a.jsonData,i=o.jsonData,c=async()=>{if(a.file===void 0)return{status:"error",error:new Error("Bill file is undefined")};if(a.content===void 0)return{status:"error",error:new Error("Bill content is undefined")};if(o.file===void 0)return{status:"error",error:new Error("Plan file is undefined")};if(o.content===void 0)return{status:"error",error:new Error("Plan content is undefined")};let m=await ue(s,a.file,a.content);if(m.status==="error")return{status:"error",error:m.error};let u=await ue(i,o.file,o.content);return u.status==="error"?{status:"error",error:u.error}:{status:"success"}},l=(m,u)=>{s=s.map(d=>d.id===m?{...d,balance:new E(d.balance).plus(u).toFixed(2)}:d)},f=(m,u)=>{i=i.map(d=>d.id===m?{...d,amount:new E(d.amount).plus(u).toFixed(2)}:d)},p=async()=>{if(!t)return{status:"error",error:new Error("Old data is required for edit")};let m=new E(t.amount);l(t.bill.id,m.times(-1)),f(t.category.id,m.times(-1)),await c();let u=await I("Archive bills"),d=await D("Income plan");return u.status==="error"?{status:"error",error:u.error}:d.status==="error"?{status:"error",error:d.error}:!u.jsonData||!d.jsonData?{status:"error",error:new Error("Reload data error")}:(s=u.jsonData,i=d.jsonData,l(e.bill.id,r),f(e.category.id,r),await c())};switch(n){case"add":return l(e.bill.id,r),f(e.category.id,r),await c();case"remove":return l(e.bill.id,r.times(-1)),f(e.category.id,r.times(-1)),await c();case"edit":return await p();default:return{status:"error",error:new Error("Invalid modifier")}}},on=async e=>{if(e.fromBillId===e.toBillId)return{status:"error",error:new Error("Cannot transfer to the same bill")};let n=await I("Archive bills");if(n.status==="error")return{status:"error",error:n.error};if(!n.jsonData||!n.file||!n.content)return{status:"error",error:new Error("Archive bills data is incomplete")};let t=n.jsonData.find(m=>m.id===e.fromBillId),r=n.jsonData.find(m=>m.id===e.toBillId);if(!t||!r)return{status:"error",error:new Error("One or both bills not found")};let a=new E(t.balance),o=new E(r.balance),s,i;if(e.type==="same-currency"?(s=new E(e.amount),i=s):(s=new E(e.sourceAmount),i=new E(e.targetAmount)),s.gt(a))return{status:"error",error:new Error(`Insufficient funds in bill ${t.name}`)};let c=a.minus(s),l=o.plus(i),f=n.jsonData.map(m=>m.id===t.id?{...m,balance:c.toFixed(2)}:m.id===r.id?{...m,balance:l.toFixed(2)}:m),p=n.content.replace(/```json[\s\S]*?```/,`\`\`\`json
${JSON.stringify(f,null,4)}
\`\`\``);try{return await g.instance.app.vault.modify(n.file,p),{status:"success"}}catch(m){return{status:"error",error:m instanceof Error?m:new Error(`Error tranfer berween bills: ${String(m)}`)}}};var sn=async e=>{if(e.type==="expense"){let t=await je(e);if(t.status==="error")return{status:"error",error:t.error}}let n=await D("History");if(n.status==="error")return{status:"error",error:n.error};if(e.type==="expense"){let t=await oe(e,"add");if(t.status==="error")return{status:"error",error:t.error}}else if(e.type==="income"){let t=await ie(e,"add");if(t.status==="error")return{status:"error",error:t.error}}else return{status:"error",error:new Error("The specified type is not suitable")};if(n.content===void 0)return{status:"error",error:new Error("\u0421ontent is undefined")};if(n.file===void 0)return{status:"error",error:new Error("File is undefined")};try{if(n.jsonData===null){let t=JSON.stringify([e],null,4)+"\n```",r=n.content.replace(/```$/,t);return await g.instance.app.vault.modify(n.file,r),{status:"success"}}else if(n.jsonData.length>=1){let t=JSON.stringify([e],null,4)+"]\n```",r=n.content.lastIndexOf("}"),a=n.content.slice(0,r+1)+`,
`+t.replace(/\[/,"").replace(/\]/,"");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}else throw new Error("jsonData has an unexpected format")}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Failed to add JSON to history: ${String(t)}`)}}},ln=async e=>e.type==="expense"?await An(e):e.type==="income"?await kn(e):{status:"error",error:new Error("The specified type is not suitable")};async function An(e){let n=await D("Expenditure plan");if(n.status==="error")return{status:"error",error:n.error};if(n.jsonData===void 0)return{status:"error",error:new Error("Archive bills is null or undefined")};if(n.content===null||n.content===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};if(n.file===null||n.file===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};try{if(n.jsonData===null){let t=JSON.stringify([e],null,4)+"\n```",r=n.content.replace(/```$/,t);await g.instance.app.vault.modify(n.file,r);let a=await ne();return a.status==="error"?{status:"error",error:a.error}:{status:"success"}}else if(n.jsonData.length>=1){let t=JSON.stringify([e],null,4)+"]\n```",r=n.content.lastIndexOf("}"),a=n.content.slice(0,r+1)+`,
`+t.replace(/\[/,"").replace(/\]/,"");await g.instance.app.vault.modify(n.file,a);let o=await ne();return o.status==="error"?{status:"error",error:o.error}:{status:"success"}}else return{status:"error",error:new Error("Error with jsonData expenditure plan")}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Error creating expediture plans: ${String(t)}`)}}}async function kn(e){let n=await D("Income plan");if(n.status==="error")return{status:"error",error:n.error};if(n.jsonData===void 0)return{status:"error",error:new Error("Archive bills is null or undefined")};if(n.content===null||n.content===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};if(n.file===null||n.file===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};try{if(n.jsonData===null){let t=JSON.stringify([e],null,4)+"\n```",r=n.content.replace(/```$/,t);return await g.instance.app.vault.modify(n.file,r),(await te()).status==="error"?{status:"error",error:new Error("Error archiving income plan")}:{status:"success"}}else if(n.jsonData.length>=1){let t=JSON.stringify([e],null,4)+"]\n```",r=n.content.lastIndexOf("}"),a=n.content.slice(0,r+1)+`,
`+t.replace(/\[/,"").replace(/\]/,"");return await g.instance.app.vault.modify(n.file,a),(await te()).status==="error"?{status:"error",error:new Error("Error archiving income plan")}:{status:"success"}}else return{status:"error",error:new Error("Error with jsonData income plan")}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Error creating income plans: ${String(t)}`)}}}var cn=async e=>{e.balance===""&&(e.balance="0");let n=await I("Archive bills");if(n.status==="error")return{status:"error",error:n.error};if(n.jsonData===void 0)return{status:"error",error:new Error("Archive bills is null or undefined")};if(n.content===null||n.content===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};if(n.file===null||n.file===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};try{if(n.jsonData===null){let t=JSON.stringify([e],null,4)+"\n```",r=n.content.replace(/```$/,t);return await g.instance.app.vault.modify(n.file,r),{status:"success"}}else if(n.jsonData.length>=1){let t=JSON.stringify([e],null,4)+"]\n```",r=n.content.lastIndexOf("}"),a=n.content.slice(0,r+1)+`,
`+t.replace(/\[/,"").replace(/\]/,"");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}else return{status:"error",error:new Error("Error with jsonData bills")}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Error creating bills: ${String(t)}`)}}};var mn=async()=>{let e=await I("Archive bills");if(e.status==="error"){new x.Notice(e.error.message),console.error(e.error);return}if(e.jsonData===void 0){new x.Notice("Bills is undefined"),console.error("Bills is null or undefined");return}if(e.jsonData===null)return new x.Notice("Add a bill");let n=await D("Expenditure plan");if(n.status==="error"){new x.Notice(n.error.message),console.error(n.error);return}if(n.jsonData===void 0){new x.Notice("Expenditure plan is undefined"),console.error("Expenditure plan is undefined");return}if(n.jsonData===null)return new x.Notice("Add a expenditure plan");let t=await D("Income plan");if(t.status==="error"){new x.Notice(t.error.message),console.error(t.error);return}if(t.jsonData===void 0){new x.Notice("Income plan is undefined"),console.error("Income plan is undefined");return}if(t.jsonData===null)return new x.Notice("Add a income plan");let r=await D("History");if(r.status==="error"){new x.Notice(r.error.message),console.error(r.error);return}if(r.jsonData===void 0){new x.Notice("History is undefined"),console.error("History is undefined");return}let{contentEl:a}=w.instance,{selectedYear:o,selectedMonth:s}=F();a.empty(),a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Operation"});let c=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,x.setIcon)(c,"arrow-left"),c.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)});let l=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}),f,p=l.createEl("div",{cls:"main-form_radio"}),m=p.createEl("button",{text:"Expense",cls:"main-radio_exprense",attr:{"data-radio":"expense",type:"button"}});m.dataset.radio==="expense"&&(f=m.dataset.radio,m.addClass("main-radion-button--active"));let u=p.createEl("button",{text:"Income",cls:"main-radio_income",attr:{"data-radio":"income",type:"button"}});u.addEventListener("click",()=>{u.dataset.radio==="income"&&(m.removeClass("main-radion-button--active"),u.addClass("main-radion-button--active"),f=u.dataset.radio,j(),y.focus())}),m.addEventListener("click",()=>{m.dataset.radio==="expense"&&(u.removeClass("main-radion-button--active"),m.addClass("main-radion-button--active"),f=m.dataset.radio,j(),y.focus())});let d=l.createEl("div",{cls:"main-form-input"}),y=d.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",inputmode:"decimal"}});y.focus();let h=d.createEl("select",{cls:"form-selects",attr:{name:"select-bills",id:"select-bills"}});if(e.jsonData.some(B=>B.generalBalance===!0)){let B=document.createElement("optgroup");B.label="Main",e.jsonData.forEach(T=>{if(T.generalBalance){let L=document.createElement("option");L.value=T.id,L.textContent=`${T.emoji} ${T.name} \u2022 ${T.balance} ${N(T.currency)}`,B.appendChild(L)}}),h.appendChild(B)}if(e.jsonData.some(B=>B.generalBalance===!1)){let B=document.createElement("optgroup");B.label="Additional",e.jsonData.forEach(T=>{if(!T.generalBalance){let L=document.createElement("option");L.value=T.id,L.textContent=`${T.emoji} ${T.name} \u2022 ${T.balance} ${N(T.currency)}`,B.appendChild(L)}}),h.appendChild(B)}if(r.jsonData===null)e.jsonData.sort((B,T)=>Number(T.balance)-Number(B.balance)),h.value=e.jsonData[0].id;else{let B={};r.jsonData.forEach(H=>{let R=H.bill.id;B[R]=(B[R]||0)+1});let T=0,L=null;for(let H in B)B[H]>T?(T=B[H],L=H):B[H]===T&&(e.jsonData.sort((R,_)=>Number(_.balance)-Number(R.balance)),h.value=e.jsonData[0].id);let G=e.jsonData.sort((H,R)=>H.id===L?-1:R.id===L?1:0);h.value=G[0].id}let b=d.createEl("select",{cls:"form-selects",attr:{name:"select-category",id:"select-category"}});j();function j(){if(n.status==="error"){new x.Notice(n.error.message),console.error(n.error);return}if(t.status==="error"){new x.Notice(t.error.message),console.error(t.error);return}f==="expense"?(b.empty(),n.jsonData&&(n.jsonData.sort((B,T)=>Number(T.amount)-Number(B.amount)),n.jsonData.forEach(B=>{b.createEl("option",{text:`${B.emoji} ${B.name} \u2022 ${B.amount} ${N(g.instance.settings.baseCurrency)}`,attr:{value:B.id}})}))):(b.empty(),t.jsonData&&(t.jsonData.sort((B,T)=>Number(T.amount)-Number(B.amount)),t.jsonData.forEach(B=>{b.createEl("option",{text:`${B.emoji} ${B.name} \u2022 ${B.amount} ${N(g.instance.settings.baseCurrency)}`,attr:{value:B.id}})})))}let v=d.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}}),S=d.createEl("select",{cls:"form-selects",attr:{name:"select-date",id:"select-date"}});ve(S);let $=Date.now()-new Date(new Date().getFullYear(),new Date().getMonth(),0).getTime()>3*24*60*60*1e3,A=Date.now()-new Date(new Date().getFullYear(),new Date().getMonth(),0).getTime()>2*24*60*60*1e3,M=d.createEl("div",{cls:"form-selects-date-buttons"});o===null&&s===null&&A&&(M.createEl("button",{text:"Today",attr:{type:"button"}}).addEventListener("click",()=>{De(S,0)}),M.createEl("button",{text:"Yesterday",attr:{type:"button"}}).addEventListener("click",()=>{De(S,-1)})),o===null&&s===null&&$&&M.createEl("button",{text:"The day before yesterday",attr:{type:"button"}}).addEventListener("click",()=>{De(S,-2)}),d.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",B=>{if(B.preventDefault(),!(Number(y.value)>=1)){y.focus(),new x.Notice("Enter the amount");return}let T={id:String(he()),amount:String(y.value),bill:{id:h.value},category:{id:b.value},comment:v.value.trim(),date:`${S.value}T${nn()}`,type:f};Mn(T,h)})};async function Mn(e,n){let t=await K(n.value,"Archive bills");if(t.status==="error"){new x.Notice(t.error.message),console.error(t.error);return}if(t.item.currency!==g.instance.settings.baseCurrency){new x.Notice("I apologize, but for now you can only add transactions to accounts in the base currency.");return}let r=await sn(e);r.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new x.Notice("Operation added")},100):(new x.Notice(r.error.message),console.error(r.error))}var un=()=>{let{contentEl:e}=w.instance;e.empty();let n=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,x.setIcon)(n,"arrow-left"),n.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)}),e.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let r=e.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}),a,o=r.createEl("div",{cls:"main-form_radio"}),s=o.createEl("button",{text:"Expense",cls:"main-radio_exprense",attr:{"data-radio":"expense",type:"button"}});s.dataset.radio==="expense"&&(a=s.dataset.radio,s.addClass("main-radion-button--active"));let i=o.createEl("button",{text:"Income",cls:"main-radio_income",attr:{"data-radio":"income",type:"button"}});i.addEventListener("click",()=>{i.dataset.radio==="income"&&(s.removeClass("main-radion-button--active"),i.addClass("main-radion-button--active"),a=i.dataset.radio,l.focus())}),s.addEventListener("click",()=>{s.dataset.radio==="expense"&&(i.removeClass("main-radion-button--active"),s.addClass("main-radion-button--active"),a=s.dataset.radio,l.focus())});let c=r.createEl("div",{cls:"main-form-input"}),l=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text"}});l.focus();let f=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text"}});f.addEventListener("input",()=>{let u=f.value,y=Array.from(u).filter(h=>/\p{Extended_Pictographic}/u.test(h));f.value=y.slice(0,1).join("")});let p=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}});c.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",u=>{if(u.preventDefault(),!l.value){l.focus(),new x.Notice("Enter the name");return}let d={id:String(he()),name:l.value.trim(),emoji:f.value,amount:"0",comment:p.value.trim(),type:a};Ln(d)})};async function Ln(e){let n=await ln(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new x.Notice("The plan has been added.")},100):(new x.Notice(n.error.message),console.error(n.error))}var dn=()=>{let{contentEl:e}=w.instance;e.empty();let n=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,x.setIcon)(n,"arrow-left"),n.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)}),e.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let a=e.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),o=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text"}});o.focus();let s=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text"}});s.addEventListener("input",()=>{let b=s.value,v=Array.from(b).filter(S=>/\p{Extended_Pictographic}/u.test(S));s.value=v.slice(0,1).join("")});let i=a.createEl("select",{cls:"form-selects",attr:{name:"select-currency",id:"select-currency"}}),{popularCurrencies:c,otherCurrencies:l}=be(),f=document.createElement("optgroup");f.label="Popular",c.forEach(b=>{let j=document.createElement("option");j.value=b.code,j.textContent=`${b.code} \u2022 ${b.name} \u2022 ${b.symbol}`,f.appendChild(j)});let p=document.createElement("optgroup");p.label="All currencies",l.forEach(b=>{let j=document.createElement("option");j.value=b.code,j.textContent=`${b.code} ${b.name} \u2022 ${b.symbol}`,p.appendChild(j)}),i.appendChild(f),i.appendChild(p),i.value=g.instance.settings.baseCurrency;let m=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Current balance",id:"input-current-balance",type:"number",inputmode:"decimal"}}),u=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}}),d=a.createEl("div",{cls:"form-checkbox-div"}),y=d.createEl("input",{cls:"form-checkbox",attr:{id:"input-checkbox",type:"checkbox",checked:!0}});d.createEl("span",{text:"Take into account in the general balance",cls:"form-text"}),i.addEventListener("change",()=>{i.value!==g.instance.settings.baseCurrency?(y.checked=!1,d.classList.add("disable-element")):(d.classList.remove("disable-element"),y.checked=!0)}),a.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",b=>{if(b.preventDefault(),!o.value){o.focus(),new x.Notice("Enter the name");return}let j={id:String(he()),name:o.value.trim(),emoji:s.value,balance:String(m.value).trim(),currency:i.value,generalBalance:y.checked,comment:u.value.trim()};Rn(j)})};async function Rn(e){let n=await cn(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new x.Notice("The bill has been added.")},100):(new x.Notice(n.error.message),console.error(n.error))}var P=require("obsidian");var fn=async e=>{if(e==null)return{status:"error",error:new Error("Element is null or undefined")};let n=await D("History");if(n.status==="error")return{status:"error",error:n.error};if(n.file===null||n.file===void 0)return{status:"error",error:new Error("History file is null or undefined")};if(n.content===null||n.content===void 0)return{status:"error",error:new Error("History content is null or undefined")};if(n.jsonData===null||n.jsonData===void 0)return{status:"error",error:new Error("History data is null or undefined")};if(e.type==="expense"){let t=await oe(e,"remove");if(t.status==="error")return{status:"error",error:t.error}}else if(e.type==="income"){let t=await ie(e,"remove");if(t.status==="error")return{status:"error",error:t.error}}else return{status:"error",error:new Error("Unknown transaction type")};if(n.jsonData.length<=1)try{let t=n.content.replace(/```json[\s\S]*?```/,"```json\n```");return await g.instance.app.vault.modify(n.file,t),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Error deleting item: ${String(t)}`)}}else try{let t=n.jsonData.filter(o=>o.id!==e.id),r=JSON.stringify(t,null,4),a=n.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await g.instance.app.vault.modify(n.file,a),{status:"success"}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(`Error deleting item: ${String(t)}`)}}},pn=async e=>{let{id:n,name:t,emoji:r,type:a}=e;if(!n)return{status:"error",error:new Error("Element not found")};let o={expense:()=>D("Expenditure plan"),income:()=>D("Income plan")};try{let s=o[a];if(!s)return{status:"error",error:new Error("Element not found")};let i=await s();if(i.status==="error")return{status:"error",error:i.error};if(i.file===null||i.file===void 0)return{status:"error",error:new Error("History file is null or undefined")};if(i.content===null||i.content===void 0)return{status:"error",error:new Error("History content is null or undefined")};if(i.jsonData===null||i.jsonData===void 0)return{status:"error",error:new Error("History data is null or undefined")};if(await $e(n,"plan"))return{status:"error",error:new Error(`The category ${r} \u2022 ${t} cannot be deleted because it is used in history.`)};let c;if(i.jsonData.length<=1)c=i.content.replace(/```json[\s\S]*?```/,"```json\n```");else if(i.jsonData.length>=2){let l=i.jsonData.filter(p=>p.id!==n),f=JSON.stringify(l,null,4);c=i.content.replace(/```json[\s\S]*?```/,"```json\n"+f+"\n```")}else c="Error";if(c==="Error")return{status:"error",error:new Error("Error with create new content")};if(await g.instance.app.vault.modify(i.file,c),a==="expense"){let l=await ne();if(l.status==="error")return{status:"error",error:l.error}}else if(a==="income"){let l=await te();if(l.status==="error")return{status:"error",error:l.error}}else return{status:"error",error:new Error("The plan has an invalid type.")};return{status:"success"}}catch(s){return{status:"error",error:s instanceof Error?s:new Error(`Error deleting item: ${String(s)}`)}}},gn=async e=>{let{id:n,name:t,emoji:r}=e;if(!n)return{status:"error",error:new Error("Element not found")};let a=await I("Archive bills");if(a.status==="error")return{status:"error",error:a.error};if(!a.jsonData)return{status:"error",error:new Error("jsonData is null or undefined")};if(!a.file)return{status:"error",error:new Error("History file is null or undefined")};if(!a.content)return{status:"error",error:new Error("History content is null or undefined")};try{if(await $e(n,"bill"))return{status:"error",error:new Error(`The bill ${r} \u2022 ${t} cannot be deleted because it is in use in history.`)};let o;if(a.jsonData.length<=1)o=a.content.replace(/```json[\s\S]*?```/,"```json\n```");else if(a.jsonData.length>=2){let s=a.jsonData.filter(c=>c.id!==n),i=JSON.stringify(s,null,4);o=a.content.replace(/```json[\s\S]*?```/,"```json\n"+i+"\n```")}else o="Error";return o==="Error"?{status:"error",error:new Error("Error with create new content")}:(await g.instance.app.vault.modify(a.file,o),{status:"success"})}catch(o){return{status:"error",error:o instanceof Error?o:new Error(`Error deleting item: ${String(o)}`)}}};var Fe=async e=>{var j;if(!(e.target instanceof HTMLElement))return;let n=e.target.closest("li");if(!n)return;let{id:t}=n.dataset;if(!t)return"Element not found";let r=await K(t,"History");if(r.status==="error"){new P.Notice(r.error.message),console.error(r.error);return}let{contentEl:a}=w.instance;a.empty(),a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F"});let s=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,P.setIcon)(s,"arrow-left"),s.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)});let i=a.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,P.setIcon)(i,"trash-2"),i.addEventListener("click",()=>{Hn(r.item)});let l=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),f=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",value:r.item.amount,inputmode:"decimal"}}),p=l.createEl("select",{cls:"form-selects",attr:{name:"select-bills",id:"select-bills"}}),m=await I("Archive bills");if(m.status==="error"){new P.Notice(m.error.message),console.error(m.error);return}if(m.jsonData===null||m.jsonData===void 0)throw new Error("Bill is null or undefined");if(m.jsonData.some(v=>v.generalBalance===!0)){let v=document.createElement("optgroup");v.label="Main",m.jsonData.forEach(S=>{if(S.generalBalance){let $=document.createElement("option");$.value=S.id,$.textContent=`${S.emoji} ${S.name} \u2022 ${S.balance} ${N(S.currency)}`,v.appendChild($)}}),p.appendChild(v)}if(m.jsonData.some(v=>v.generalBalance===!1)){let v=document.createElement("optgroup");v.label="Additional",m.jsonData.forEach(S=>{if(!S.generalBalance){let $=document.createElement("option");$.value=S.id,$.textContent=`${S.emoji} ${S.name} \u2022 ${S.balance} ${N(S.currency)}`,v.appendChild($)}}),p.appendChild(v)}p.value=r.item.bill.id;let u=l.createEl("select",{cls:"form-selects",attr:{name:"select-category",id:"select-category"}});await d();async function d(){if(r.status==="error"){new P.Notice(r.error.message),console.error(r.error);return}if(r.item.type==="expense"){u.empty();let v=await D("Expenditure plan");if(v.status==="error"){new P.Notice(v.error.message),console.error(v.error);return}if(v.jsonData===null||v.jsonData===void 0)throw new Error("Expenditure plan is null or undefined");v.jsonData.sort((S,$)=>Number($.amount)-Number(S.amount)),v.jsonData.forEach(S=>{if(S.id===r.item.category.id){u.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(g.instance.settings.baseCurrency)}`,attr:{value:S.id,selected:"selected"}});return}u.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(g.instance.settings.baseCurrency)}`,attr:{value:S.id}})})}else if(r.item.type==="income"){u.empty();let v=await D("Income plan");if(v.status==="error"){new P.Notice(v.error.message),console.error(v.error);return}if(v.jsonData===null||v.jsonData===void 0)throw new Error("Expenditure plan is null or undefined");v.jsonData.sort((S,$)=>Number($.amount)-Number(S.amount)),v.jsonData.forEach(S=>{if(S.id===r.item.category.id){u.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(g.instance.settings.baseCurrency)}`,attr:{value:S.id,selected:"selected"}});return}u.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(g.instance.settings.baseCurrency)}`,attr:{value:S.id}})})}else return"Error category type"}let y=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:(j=r.item.comment)!=null?j:""}}),h=l.createEl("select",{cls:"form-selects",attr:{name:"select-date",id:"select-date"}});ve(h,r.item.date),h.value=r.item.date.split("T")[0],l.createEl("button",{text:"Safe",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",v=>{if(v.preventDefault(),!(Number(f.value)>=1)){f.focus(),new P.Notice("Enter the amount");return}let S={id:r.item.id,amount:String(f.value),bill:{id:p.value},category:{id:u.value},comment:y.value,date:`${h.value}T${r.item.date.split("T")[1]}`,type:r.item.type};Kn(S,r.item,p)})};async function Hn(e){let n=await fn(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("The operation is remote.")},100):(new P.Notice(n.error.message),console.error(n.error))}async function Kn(e,n,t){let r=await K(t.value,"Archive bills");if(r.status==="error"){new P.Notice(r.error.message),console.error(r.error);return}if(r.item.currency!==g.instance.settings.baseCurrency){new P.Notice("I apologize, but for now you can only add transactions to accounts in the base currency.");return}let a=await tn(e,n);a.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("Operation changed")},100):(new P.Notice(a.error.message),console.error(a.error))}var Ae=async e=>{var h,b;if(!(e.target instanceof HTMLElement))return;let n=e.target.closest("li");if(!n)return;if(!n.dataset.id||!n.dataset.type)throw new Error("Missing id or type in dataset");let t=n.dataset.id,r=n.dataset.type;if(!t)return"Element not found";let a=await K(t,r);if(a.status==="error"){new P.Notice(a.error.message),console.error(a.error);return}let{contentEl:o}=w.instance;o.empty();let s=o.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,P.setIcon)(s,"arrow-left"),s.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)});let i=o.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,P.setIcon)(i,"trash-2"),i.addEventListener("click",()=>{Jn(a.item)}),o.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let f=o.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),p=f.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text",value:a.item.name}}),m=f.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text",value:(h=a.item.emoji)!=null?h:""}});m.addEventListener("input",()=>{let j=m.value,S=Array.from(j).filter($=>/\p{Extended_Pictographic}/u.test($));m.value=S.slice(0,1).join("")});let u=f.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:(b=a.item.comment)!=null?b:""}});f.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",j=>{if(j.preventDefault(),!p.value){p.focus(),new P.Notice("Enter the name");return}let v={id:a.item.id,name:p.value.trim(),emoji:m.value,amount:a.item.amount,comment:u.value.trim(),type:a.item.type};Gn(v)});let y=await D("History");if(y.status==="error"){new P.Notice(y.error.message),console.error(y.error);return}if(y.jsonData===void 0)throw new Error("History is undefined");if(y.jsonData!==null){let j=new Date().getTime(),S=Object.values(y.jsonData.reduce((A,M)=>{let z=M.date.split("T")[0];return A[z]||(A[z]=[]),A[z].push(M),A},{})).sort((A,M)=>new Date(M[0].date).getTime()-new Date(A[0].date).getTime()).map(A=>A.sort((M,z)=>Math.abs(new Date(M.date).getTime()-j)-Math.abs(new Date(z.date).getTime()-j)));o.createEl("h1",{text:"History of the plan"});let $=o.createEl("div",{cls:"history-plan"});for(let A of S){let M=$.createEl("div",{cls:"history-block"}),z=M.createEl("div",{cls:"header-block"});z.createEl("div",{cls:"header-date-block"}).createEl("p",{text:Pe(A[0].date.split("T")[0])}),z.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:`${we(A)}`});let L=M.createEl("ul",{cls:"data-list"});for(let G of A){let H=L.createEl("li",{cls:"data-item",attr:{"data-id":G.id}});H.onclick=async hn=>{await Fe(hn)};let R=await K(G.category.id,G.type);if(R.status==="error"){new P.Notice(R.error.message),console.error(R.error);return}let _=await K(G.bill.id,"Archive bills");if(_.status==="error"){new P.Notice(_.error.message),console.error(_.error);return}let Je=H.createEl("div",{cls:"data-link"}),Ge=Je.createEl("div",{cls:"data-link-emoji"}),fe=Je.createEl("div",{cls:"data-link-text"});Ge.createEl("p",{text:`${R.item.emoji}`}),Ge.createEl("span",{text:`${_.item.emoji}`}),G.comment===""?(fe.createEl("p",{text:`${R.item.name}`}),fe.createEl("span",{text:`${_.item.name}`})):(fe.createEl("p",{text:`${G.comment}`}),fe.createEl("span",{text:`${R.item.name} \u2022 ${_.item.name}`})),H.createEl("div",{cls:"data-link"}).createEl("p",{text:`${Ee(G.amount,G.type)} ${N(_.item.currency)}`})}}}};async function Jn(e){let n=await pn(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("The plan has been removed.")},100):(new P.Notice(n.error.message),console.error(n.error))}async function Gn(e){let n=await rn(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("The plan has been edited.")},100):(new P.Notice(n.error.message),console.error(n.error))}var ke=async e=>{var j,v;if(!(e.target instanceof HTMLElement))return;let n=e.target.closest("li");if(!n)return;let{id:t}=n.dataset;if(!t)return"Element not found";let r=await K(t,"Archive bills");if(r.status==="error"){new P.Notice(r.error.message),console.error(r.error);return}let{contentEl:a}=w.instance;a.empty();let o=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,P.setIcon)(o,"arrow-left"),o.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)});let s=a.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,P.setIcon)(s,"trash-2"),s.addEventListener("click",()=>{Yn(r.item)}),a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let l=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),f=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text",value:r.item.name}}),p=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text",value:(j=r.item.emoji)!=null?j:""}});p.addEventListener("input",()=>{let S=p.value,A=Array.from(S).filter(M=>/\p{Extended_Pictographic}/u.test(M));p.value=A.slice(0,1).join("")});let m=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Current balance",id:"input-current-balance",type:"number",value:r.item.balance,inputmode:"decimal"}}),u=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:(v=r.item.comment)!=null?v:""}}),d=await I("Archive bills");if(d.status==="error"){new P.Notice(d.error.message),console.error(d.error);return}if(d.jsonData===null||d.jsonData===void 0)throw new Error("Bills is null or undefined");if(d.jsonData.length>1){let S=l.createEl("div",{cls:"form-transfer-expense-div"});(0,P.setIcon)(S,"upload"),S.createEl("span",{text:"Transactions between bills",cls:"form-text-transfer"}),S.addEventListener("click",()=>{_n(r.item.id)})}let y=l.createEl("div",{cls:"form-checkbox-div"});r.item.currency!==g.instance.settings.baseCurrency&&y.classList.add("disable-element");let h=y.createEl("input",{cls:"form-checkbox",attr:{id:"input-checkbox",type:"checkbox",checked:r.item.generalBalance?"checked":null}});y.createEl("span",{text:"Take into account in the general balance",cls:"form-text"}),l.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",()=>{if(e.preventDefault(),!f.value){f.focus(),new P.Notice("Enter the name");return}let S={id:r.item.id,name:f.value.trim(),emoji:p.value,balance:String(m.value.trim()),currency:r.item.currency,generalBalance:h.checked,comment:u.value.trim()};zn(S)})};async function Yn(e){let n=await gn(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("The bill has been removed.")},100):(new P.Notice(n.error.message),console.error(n.error))}async function zn(e){let n=await an(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("The bill has been edited.")},100):(new P.Notice(n.error.message),console.error(n.error))}var _n=async e=>{if(!e)return"Element not found";let n=await I("Archive bills");if(n.status==="error"){new P.Notice(n.error.message),console.error(n.error);return}if(!n.jsonData)return"Bill is null or undifined";let{contentEl:t}=w.instance;t.empty();let r=t.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,P.setIcon)(r,"arrow-left"),r.addEventListener("click",()=>{w.instance.onOpen().catch(console.error)}),t.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Transfer"});let s=t.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),i=s.createEl("select",{cls:"form-selects",attr:{name:"select-from-bill",id:"select-from-bill"}});if(n.jsonData.some(u=>u.generalBalance===!0)){let u=document.createElement("optgroup");u.label="Main",n.jsonData.forEach(d=>{if(d.generalBalance){let y=document.createElement("option");y.value=d.id,y.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,y.dataset.currency=d.currency,u.appendChild(y)}}),i.appendChild(u)}if(n.jsonData.some(u=>u.generalBalance===!1)){let u=document.createElement("optgroup");u.label="Additional",n.jsonData.forEach(d=>{if(!d.generalBalance){let y=document.createElement("option");y.value=d.id,y.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,y.dataset.currency=d.currency,u.appendChild(y)}}),i.appendChild(u)}i.value=e;let c=s.createEl("input",{cls:"form-inputs disable-element",attr:{placeholder:"Source amount",id:"input-source-amount",type:"number",inputmode:"decimal"}}),l=s.createEl("select",{cls:"form-selects",attr:{name:"select-to-bill",id:"select-to-bill"}});if(l.createEl("option",{text:"Select an account",attr:{value:"",selected:"",disabled:"",hidden:""}}),n.jsonData.some(u=>u.generalBalance===!0)){let u=document.createElement("optgroup");u.label="Main",n.jsonData.forEach(d=>{if(d.generalBalance){let y=document.createElement("option");y.value=d.id,y.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,y.dataset.currency=d.currency,u.appendChild(y)}}),l.appendChild(u)}if(n.jsonData.some(u=>u.generalBalance===!1)){let u=document.createElement("optgroup");u.label="Additional",n.jsonData.forEach(d=>{if(!d.generalBalance){let y=document.createElement("option");y.value=d.id,y.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,y.dataset.currency=d.currency,u.appendChild(y)}}),l.appendChild(u)}let f=s.createEl("input",{cls:"form-inputs disable-element",attr:{placeholder:"Target amount",id:"input-target-amount",type:"number",inputmode:"decimal"}}),p=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",inputmode:"decimal"}});i.addEventListener("change",()=>{let u=i.options[i.selectedIndex],d=l.options[l.selectedIndex];if(d.value===""){c.classList.add("disable-element"),f.classList.add("disable-element"),p.classList.remove("disable-element");return}u.dataset.currency===d.dataset.currency?(c.classList.add("disable-element"),f.classList.add("disable-element"),p.classList.remove("disable-element")):(c.classList.remove("disable-element"),f.classList.remove("disable-element"),p.classList.add("disable-element"))}),l.addEventListener("change",()=>{let u=i.options[i.selectedIndex];l.options[l.selectedIndex].dataset.currency===u.dataset.currency?(c.classList.add("disable-element"),f.classList.add("disable-element"),p.classList.remove("disable-element")):(c.classList.remove("disable-element"),f.classList.remove("disable-element"),p.classList.add("disable-element"))}),s.createEl("button",{text:"Transfer",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",u=>{if(u.preventDefault(),!l.value){new P.Notice("Select an account");return}let d=i.options[i.selectedIndex],y=l.options[l.selectedIndex],h=d.dataset.currency===y.dataset.currency,b;if(h){if(!p.value){p.focus(),new P.Notice("Enter the amount");return}b={type:"same-currency",fromBillId:i.value,toBillId:l.value,amount:Number(p.value)}}else{if(!c.value||!f.value){(c.value?f:c).focus(),new P.Notice("Enter both amounts");return}b={type:"cross-currency",fromBillId:i.value,toBillId:l.value,sourceAmount:Number(c.value),targetAmount:Number(f.value)}}Un(b)})};async function Un(e){let n=await on(e);n.status==="success"?setTimeout(()=>{w.instance.onOpen().catch(console.error),new P.Notice("Transfer completed")},100):(new P.Notice(n.error.message),console.error(n.error))}var re=async(e,n)=>{F({openPageNow:"History"});let t=await D("History");if(t.status==="error"){new W.Notice(t.error.message),console.error(t.error);return}if(t.jsonData===null){let a=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined"),a.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),a.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else e.removeClass("main-content-body--undefined"),e.createEl("input",{cls:"input-search",attr:{id:"input-search",type:"search",placeholder:"Search by operations"}}).addEventListener("input",o=>{Vn(o,r,e)});let r=e.createEl("div",{cls:"history-content"});Me(r,e,t,n).catch(a=>{console.error("generationHistoryContent failed",a)})};async function Vn(e,n,t){let a=e.target.value,o=await Ve(a);if(o.status==="error"){new W.Notice(o.error.message),console.error(o.error);return}if(o.jsonData===void 0)throw new Error("jsonData is null or undefined");if(n.empty(),o.jsonData===null){let s=n.createEl("div",{cls:"undefined-content"});n.addClass("main-content-body--undefined"),s.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),s.createEl("p",{text:"No matching operations found."})}else o.jsonData.length>=1,n.removeClass("main-content-body--undefined"),Me(n,t,o)}async function Me(e,n,t,r){if(t.status==="error")return t.error;if(t.jsonData!==null){let o=new Date().getTime(),i=Object.values(t.jsonData.reduce((c,l)=>{let f=l.date.split("T")[0];return c[f]||(c[f]=[]),c[f].push(l),c},{})).sort((c,l)=>new Date(l[0].date).getTime()-new Date(c[0].date).getTime()).map(c=>c.sort((l,f)=>Math.abs(new Date(l.date).getTime()-o)-Math.abs(new Date(f.date).getTime()-o)));t.jsonData.length>=5&&n.addClass("main-content-body--padding");for(let c of i){let l=e.createEl("div",{cls:"history-block"}),f=l.createEl("div",{cls:"header-block"});f.createEl("div",{cls:"header-date-block"}).createEl("p",{text:Pe(c[0].date.split("T")[0])}),f.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:`${we(c)}`});let u=l.createEl("ul",{cls:"data-list"});for(let d of c){let y=u.createEl("li",{cls:"data-item",attr:{"data-id":d.id}});y.onclick=A=>{Fe(A)};let h=await K(d.category.id,d.type);if(h.status==="error")return new W.Notice(h.error.message);let b=await K(d.bill.id,"Archive bills");if(b.status==="error")return new W.Notice(b.error.message);let j=y.createEl("div",{cls:"data-link"}),v=j.createEl("div",{cls:"data-link-emoji"}),S=j.createEl("div",{cls:"data-link-text"});v.createEl("p",{text:`${h.item.emoji}`}),v.createEl("span",{text:`${b.item.emoji}`}),d.comment===""?(S.createEl("p",{text:`${h.item.name}`}),S.createEl("span",{text:`${b.item.name}`})):(S.createEl("p",{text:`${d.comment}`}),S.createEl("span",{text:`${h.item.name} \u2022 ${b.item.name}`})),y.createEl("div",{cls:"data-link"}).createEl("p",{text:`${Ee(d.amount,d.type)} ${N(b.item.currency)}`})}}}let a=r==null?void 0:r.createEl("button",{text:"Add an expense or income",cls:"add-button"});a==null||a.addEventListener("click",()=>{mn()})}var de=async(e,n)=>{F({openPageNow:"Plans"});let t=await D("Expenditure plan");if(t.status==="error"){new W.Notice(t.error.message),console.error(t.error);return}if(t.jsonData===void 0)throw new Error("jsonData is undefined");let r=await D("Income plan");if(r.status==="error"){new W.Notice(r.error.message),console.error(r.error);return}let a=[];if(t.jsonData===null&&r.jsonData===null){let s=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined"),s.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),s.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else{if(t.jsonData!==null){e.removeClass("main-content-body--undefined");let s=t.jsonData.slice().sort((m,u)=>new E(u.amount).cmp(new E(m.amount)));s.forEach(m=>a.push(m));let i=e.createEl("div",{cls:"plan-block"}),c=i.createEl("div",{cls:"header-block"});c.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Expense"}),c.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(J(s))});let p=i.createEl("ul",{cls:"data-list"});s.forEach(m=>{let u=p.createEl("li",{cls:"data-item",attr:{"data-id":m.id,"data-type":m.type}});u.onclick=y=>{Ae(y)};let d=u.createEl("div",{cls:"data-link"});d.createEl("span",{text:`${m.emoji}`}),d.createEl("p",{text:`${m.name}`}),u.createEl("p",{text:String(m.amount)})})}if(r.jsonData!==null){if(r.jsonData===void 0)throw new Error("incomePlanInfo is undefined");e.removeClass("main-content-body--undefined");let s=r.jsonData.slice().sort((m,u)=>new E(u.amount).cmp(new E(m.amount)));s.forEach(m=>a.push(m));let i=e.createEl("div",{cls:"plan-block"}),c=i.createEl("div",{cls:"header-block"});c.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Income"}),c.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(Z(s))});let p=i.createEl("ul",{cls:"data-list"});s.forEach(m=>{let u=p.createEl("li",{cls:"data-item",attr:{"data-id":m.id,"data-type":m.type}});u.onclick=y=>{Ae(y)};let d=u.createEl("div",{cls:"data-link"});d.createEl("span",{text:`${m.emoji}`}),d.createEl("p",{text:`${m.name}`}),u.createEl("p",{text:String(m.amount)})})}}a.length>5&&e.addClass("main-content-body--padding"),n.createEl("button",{text:"Create a category",cls:"add-button"}).addEventListener("click",()=>{un()})},Le=async(e,n)=>{F({openPageNow:"Bills"});let t=await I("Archive bills");if(t.status==="error"){new W.Notice(t.error.message),console.error(t.error);return}if(t.jsonData===void 0)throw new Error("Bill is undefined");if(t.jsonData===null){let a=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined"),a.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),a.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else{if(t.jsonData.length>5&&e.addClass("main-content-body--padding"),t.jsonData.filter(a=>a.generalBalance).length>=1){e.removeClass("main-content-body--undefined");let a=e.createEl("div",{cls:"bill-block"}),o=a.createEl("div",{cls:"header-block"});o.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Main"}),o.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(ae(t.jsonData))});let c=a.createEl("ul",{cls:"data-list"});t.jsonData.forEach(l=>{if(l.generalBalance){let f=c.createEl("li",{cls:"data-item",attr:{"data-id":l.id}});f.onclick=async m=>{await ke(m)};let p=f.createEl("div",{cls:"data-link"});p.createEl("span",{text:`${l.emoji}`}),p.createEl("p",{text:`${l.name}`}),f.createEl("p",{text:`${String(l.balance)} ${N(l.currency)}`})}})}if(t.jsonData.filter(a=>!a.generalBalance).length>=1){e.removeClass("main-content-body--undefined");let a=e.createEl("div",{cls:"bill-block"}),o=a.createEl("div",{cls:"header-block"});o.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Additional"}),o.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(We(t.jsonData))});let c=a.createEl("ul",{cls:"data-list"});t.jsonData.forEach(l=>{if(!l.generalBalance){let f=c.createEl("li",{cls:"data-item",attr:{"data-id":l.id}});f.onclick=async m=>{await ke(m)};let p=f.createEl("div",{cls:"data-link"});p.createEl("span",{text:`${l.emoji}`}),p.createEl("p",{text:`${l.name}`}),f.createEl("p",{text:`${String(l.balance)} ${N(l.currency)}`})}})}}n.createEl("button",{text:"Add a bill",cls:"add-button"}).addEventListener("click",()=>{dn()})};var Re=async()=>{if(!w.instance||!g.instance)return;if(F({selectedMonth:null,selectedYear:null}),!await le())return Re();let{contentEl:n}=w.instance,{month:t}=V(),r=await I("Archive bills");if(r.status==="error"){new k.Notice(r.error.message),console.error(r.error);return}if(r.jsonData===void 0)throw new Error("billsInfo is undefined");let a=await D("Expenditure plan");if(a.status==="error"){new k.Notice(a.error.message),console.error(a.error);return}if(a.jsonData===void 0)throw new Error("expenditurePlanInfo is undefined");let o=await D("Income plan");if(o.status==="error"){new k.Notice(o.error.message),console.error(o.error);return}if(o.jsonData===void 0)throw new Error("incomePlanInfo is undefined");n.empty(),n.addClass("finance-content");let i=n.createEl("div",{cls:"finance-header"}).createEl("button",{attr:{id:"showAllMonths"}});(0,k.setIcon)(i,"calendar-days"),i.createEl("span",{text:t}),i.addEventListener("click",()=>{n.dataset.page==="home"&&(n.setAttribute("data-page","months"),yn())}),n.setAttribute("data-page","home");let c=n.createEl("div",{cls:"balance"}),l=c.createEl("div",{cls:"balance-top"});l.createEl("span",{text:"Balance"}),l.createEl("p",{text:`${ae(r.jsonData).toString()} ${N(g.instance.settings.baseCurrency)}`}),l.createEl("span",{text:`~${Qe(ae(r.jsonData))} for a day`}),c.createEl("div",{cls:"balance-line"}).style.setProperty("--after-width",`${qe(r.jsonData,a.jsonData)}%`);let p=c.createEl("div",{cls:"balance-body"}),m=p.createEl("div",{cls:"balance_body-expenses"});m.createEl("span",{text:"Expense"});let u=m.createEl("div",{cls:"balance_expenses-check"});(0,k.setIcon)(u,"upload"),u.createEl("p",{text:`${J(a.jsonData).toString()}`});let d=p.createEl("div",{cls:"balance_body-income"});d.createEl("span",{text:"Income"});let y=d.createEl("div",{cls:"balance_income-check"});(0,k.setIcon)(y,"download"),y.createEl("p",{text:`${Z(o.jsonData).toString()}`}),await Zn()},Zn=async()=>{let{contentEl:e}=w.instance,{openPageNow:n}=F(),t=e.createEl("div",{cls:"main-nav"}),a=e.createEl("div",{cls:"main-content"}).createEl("div",{cls:"main-content-body"}),o=e.createEl("div",{cls:"main-content-button"}),s=t.createEl("a",{text:"History",cls:"home_button--active",attr:{id:"history-button",href:"#"}});s.addEventListener("click",()=>{i.removeClass("home_button--active"),c.removeClass("home_button--active"),s.addClass("home_button--active"),a.empty(),o.empty(),re(a,o)});let i=t.createEl("a",{text:"Plan",attr:{id:"plan-button",href:"#"}});i.addEventListener("click",()=>{s.removeClass("home_button--active"),c.removeClass("home_button--active"),i.addClass("home_button--active"),a.empty(),o.empty(),de(a,o)});let c=t.createEl("a",{text:"Bills",attr:{id:"bills-button",href:"#"}});c.addEventListener("click",()=>{s.removeClass("home_button--active"),i.removeClass("home_button--active"),c.addClass("home_button--active"),a.empty(),o.empty(),Le(a,o)}),!n||n==="History"||n===null?(await re(a,o),s.addClass("home_button--active"),c.removeClass("home_button--active"),i.removeClass("home_button--active")):n==="Plans"?(await de(a,o),s.removeClass("home_button--active"),i.addClass("home_button--active"),c.removeClass("home_button--active")):n==="Bills"?(await Le(a,o),s.removeClass("home_button--active"),i.removeClass("home_button--active"),c.addClass("home_button--active")):(await re(a,o),s.addClass("home_button--active"),c.removeClass("home_button--active"),i.removeClass("home_button--active"))},yn=async()=>{let{contentEl:e}=w.instance;e.empty();let{year:n}=V(),t=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,k.setIcon)(t,"arrow-left"),t.addEventListener("click",()=>{var s;(s=w.instance)==null||s.onOpen().catch(console.error)}),e.createEl("div",{cls:"calendar-header"}).createEl("h1",{text:"Calendar"});let a=e.createEl("div",{cls:"calendar-main"}),o=["\u2603\uFE0F January","\u{1F328}\uFE0F February","\u{1F337} March","\u{1F331} April","\u2600\uFE0F May","\u{1F333} June","\u{1F3D6}\uFE0F July","\u{1F33E} August","\u{1F341} September","\u{1F342} October","\u2614 November","\u2744\uFE0F December"];for(let s=Number(n);s>=g.instance.settings.startYear;s--){let i=a.createEl("div",{cls:"calendar-list-title"});i.createEl("span",{text:String(s)}),i.createEl("span",{text:await en(String(s))});let c=a.createEl("ul",{cls:"calendar-list",attr:{"data-year":s}});for(let l=o.length-1;l>=0;l--){let f=c.createEl("li",{attr:{"data-month":`${l+1}`,"data-year":`${s}`}});f.onclick=async m=>{await Wn(m)},f.createEl("p",{text:o[l]});let p=f.createEl("div",{cls:"story-month"});await Xe(U[l],String(s),p)}}},Wn=async e=>{var i,c,l,f,p;let{year:n,month:t}=V(),r=(c=(i=e.target)==null?void 0:i.closest("[data-month]"))!=null?c:e.target,a=Number((l=r==null?void 0:r.dataset)==null?void 0:l.month),o=String((f=r==null?void 0:r.dataset)==null?void 0:f.year);if(U[a-1]===t&&o===n)return(p=w.instance)==null?void 0:p.onOpen();F({selectedMonth:U[a-1],selectedYear:o});let s=await Ue(a-1,o);s!=="success"&&new k.Notice(s),await He()},He=async()=>{if(!w.instance||!g.instance)return;let e=new Date().getFullYear(),{selectedMonth:n,selectedYear:t}=F(),r=await D("Expenditure plan");if(r.status==="error"){new k.Notice(r.error.message),console.error(r.error);return}if(r.jsonData==null)throw new Error("expenditurePlanInfo is null or undefined");let a=await D("Income plan");if(a.status==="error"){new k.Notice(a.error.message),console.error(a.error);return}if(a.jsonData==null)throw new Error("incomePlanInfo is null or undefined");let{contentEl:o}=w.instance;o.empty();let s=o.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,k.setIcon)(s,"arrow-left"),s.addEventListener("click",()=>{var y;F({selectedMonth:null,selectedYear:null}),(y=w.instance)==null||y.onOpen().catch(console.error)});let c=o.createEl("div",{cls:"finance-header"}).createEl("button",{attr:{id:"showAllMonths"}});(0,k.setIcon)(c,"calendar-days"),Number(t)===e?c.createEl("span",{text:`${n}`,attr:{id:"showAllMonths"}}):c.createEl("span",{text:`${n} ${t}`,attr:{id:"showAllMonths"}}),c.addEventListener("click",()=>{o.dataset.page==="home"&&(o.setAttribute("data-page","months"),yn())}),o.setAttribute("data-page","home");let l=o.createEl("div",{cls:"balance"});l.addClass("balance-other");let f=l.createEl("div",{cls:"balance-body"}),p=f.createEl("div",{cls:"balance_body-expenses"});p.createEl("span",{text:"Expense"});let m=p.createEl("div",{cls:"balance_expenses-check"});(0,k.setIcon)(m,"upload"),m.createEl("p",{text:`${J(r.jsonData).toString()}`});let u=f.createEl("div",{cls:"balance_body-income"});u.createEl("span",{text:"Income"});let d=u.createEl("div",{cls:"balance_income-check"});(0,k.setIcon)(d,"download"),d.createEl("p",{text:`${Z(a.jsonData).toString()}`}),await Qn()},Qn=async()=>{let{contentEl:e}=w.instance,n=e.createEl("div",{cls:"main-nav"}),r=e.createEl("div",{cls:"main-content"}).createEl("div",{cls:"main-content-body"}),a=e.createEl("div",{cls:"main-content-button"}),o=n.createEl("a",{text:"History",cls:"home_button--active",attr:{id:"history-button",href:"#"}});o.addEventListener("click",()=>{s.removeClass("home_button--active"),o.addClass("home_button--active"),r.empty(),a.empty(),re(r,a)});let s=n.createEl("a",{text:"Plan",attr:{id:"plan-button",href:"#"}});s.addEventListener("click",()=>{o.removeClass("home_button--active"),s.addClass("home_button--active"),r.empty(),a.empty(),de(r,a)});let{openPageNow:i}=F();!i||i==="History"||i===null?(await re(r,a),o.addClass("home_button--active"),s.removeClass("home_button--active")):i==="Plans"?(await de(r,a),o.removeClass("home_button--active"),s.addClass("home_button--active")):(await re(r,a),o.addClass("home_button--active"),s.removeClass("home_button--active"))};var Be="financial-accounting-view",g=class extends C.Plugin{constructor(){super(...arguments);this.settings=new Ie}async onload(){g.instance=this,await this.loadSettings(),this.registerView(Be,t=>new w(t)),this.app.workspace.onLayoutReady(()=>{this.addSettingTab(new Ke(this.app,this));let t=this.addRibbonIcon("badge-dollar-sign","Add operation",async()=>{await this.activateView()});this.registerInterval(window.setInterval(()=>{let r=document.querySelector(".workspace-ribbon.mod-left");!r||!t||C.Platform.isMobile&&r.firstChild!==t&&r.append(t)},1e3)),this.unregisterTracking=Xn(this.app,()=>{Sn(r=>{r.classList.add("disable-mobile-nav-bar")})},()=>{Sn(r=>{r.classList.remove("disable-mobile-nav-bar")})}),this.addCommand({id:"view-finance",name:"Open the finance panel",callback:()=>this.activateView()})})}async activateView(){let{workspace:t}=this.app,r=t.getLeavesOfType(Be)[0];r||(C.Platform.isDesktop?r=t.getRightLeaf(!1):r=t.getLeaf(!0),r&&await r.setViewState({type:Be,active:!0})),r&&await t.revealLeaf(r).catch(console.error)}async loadSettings(){let t=await this.loadData(),r=new Ie;this.settings=Object.assign({},r,t||{})}async saveSettings(){await this.saveData(this.settings)}onunload(){var t;(t=this.unregisterTracking)==null||t.call(this)}},w=class extends C.ItemView{constructor(n){super(n)}getViewType(){return Be}getDisplayText(){return"Financial accounting view"}getIcon(){return"chart-pie"}async onOpen(){w.instance=this;let{selectedYear:n,selectedMonth:t}=F();t===null&&n===null?await Re():await He()}async onClose(){}},Ie=class{constructor(){this.targetFolder="Finances",this.startYear=2020,this.baseCurrency="USD",this.defaultTag="Finances"}},Ke=class extends C.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this;t.empty(),new C.Setting(t).setName("Preferences").setHeading();let r=this.app.vault.getAllLoadedFiles().filter(m=>m instanceof C.TFolder).map(m=>m.path),a=this.plugin.settings.targetFolder||"Finances/",o=r.includes(a);new C.Setting(t).setName("Working directory").setDesc("Select the folder the plugin will work with.").addDropdown(m=>{for(let u of r)m.addOption(u,u);o||m.addOption(a,`${a} (does not exist)`),m.setValue(a),m.onChange(async u=>{this.plugin.settings.targetFolder=u,await this.plugin.saveSettings(),new C.Notice(`Folder selected: ${u}`)})}),new C.Setting(t).setName("Initial year of accounting").setDesc("Select the year from which financial accounting has been conducted").addDropdown(m=>{let u=new Date().getFullYear();for(let d=u-100;d<=u;d++)m.addOption(String(d),String(d));m.setValue(String(this.plugin.settings.startYear)),m.onChange(async d=>{this.plugin.settings.startYear=Number(d),await this.plugin.saveSettings(),new C.Notice(`The starting year has been changed to ${d}`)})});let i=new C.Setting(t).setName("Main currency").setDesc("Select the currency from which the conversion will be performed").settingEl.createEl("select",{cls:"currency-select"}),{popularCurrencies:c,otherCurrencies:l}=be(),f=document.createElement("optgroup");f.label="Popular",c.forEach(m=>{let u=document.createElement("option");u.value=m.code,u.textContent=`${m.code} \u2022 ${m.name} \u2022 ${m.symbol}`,f.appendChild(u)});let p=document.createElement("optgroup");p.label="All currencies",l.forEach(m=>{let u=document.createElement("option");u.value=m.code,u.textContent=`${m.code} ${m.name} \u2022 ${m.symbol}`,p.appendChild(u)}),i.appendChild(f),i.appendChild(p),i.value=this.plugin.settings.baseCurrency,i.addEventListener("change",m=>{}),new C.Setting(t).setName("Default tag for Obsidian").setDesc("Enter one word to use as a tag (no spaces).").addText(m=>{m.setPlaceholder("For example: finances").setValue(this.plugin.settings.defaultTag||""),m.inputEl.addEventListener("keydown",u=>{u.key==="Enter"&&(u.preventDefault(),m.inputEl.blur())}),m.inputEl.addEventListener("blur",()=>{})})}},qn=()=>{let e={openPageNow:null,selectedYear:null,selectedMonth:null};return function(t){return t&&(e={...e,...t}),e}},F=qn();function Xn(e,n,t){let r=()=>{e.workspace.getActiveViewOfType(w)?n():t()};return e.workspace.on("active-leaf-change",r),e.workspace.on("layout-change",r),r(),()=>{e.workspace.off("active-leaf-change",r),e.workspace.off("layout-change",r)}}function Sn(e){let n=new MutationObserver(()=>{let t=document.querySelector(".mobile-navbar");t&&(e(t),n.disconnect())});n.observe(document.body,{childList:!0,subtree:!0})}
