/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Be=Object.defineProperty;var hn=Object.getOwnPropertyDescriptor;var bn=Object.getOwnPropertyNames;var vn=Object.prototype.hasOwnProperty;var Dn=(e,t)=>{for(var n in t)Be(e,n,{get:t[n],enumerable:!0})},En=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of bn(t))!vn.call(e,a)&&a!==n&&Be(e,a,{get:()=>t[a],enumerable:!(r=hn(t,a))||r.enumerable});return e};var wn=e=>En(Be({},"__esModule",{value:!0}),e);var Jn={};Dn(Jn,{FinancialAccountingView:()=>E,default:()=>y,stateManager:()=>A});module.exports=wn(Jn);var C=require("obsidian");var k=require("obsidian");var xe={AED:{name:"United Arab Emirates Dirham",demonym:"UAE",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:784,symbol:"\u062F.\u0625.",symbolNative:"\u062F.\u0625.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},AFN:{name:"Afghan Afghani",demonym:"Afghan",majorSingle:"Afghani",majorPlural:"Afghani",ISOnum:971,symbol:"Af",symbolNative:"\u060B",minorSingle:"Pul",minorPlural:"Pul",ISOdigits:2,decimals:2,numToBasic:100},ALL:{name:"Albanian Lek",demonym:"Albanian",majorSingle:"Lek",majorPlural:"Lek\xEB",ISOnum:8,symbol:"L",symbolNative:"L",minorSingle:"Qindarka",minorPlural:"Qindarka",ISOdigits:2,decimals:2,numToBasic:100},AMD:{name:"Armenian Dram",demonym:"Armenian",majorSingle:"Dram",majorPlural:"Dram",ISOnum:51,symbol:"\u058F",symbolNative:"\u0564\u0580",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100},ANG:{name:"Netherlands Antillean Guilder",demonym:"Netherlands Antillean",majorSingle:"Guilder",majorPlural:"Guilders",ISOnum:532,symbol:"\u0192",symbolNative:"\u0192",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AOA:{name:"Angolan Kwanza",demonym:"Angolan",majorSingle:"Kwanza",majorPlural:"Kwanza",ISOnum:973,symbol:"Kz",symbolNative:"Kz",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},ARS:{name:"Argentine Peso",demonym:"Argentine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:32,symbol:"AR$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},AUD:{name:"Australian Dollar",demonym:"Australian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:36,symbol:"AU$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AWG:{name:"Aruban Florin",demonym:"Aruban",majorSingle:"Florin",majorPlural:"Florin",ISOnum:533,symbol:"\u0192",symbolNative:"\u0192",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AZN:{name:"Azerbaijani Manat",demonym:"Azerbaijani",majorSingle:"Manat",majorPlural:"Manat",ISOnum:944,symbol:"\u043C\u0430\u043D",symbolNative:"\u20BC",minorSingle:"Qapik",minorPlural:"Qapik",ISOdigits:2,decimals:2,numToBasic:100},BAM:{name:"Bosnia and Herzegovina Convertible Mark",demonym:"Bosnia-Herzegovina",majorSingle:"Convertible Mark",majorPlural:"Marks",ISOnum:977,symbol:"KM",symbolNative:"\u041A\u041C",minorSingle:"Fening",minorPlural:"Fening",ISOdigits:2,decimals:2,numToBasic:100},BBD:{name:"Barbadian Dollar",demonym:"Barbadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:52,symbol:"BBD$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BDT:{name:"Bangladeshi Taka",demonym:"Bangladeshi",majorSingle:"Taka",majorPlural:"Taka",ISOnum:50,symbol:"\u09F3",symbolNative:"\u09F3",minorSingle:"Poisha",minorPlural:"Poisha",ISOdigits:2,decimals:2,numToBasic:100},BGN:{name:"Bulgarian Lev",demonym:"Bulgarian",majorSingle:"Lev",majorPlural:"Leva",ISOnum:975,symbol:"\u043B\u0432.",symbolNative:"\u043B\u0432.",minorSingle:"Stotinka",minorPlural:"Stotinki",ISOdigits:2,decimals:2,numToBasic:100},BHD:{name:"Bahraini Dinar",demonym:"Bahraini",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:48,symbol:"BD",symbolNative:"\u062F.\u0628.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},BIF:{name:"Burundian Franc",demonym:"Burundian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:108,symbol:"FBu",symbolNative:"FBu",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},BMD:{name:"Bermudian Dollar",demonym:"Bermudian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:60,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BND:{name:"Brunei Dollar",demonym:"Brunei",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:96,symbol:"B$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BOB:{name:"Bolivian Boliviano",demonym:"Bolivian",majorSingle:"Boliviano",majorPlural:"Bolivianos",ISOnum:68,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BRL:{name:"Brazilian Real",demonym:"Brazilian",majorSingle:"Real",majorPlural:"Reais",ISOnum:986,symbol:"R$",symbolNative:"R$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BSD:{name:"Bahamian Dollar",demonym:"Bahamian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:44,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BTN:{name:"Bhutanese Ngultrum",demonym:"Bhutanese",majorSingle:"Ngultrum",majorPlural:"Ngultrums",ISOnum:64,symbol:"Nu.",symbolNative:"Nu.",minorSingle:"Chetrum",minorPlural:"Chetrums",ISOdigits:2,decimals:2,numToBasic:100},BWP:{name:"Botswana Pula",demonym:"Botswana",majorSingle:"Pula",majorPlural:"Pula",ISOnum:72,symbol:"P",symbolNative:"P",minorSingle:"Thebe",minorPlural:"Thebe",ISOdigits:2,decimals:2,numToBasic:100},BYN:{name:"Belarusian Ruble",demonym:"Belarusian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:933,symbol:"Br",symbolNative:"\u0440\u0443\u0431.",minorSingle:"Kapiejka",minorPlural:"Kapiejka",ISOdigits:2,decimals:2,numToBasic:100},BZD:{name:"Belize Dollar",demonym:"Belize",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:84,symbol:"BZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CAD:{name:"Canadian Dollar",demonym:"Canadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:124,symbol:"CA$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CDF:{name:"Congolese Franc",demonym:"Congolese",majorSingle:"Franc",majorPlural:"Francs",ISOnum:976,symbol:"FC",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CHF:{name:"Swiss Franc",demonym:"Swiss",majorSingle:"Franc",majorPlural:"Francs",ISOnum:756,symbol:"Fr.",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CKD:{name:"Cook Islands Dollar",demonym:"Cook Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CLP:{name:"Chilean Peso",demonym:"Chilean",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:152,symbol:"CL$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:0,decimals:0,numToBasic:100},CNY:{name:"Chinese Yuan",demonym:"Chinese",majorSingle:"Yuan",majorPlural:"Yuan",ISOnum:156,symbol:"CN\xA5",symbolNative:"\xA5\u5143",minorSingle:"Fen",minorPlural:"Fen",ISOdigits:2,decimals:2,numToBasic:100},COP:{name:"Colombian Peso",demonym:"Colombian",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:170,symbol:"CO$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CRC:{name:"Costa Rican Colon",demonym:"Costa Rican",majorSingle:"Col\xF3n",majorPlural:"Colones",ISOnum:188,symbol:"\u20A1",symbolNative:"\u20A1",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},CUC:{name:"Cuban convertible Peso",demonym:"Cuban Convertible",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:931,symbol:"CUC$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CUP:{name:"Cuban Peso",demonym:"Cuban",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:192,symbol:"$MN",symbolNative:"\u20B1",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CVE:{name:"Cabo Verdean Escudo",demonym:"Cabo Verdean",majorSingle:"Escudo",majorPlural:"Escudo",ISOnum:132,symbol:"CV$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CZK:{name:"Czech Koruna",demonym:"Czech",majorSingle:"Koruna",majorPlural:"Koruny",ISOnum:203,symbol:"K\u010D",symbolNative:"K\u010D",minorSingle:"Hal\xE9\u0159",minorPlural:"Hal\xE9\u0159",ISOdigits:2,decimals:2,numToBasic:100},DJF:{name:"Djiboutian Franc",demonym:"Djiboutian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:262,symbol:"Fdj",symbolNative:"\u0641.\u062C.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},DKK:{name:"Danish Krone",demonym:"Danish",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:208,symbol:"kr.",symbolNative:"kr.",minorSingle:"\xD8re",minorPlural:"\xD8re",ISOdigits:2,decimals:2,numToBasic:100},DOP:{name:"Dominican Peso",demonym:"Dominican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:214,symbol:"RD$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},DZD:{name:"Algerian Dinar",demonym:"Algerian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:12,symbol:"DA",symbolNative:"\u062F.\u062C.",minorSingle:"Santeem",minorPlural:"Santeems",ISOdigits:2,decimals:2,numToBasic:100},EGP:{name:"Egyptian Pound",demonym:"Egyptian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:818,symbol:"E\xA3",symbolNative:"\u062C.\u0645.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},EHP:{name:"Sahrawi Peseta",demonym:"Sahrawi",majorSingle:"Peseta",majorPlural:"Pesetas",ISOnum:null,symbol:"Ptas.",symbolNative:"Ptas.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},ERN:{name:"Eritrean Nakfa",demonym:"Eritrean",majorSingle:"Nakfa",majorPlural:"Nakfa",ISOnum:232,symbol:"Nkf",symbolNative:"\u0646\u0627\u0643\u0641\u0627",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ETB:{name:"Ethiopian Birr",demonym:"Ethiopian",majorSingle:"Birr",majorPlural:"Birr",ISOnum:230,symbol:"Br",symbolNative:"\u1265\u122D",minorSingle:"Santim",minorPlural:"Santim",ISOdigits:2,decimals:2,numToBasic:100},EUR:{name:"Euro",demonym:"",majorSingle:"Euro",majorPlural:"Euros",ISOnum:978,symbol:"\u20AC",symbolNative:"\u20AC",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FJD:{name:"Fijian Dollar",demonym:"Fijian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:242,symbol:"FJ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FKP:{name:"Falkland Islands Pound",demonym:"Falkland Islands",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:238,symbol:"FK\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},FOK:{name:"Faroese Kr\xF3na",demonym:"Faroese",majorSingle:"Kr\xF3na",majorPlural:"Kr\xF3nas",ISOnum:null,symbol:"kr",symbolNative:"kr",minorSingle:"Oyra",minorPlural:"Oyra",ISOdigits:2,decimals:2,numToBasic:100},GBP:{name:"Pound Sterling",demonym:"Pound Sterling",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:826,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GEL:{name:"Georgian Lari",demonym:"Georgian",majorSingle:"Lari",majorPlural:"Lari",ISOnum:981,symbol:"\u20BE",symbolNative:"\u20BE",minorSingle:"Tetri",minorPlural:"Tetri",ISOdigits:2,decimals:2,numToBasic:100},GGP:{name:"Guernsey Pound",demonym:"Guernsey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GHS:{name:"Ghanaian Cedi",demonym:"Ghanaian",majorSingle:"Cedi",majorPlural:"Cedis",ISOnum:936,symbol:"GH\u20B5",symbolNative:"\u20B5",minorSingle:"Pesewa",minorPlural:"Pesewas",ISOdigits:2,decimals:2,numToBasic:100},GIP:{name:"Gibraltar Pound",demonym:"Gibraltar",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:292,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GMD:{name:"Gambian Dalasi",demonym:"Gambian",majorSingle:"Dalasi",majorPlural:"Dalasis",ISOnum:270,symbol:"D",symbolNative:"D",minorSingle:"Butut",minorPlural:"Bututs",ISOdigits:2,decimals:2,numToBasic:100},GNF:{name:"Guinean Franc",demonym:"Guinean",majorSingle:"Franc",majorPlural:"Francs",ISOnum:324,symbol:"FG",symbolNative:"FG",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},GTQ:{name:"Guatemalan Quetzal",demonym:"Guatemalan",majorSingle:"Quetzal",majorPlural:"Quetzales",ISOnum:320,symbol:"Q",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},GYD:{name:"Guyanese Dollar",demonym:"Guyanese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:328,symbol:"G$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HKD:{name:"Hong Kong Dollar",demonym:"Hong Kong",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:344,symbol:"HK$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HNL:{name:"Honduran Lempira",demonym:"Honduran",majorSingle:"Lempira",majorPlural:"Lempiras",ISOnum:340,symbol:"L",symbolNative:"L",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},HRK:{name:"Croatian Kuna",demonym:"Croatian",majorSingle:"Kuna",majorPlural:"Kuna",ISOnum:191,symbol:"kn",symbolNative:"kn",minorSingle:"Lipa",minorPlural:"Lipa",ISOdigits:2,decimals:2,numToBasic:100},HTG:{name:"Haitian Gourde",demonym:"Haitian",majorSingle:"Gourde",majorPlural:"Gourdes",ISOnum:332,symbol:"G",symbolNative:"G",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},HUF:{name:"Hungarian Forint",demonym:"Hungarian",majorSingle:"Forint",majorPlural:"Forint",ISOnum:348,symbol:"Ft",symbolNative:"Ft",minorSingle:"fill\xE9r",minorPlural:"fill\xE9r",ISOdigits:2,decimals:2,numToBasic:100},IDR:{name:"Indonesian Rupiah",demonym:"Indonesian",majorSingle:"Rupiah",majorPlural:"Rupiah",ISOnum:360,symbol:"Rp",symbolNative:"Rp",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},ILS:{name:"Israeli new Shekel",demonym:"Israeli",majorSingle:"Shekel",majorPlural:"Shekels",ISOnum:376,symbol:"\u20AA",symbolNative:"\u20AA",minorSingle:"Agora",minorPlural:"Agoras",ISOdigits:2,decimals:2,numToBasic:100},IMP:{name:"Manx Pound",demonym:"Manx",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},INR:{name:"Indian Rupee",demonym:"Indian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:356,symbol:"Rs.",symbolNative:"\u20B9",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},IQD:{name:"Iraqi Dinar",demonym:"Iraqi",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:368,symbol:"\u062F.\u0639.",symbolNative:"\u062F.\u0639.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},IRR:{name:"Iranian Rial",demonym:"Iranian",majorSingle:"Rial",majorPlural:"Rials",ISOnum:364,symbol:"\uFDFC",symbolNative:"\uFDFC",minorSingle:"Dinar",minorPlural:"Dinars",ISOdigits:2,decimals:2,numToBasic:100},ISK:{name:"Icelandic Krona",demonym:"Icelandic",majorSingle:"Krona",majorPlural:"Kr\xF3nur",ISOnum:352,symbol:"kr",symbolNative:"kr",minorSingle:"Aurar",minorPlural:"Aurar",ISOdigits:0,decimals:2,numToBasic:100},JEP:{name:"Jersey Pound",demonym:"Jersey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},JMD:{name:"Jamaican Dollar",demonym:"Jamaican",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:388,symbol:"J$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},JOD:{name:"Jordanian Dinar",demonym:"Jordanian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:400,symbol:"JD",symbolNative:"\u062F.\u0623.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},JPY:{name:"Japanese Yen",demonym:"Japanese",majorSingle:"Yen",majorPlural:"Yen",ISOnum:392,symbol:"\xA5",symbolNative:"\xA5",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:0,decimals:2,numToBasic:100},KES:{name:"Kenyan Shilling",demonym:"Kenyan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:404,symbol:"KSh",symbolNative:"KSh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KGS:{name:"Kyrgyzstani Som",demonym:"Kyrgyzstani",majorSingle:"Som",majorPlural:"Som",ISOnum:417,symbol:"\u0441",symbolNative:"\u0441",minorSingle:"Tyiyn",minorPlural:"Tyiyn",ISOdigits:2,decimals:2,numToBasic:100},KHR:{name:"Cambodian Riel",demonym:"Cambodian",majorSingle:"Riel",majorPlural:"Riels",ISOnum:116,symbol:"\u17DB",symbolNative:"\u17DB",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},KID:{name:"Kiribati Dollar",demonym:"Kiribati",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KMF:{name:"Comorian Franc",demonym:"Comorian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:174,symbol:"CF",symbolNative:"CF",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},KPW:{name:"North Korean Won",demonym:"North Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:408,symbol:"\u20A9",symbolNative:"\u20A9",minorSingle:"Chon",minorPlural:"Chon",ISOdigits:2,decimals:2,numToBasic:100},KRW:{name:"South Korean Won",demonym:"South Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:410,symbol:"\u20A9",symbolNative:"\u20A9",minorSingle:"Jeon",minorPlural:"Jeon",ISOdigits:0,decimals:2,numToBasic:100},KWD:{name:"Kuwaiti Dinar",demonym:"Kuwaiti",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:414,symbol:"KD",symbolNative:"\u062F.\u0643.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},KYD:{name:"Cayman Islands Dollar",demonym:"Cayman Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:136,symbol:"CI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KZT:{name:"Kazakhstani Tenge",demonym:"Kazakhstani",majorSingle:"Tenge",majorPlural:"Tenge",ISOnum:398,symbol:"\u20B8",symbolNative:"\u20B8",minorSingle:"T\u0131yn",minorPlural:"T\u0131yn",ISOdigits:2,decimals:2,numToBasic:100},LAK:{name:"Lao Kip",demonym:"Lao",majorSingle:"Kip",majorPlural:"Kip",ISOnum:418,symbol:"\u20ADN",symbolNative:"\u20AD",minorSingle:"Att",minorPlural:"Att",ISOdigits:2,decimals:2,numToBasic:100},LBP:{name:"Lebanese Pound",demonym:"Lebanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:422,symbol:"LL.",symbolNative:"\u0644.\u0644.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},LKR:{name:"Sri Lankan Rupee",demonym:"Sri Lankan",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:144,symbol:"Rs.",symbolNative:"\u0DBB\u0DD4 or \u0BB0\u0BC2",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LRD:{name:"Liberian Dollar",demonym:"Liberian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:430,symbol:"L$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LSL:{name:"Lesotho Loti",demonym:"Lesotho",majorSingle:"Loti",majorPlural:"maLoti",ISOnum:426,symbol:"L",symbolNative:"L",minorSingle:"Sente",minorPlural:"Lisente",ISOdigits:2,decimals:2,numToBasic:100},LYD:{name:"Libyan Dinar",demonym:"Libyan",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:434,symbol:"LD",symbolNative:"\u0644.\u062F.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:3,decimals:3,numToBasic:1e3},MAD:{name:"Moroccan Dirham",demonym:"Moroccan",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:504,symbol:"DH",symbolNative:"\u062F.\u0645.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},MDL:{name:"Moldovan Leu",demonym:"Moldovan",majorSingle:"Leu",majorPlural:"Lei",ISOnum:498,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},MGA:{name:"Malagasy Ariary",demonym:"Malagasy",majorSingle:"Ariary",majorPlural:"Ariary",ISOnum:969,symbol:"Ar",symbolNative:"Ar",minorSingle:"Iraimbilanja",minorPlural:"Iraimbilanja",ISOdigits:2,decimals:0,numToBasic:5},MKD:{name:"Macedonian Denar",demonym:"Macedonian",majorSingle:"Denar",majorPlural:"Denars",ISOnum:807,symbol:"den",symbolNative:"\u0434\u0435\u043D",minorSingle:"Deni",minorPlural:"Deni",ISOdigits:2,decimals:2,numToBasic:100},MMK:{name:"Myanmar Kyat",demonym:"Myanmar",majorSingle:"Kyat",majorPlural:"Kyat",ISOnum:104,symbol:"Ks",symbolNative:"Ks",minorSingle:"Pya",minorPlural:"Pya",ISOdigits:2,decimals:2,numToBasic:100},MNT:{name:"Mongolian T\xF6gr\xF6g",demonym:"Mongolian",majorSingle:"T\xF6gr\xF6g",majorPlural:"T\xF6gr\xF6g",ISOnum:496,symbol:"\u20AE",symbolNative:"\u20AE",minorSingle:"m\xF6ng\xF6",minorPlural:"m\xF6ng\xF6",ISOdigits:2,decimals:2,numToBasic:100},MOP:{name:"Macanese Pataca",demonym:"Macanese",majorSingle:"Pataca",majorPlural:"Patacas",ISOnum:446,symbol:"MOP$",symbolNative:"MOP$",minorSingle:"Avo",minorPlural:"Avos",ISOdigits:2,decimals:2,numToBasic:100},MRU:{name:"Mauritanian Ouguiya",demonym:"Mauritanian",majorSingle:"Ouguiya",majorPlural:"Ouguiya",ISOnum:929,symbol:"UM",symbolNative:"\u0623.\u0645.",minorSingle:"Khoums",minorPlural:"Khoums",ISOdigits:2,decimals:0,numToBasic:5},MUR:{name:"Mauritian Rupee",demonym:"Mauritian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:480,symbol:"Rs.",symbolNative:"\u0930\u0941 ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},MVR:{name:"Maldivian Rufiyaa",demonym:"Maldivian",majorSingle:"Rufiyaa",majorPlural:"Rufiyaa",ISOnum:462,symbol:"MRf",symbolNative:".\u0783",minorSingle:"laari",minorPlural:"laari",ISOdigits:2,decimals:2,numToBasic:100},MWK:{name:"Malawian Kwacha",demonym:"Malawian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:454,symbol:"MK",symbolNative:"MK",minorSingle:"Tambala",minorPlural:"Tambala",ISOdigits:2,decimals:2,numToBasic:100},MXN:{name:"Mexican Peso",demonym:"Mexican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:484,symbol:"MX$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},MYR:{name:"Malaysian Ringgit",demonym:"Malaysian",majorSingle:"Ringgit",majorPlural:"Ringgit",ISOnum:458,symbol:"RM",symbolNative:"RM",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},MZN:{name:"Mozambican Metical",demonym:"Mozambican",majorSingle:"Metical",majorPlural:"Meticais",ISOnum:943,symbol:"MTn",symbolNative:"MT",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NAD:{name:"Namibian Dollar",demonym:"Namibian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:516,symbol:"N$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},NGN:{name:"Nigerian Naira",demonym:"Nigerian",majorSingle:"Naira",majorPlural:"Naira",ISOnum:566,symbol:"\u20A6",symbolNative:"\u20A6",minorSingle:"Kobo",minorPlural:"Kobo",ISOdigits:2,decimals:2,numToBasic:100},NIO:{name:"Nicaraguan C\xF3rdoba",demonym:"Nicaraguan",majorSingle:"C\xF3rdoba Oro",majorPlural:"C\xF3rdoba Oro",ISOnum:558,symbol:"C$",symbolNative:"C$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NOK:{name:"Norwegian Krone",demonym:"Norwegian",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:578,symbol:"kr",symbolNative:"kr",minorSingle:"\xF8re",minorPlural:"\xF8re",ISOdigits:2,decimals:2,numToBasic:100},NPR:{name:"Nepalese Rupee",demonym:"Nepalese",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:524,symbol:"Rs.",symbolNative:"\u0930\u0942",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},NZD:{name:"New Zealand Dollar",demonym:"New Zealand",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:554,symbol:"NZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},OMR:{name:"Omani Rial",demonym:"Omani",majorSingle:"Rial",majorPlural:"Rials",ISOnum:512,symbol:"OR",symbolNative:"\u0631.\u0639.",minorSingle:"Baisa",minorPlural:"Baisa",ISOdigits:3,decimals:3,numToBasic:1e3},PAB:{name:"Panamanian Balboa",demonym:"Panamanian",majorSingle:"Balboa",majorPlural:"Balboa",ISOnum:590,symbol:"B/.",symbolNative:"B/.",minorSingle:"Cent\xE9simo",minorPlural:"Cent\xE9simos",ISOdigits:2,decimals:2,numToBasic:100},PEN:{name:"Peruvian Sol",demonym:"Peruvian",majorSingle:"Sol",majorPlural:"Soles",ISOnum:604,symbol:"S/.",symbolNative:"S/.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},PGK:{name:"Papua New Guinean Kina",demonym:"Papua New Guinean",majorSingle:"Kina",majorPlural:"Kina",ISOnum:598,symbol:"K",symbolNative:"K",minorSingle:"Toea",minorPlural:"Toea",ISOdigits:2,decimals:2,numToBasic:100},PHP:{name:"Philippine Peso",demonym:"Philippine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:608,symbol:"\u20B1",symbolNative:"\u20B1",minorSingle:"Sentimo",minorPlural:"Sentimo",ISOdigits:2,decimals:2,numToBasic:100},PKR:{name:"Pakistani Rupee",demonym:"Pakistani",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:586,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},PLN:{name:"Polish Zloty",demonym:"Polish",majorSingle:"Zloty",majorPlural:"Zlotys",ISOnum:985,symbol:"z\u0142",symbolNative:"z\u0142",minorSingle:"Grosz",minorPlural:"Groszy",ISOdigits:2,decimals:2,numToBasic:100},PND:{name:"Pitcairn Islands Dollar",demonym:"Pitcairn Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},PRB:{name:"Transnistrian Ruble",demonym:"Transnistrian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:null,symbol:"\u0440.",symbolNative:"\u0440.",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},PYG:{name:"Paraguayan Guaran\xED",demonym:"Paraguayan",majorSingle:"Guaran\xED",majorPlural:"Guaran\xEDes",ISOnum:600,symbol:"\u20B2",symbolNative:"\u20B2",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:0,decimals:2,numToBasic:100},QAR:{name:"Qatari Riyal",demonym:"Qatari",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:634,symbol:"QR",symbolNative:"\u0631.\u0642.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:2,decimals:2,numToBasic:100},RON:{name:"Romanian Leu",demonym:"Romanian",majorSingle:"Leu",majorPlural:"Lei",ISOnum:946,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},RSD:{name:"Serbian Dinar",demonym:"Serbian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:941,symbol:"din",symbolNative:"\u0434\u0438\u043D",minorSingle:"Para",minorPlural:"Para",ISOdigits:2,decimals:2,numToBasic:100},RUB:{name:"Russian Ruble",demonym:"Russian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:643,symbol:"\u20BD",symbolNative:"\u20BD",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},RWF:{name:"Rwandan Franc",demonym:"Rwandan",majorSingle:"Franc",majorPlural:"Francs",ISOnum:646,symbol:"FRw",symbolNative:"R\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},SAR:{name:"Saudi Riyal",demonym:"Saudi",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:682,symbol:"SR",symbolNative:"\u0631.\u0633.",minorSingle:"Halalah",minorPlural:"Halalahs",ISOdigits:2,decimals:2,numToBasic:100},SBD:{name:"Solomon Islands Dollar",demonym:"Solomon Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:90,symbol:"SI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SCR:{name:"Seychellois Rupee",demonym:"Seychellois",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:690,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SDG:{name:"Sudanese Pound",demonym:"Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:938,symbol:"\xA3SD",symbolNative:"\u062C.\u0633.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SEK:{name:"Swedish Krona",demonym:"Swedish",majorSingle:"Krona",majorPlural:"Kronor",ISOnum:752,symbol:"kr",symbolNative:"kr",minorSingle:"\xD6re",minorPlural:"\xD6re",ISOdigits:2,decimals:2,numToBasic:100},SGD:{name:"Singapore Dollar",demonym:"Singapore",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:702,symbol:"S$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SHP:{name:"Saint Helena Pound",demonym:"Saint Helena",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:654,symbol:"\xA3",symbolNative:"\xA3",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},SLL:{name:"Sierra Leonean Leone",demonym:"Sierra Leonean",majorSingle:"Leone",majorPlural:"Leones",ISOnum:694,symbol:"Le",symbolNative:"Le",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SLS:{name:"Somaliland Shilling",demonym:"Somaliland",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:null,symbol:"Sl",symbolNative:"Sl",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SOS:{name:"Somali Shilling",demonym:"Somali",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:706,symbol:"Sh.So.",symbolNative:"Ssh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},SRD:{name:"Surinamese Dollar",demonym:"Surinamese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:968,symbol:"Sr$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SSP:{name:"South Sudanese Pound",demonym:"South Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:728,symbol:"SS\xA3",symbolNative:"SS\xA3",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},STN:{name:"Sao Tome and Pr\xEDncipe Dobra",demonym:"Sao Tome",majorSingle:"Dobra",majorPlural:"Dobras",ISOnum:930,symbol:"Db",symbolNative:"Db",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},SVC:{name:"Salvadoran Col\xF3n",demonym:"Salvadoran",majorSingle:"Col\xF3n",majorPlural:"Colones",ISOnum:222,symbol:"\u20A1",symbolNative:"\u20A1",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},SYP:{name:"Syrian Pound",demonym:"Syrian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:760,symbol:"LS",symbolNative:"\u0644.\u0633.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SZL:{name:"Swazi Lilangeni",demonym:"Swazi",majorSingle:"Lilangeni",majorPlural:"Emalangeni",ISOnum:748,symbol:"L",symbolNative:"L",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},THB:{name:"Thai Baht",demonym:"Thai",majorSingle:"Baht",majorPlural:"Baht",ISOnum:764,symbol:"\u0E3F",symbolNative:"\u0E3F",minorSingle:"Satang",minorPlural:"Satang",ISOdigits:2,decimals:2,numToBasic:100},TJS:{name:"Tajikistani Somoni",demonym:"Tajikistani",majorSingle:"Somoni",majorPlural:"Somoni",ISOnum:972,symbol:"SM",symbolNative:"SM",minorSingle:"Diram",minorPlural:"Diram",ISOdigits:2,decimals:2,numToBasic:100},TMT:{name:"Turkmenistan Manat",demonym:"Turkmenistan",majorSingle:"Manat",majorPlural:"Manat",ISOnum:934,symbol:"m.",symbolNative:"T",minorSingle:"Tenge",minorPlural:"Tenge",ISOdigits:2,decimals:2,numToBasic:100},TND:{name:"Tunisian Dinar",demonym:"Tunisian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:788,symbol:"DT",symbolNative:"\u062F.\u062A.",minorSingle:"Millime",minorPlural:"Millime",ISOdigits:3,decimals:3,numToBasic:1e3},TOP:{name:"Tongan Pa\u02BBanga",demonym:"Tongan",majorSingle:"Pa'anga",majorPlural:"Pa'anga",ISOnum:776,symbol:"T$",symbolNative:"PT",minorSingle:"Seniti",minorPlural:"Seniti",ISOdigits:2,decimals:2,numToBasic:100},TRY:{name:"Turkish Lira",demonym:"Turkish",majorSingle:"Lira",majorPlural:"Lira",ISOnum:949,symbol:"TL",symbolNative:"\u20BA",minorSingle:"Kuru\u015F",minorPlural:"Kuru\u015F",ISOdigits:2,decimals:2,numToBasic:100},TTD:{name:"Trinidad and Tobago Dollar",demonym:"Trinidad and Tobago",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:780,symbol:"TT$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TVD:{name:"Tuvaluan Dollar",demonym:"Tuvaluan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TWD:{name:"New Taiwan Dollar",demonym:"New Taiwan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:901,symbol:"NT$",symbolNative:"\u5713",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TZS:{name:"Tanzanian Shilling",demonym:"Tanzanian",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:834,symbol:"TSh",symbolNative:"TSh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},UAH:{name:"Ukrainian Hryvnia",demonym:"Ukrainian",majorSingle:"Hryvnia",majorPlural:"Hryvnias",ISOnum:980,symbol:"\u20B4",symbolNative:"\u0433\u0440\u043D",minorSingle:"Kopiyka",minorPlural:"kopiyky",ISOdigits:2,decimals:2,numToBasic:100},UGX:{name:"Ugandan Shilling",demonym:"Ugandan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:800,symbol:"USh",symbolNative:"Sh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:0,decimals:2,numToBasic:100},USD:{name:"United States Dollar",demonym:"US",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:840,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},UYU:{name:"Uruguayan Peso",demonym:"Uruguayan",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:858,symbol:"$U",symbolNative:"$",minorSingle:"Cent\xE9simo",minorPlural:"Cent\xE9simos",ISOdigits:2,decimals:2,numToBasic:100},UZS:{name:"Uzbekistani Som",demonym:"Uzbekistani",majorSingle:"Som",majorPlural:"Som",ISOnum:860,symbol:"\u0441\u0443\u043C",symbolNative:"\u0441\u0443\u043C",minorSingle:"Tiyin",minorPlural:"Tiyin",ISOdigits:2,decimals:2,numToBasic:100},VED:{name:"Venezuelan bol\xEDvar digital",demonym:"Venezuelan",majorSingle:"Bol\xEDvar Digital",majorPlural:"Bol\xEDvars Digital",ISOnum:null,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"C\xE9ntimo",minorPlural:"C\xE9ntimos",ISOdigits:2,decimals:2,numToBasic:100},VES:{name:"Venezuelan Bol\xEDvar Soberano",demonym:"Venezuelan",majorSingle:"Bol\xEDvar",majorPlural:"Bol\xEDvares",ISOnum:928,symbol:"Bs.F",symbolNative:"Bs.F",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},VND:{name:"Vietnamese Dong",demonym:"Vietnamese",majorSingle:"Dong",majorPlural:"Dong",ISOnum:704,symbol:"\u20AB",symbolNative:"\u20AB",minorSingle:"H\xE0o",minorPlural:"H\xE0o",ISOdigits:0,decimals:2,numToBasic:10},VUV:{name:"Vanuatu Vatu",demonym:"Vanuatu",majorSingle:"Vatu",majorPlural:"Vatu",ISOnum:548,symbol:"VT",symbolNative:"VT",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},WST:{name:"Samoan Tala",demonym:"Samoan",majorSingle:"Tala",majorPlural:"Tala",ISOnum:882,symbol:"T",symbolNative:"ST",minorSingle:"Sene",minorPlural:"Sene",ISOdigits:2,decimals:2,numToBasic:100},XAF:{name:"Central African CFA Franc BEAC",demonym:"Central African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:950,symbol:"Fr",symbolNative:"Fr.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XCD:{name:"East Caribbean Dollar",demonym:"East Caribbean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:951,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},XOF:{name:"West African CFA Franc BCEAO",demonym:"West African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:952,symbol:"\u20A3",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XPF:{name:"CFP Franc (Franc Pacifique)",demonym:"CFP",majorSingle:"Franc",majorPlural:"Francs",ISOnum:953,symbol:"\u20A3",symbolNative:"\u20A3",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:0,numToBasic:100},YER:{name:"Yemeni Rial",demonym:"Yemeni",majorSingle:"Rial",majorPlural:"Rials",ISOnum:886,symbol:"YR",symbolNative:"\u0631.\u064A.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},ZAR:{name:"South African Rand",demonym:"South African",majorSingle:"Rand",majorPlural:"Rand",ISOnum:710,symbol:"R",symbolNative:"R",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ZMW:{name:"Zambian Kwacha",demonym:"Zambian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:967,symbol:"ZK",symbolNative:"ZK",minorSingle:"Ngwee",minorPlural:"Ngwee",ISOdigits:2,decimals:2,numToBasic:100},ZWB:{name:"RTGS Dollar",demonym:"RTGS",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},ZWL:{name:"Zimbabwean Dollar",demonym:"Zimbabwean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:932,symbol:"Z$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},Abkhazia:{name:"Abkhazian Apsar",demonym:"Abkhazian",majorSingle:"Apsar",majorPlural:"Apsark",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},Artsakh:{name:"Artsakh Dram",demonym:"Artsakh",majorSingle:"Dram",majorPlural:"Dram",ISOnum:null,symbol:"\u0564\u0580.",symbolNative:"\u0564\u0580.",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100}};var ge=require("obsidian");var pe=async()=>{let e=await I("Archive expenditure plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Archive expenditure plan data is undefined")};if(e.jsonData===null)return{status:"success"};if(e.content===void 0)return{status:"error",error:new Error("Archive expenditure plan content is undefined")};let t=await D("Expenditure plan");if(t.status==="error")return{status:"error",error:t.error};if(t.file===void 0)return{status:"error",error:new Error("Expenditure plan file is undefined")};if(e.jsonData.length>0)try{let n=e.jsonData.map(o=>({...o,amount:0})),r=JSON.stringify(n,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to create new month expenditure plan: ${n}`)}}else return{status:"success"}},ye=async()=>{let e=await I("Archive income plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Archive income plan data is undefined")};if(e.jsonData===null)return{status:"success"};if(e.content===void 0)return{status:"error",error:new Error("Archive income plan content is undefined")};let t=await D("Income plan");if(t.status==="error")return{status:"error",error:t.error};if(t.file===void 0)return{status:"error",error:new Error("Income plan file is undefined")};if(e.jsonData.length>0)try{let n=e.jsonData.map(o=>({...o,amount:0})),r=JSON.stringify(n,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to create new month income plan: ${n}`)}}else return{status:"success"}},Te=async()=>{let e=await D("Expenditure plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Expenditure plan info is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Expenditure plan content is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Expenditure plan file is undefined")};let t=e.jsonData,n=await I("Archive expenditure plan");if(n.status==="error")return{status:"error",error:n.error};if(n.jsonData===void 0)return{status:"error",error:new Error("Archive expenditure plan info is undefined")};if(n.jsonData===null)return{status:"success"};if(t===null)return await pe();if(t.length<n.jsonData.length)try{let r=n.jsonData.filter(i=>!t.some(c=>c.id===i.id)).map(i=>({...i,amount:0})),a=[...t,...r],o=JSON.stringify(a,null,4),s=e.content.replace(/```json[\s\S]*?```/,"```json\n"+o+"\n```");return await y.instance.app.vault.modify(e.file,s),{status:"success"}}catch(r){return{status:"error",error:new Error(`Failed to check expense plan for compliance: ${r}`)}}else if(t.length>n.jsonData.length)try{let r=n.jsonData.filter(s=>t.some(i=>i.id===s.id)).map(s=>({...s,amount:0})),a=JSON.stringify(r,null,4),o=e.content.replace(/```json[\s\S]*?```/,"```json\n"+a+"\n```");return await y.instance.app.vault.modify(e.file,o),{status:"success"}}catch(r){return{status:"error",error:new Error(`Failed to check expense plan for compliance: ${r}`)}}else return{status:"success"}},Ce=async()=>{let e=await D("Income plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0)return{status:"error",error:new Error("Income plan info is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Income plan content is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Income plan file is undefined")};let t=e.jsonData,n=await I("Archive income plan");if(n.status==="error")return{status:"error",error:n.error};if(n.jsonData===void 0)return{status:"error",error:new Error("Archive income plan info is undefined")};if(n.jsonData===null)return{status:"success"};if(t===null)return await ye();if(t.length<n.jsonData.length)try{let r=n.jsonData.filter(i=>!t.some(c=>c.id===i.id)).map(i=>({...i,amount:0})),a=[...t,...r],o=JSON.stringify(a,null,4),s=e.content.replace(/```json[\s\S]*?```/,"```json\n"+o+"\n```");return await y.instance.app.vault.modify(e.file,s),{status:"success"}}catch(r){return{status:"error",error:new Error(`Failed to check income plan for compliance: ${r}`)}}else if(t.length>n.jsonData.length)try{let r=n.jsonData.filter(s=>t.some(i=>i.id===s.id)).map(s=>({...s,amount:0})),a=JSON.stringify(r,null,4),o=e.content.replace(/```json[\s\S]*?```/,"```json\n"+a+"\n```");return await y.instance.app.vault.modify(e.file,o),{status:"success"}}catch(r){return{status:"error",error:new Error(`Failed to check income plan for compliance: ${r}`)}}else return{status:"success"}},W=async()=>{let e=await D("Expenditure plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0||e.jsonData===null)return{status:"error",error:new Error("Expenditure plan data is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Expenditure plan file is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Expenditure plan content is undefined")};let t=await I("Archive expenditure plan");if(t.status==="error")return{status:"error",error:t.error};if(t.file===void 0)return{status:"error",error:new Error("Archive expenditure plan file is undefined")};if(e.jsonData.length<=1)try{return await y.instance.app.vault.modify(t.file,e.content),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to archive expenditure plan: ${n}`)}}else try{let n=e.jsonData.map(({amount:o,...s})=>s),r=JSON.stringify(n,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to archive expenditure plan: ${n}`)}}},Q=async()=>{let e=await D("Income plan");if(e.status==="error")return{status:"error",error:e.error};if(e.jsonData===void 0||e.jsonData===null)return{status:"error",error:new Error("Income plan data is undefined")};if(e.file===void 0)return{status:"error",error:new Error("Income plan file is undefined")};if(e.content===void 0)return{status:"error",error:new Error("Income plan content is undefined")};let t=await I("Archive income plan");if(t.status==="error")return{status:"error",error:t.error};if(t.file===void 0)return{status:"error",error:new Error("Archive income plan file is undefined")};if(e.jsonData.length<=1)try{return await y.instance.app.vault.modify(t.file,e.content),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to archive income plan: ${n}`)}}else try{let n=e.jsonData.map(({amount:o,...s})=>s),r=JSON.stringify(n,null,4),a=e.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to archive income plan: ${n}`)}}};var _=["January","February","March","April","May","June","July","August","September","October","November","December"],se=async()=>{let{year:e,month:t}=U(),n=!1,r=`---
tags:
  - ${y.instance.settings.defaultTag}
---
\`\`\`json
\`\`\``,a=`${y.instance.settings.targetFolder}/Archive`,o=`${a}/Archive expenditure plan.md`,s=`${a}/Archive income plan.md`,i=`${a}/Archive bills.md`,c=`${y.instance.settings.targetFolder}/${e}`,l=`${c}/${t}`,p=`${l}/History.md`,f=`${l}/Expenditure plan.md`,m=`${l}/Income plan.md`;try{return await y.instance.app.vault.adapter.exists(y.instance.settings.targetFolder)||await y.instance.app.vault.createFolder(y.instance.settings.targetFolder),await y.instance.app.vault.adapter.exists(c)||await y.instance.app.vault.createFolder(c),await y.instance.app.vault.adapter.exists(l)||await y.instance.app.vault.createFolder(l),await y.instance.app.vault.adapter.exists(p)||await y.instance.app.vault.create(p,r),await y.instance.app.vault.adapter.exists(f)?await Te():(await y.instance.app.vault.create(f,r),await pe()),await y.instance.app.vault.adapter.exists(m)?await Ce():(await y.instance.app.vault.create(m,r),await ye()),await y.instance.app.vault.adapter.exists(a)||await y.instance.app.vault.createFolder(a),await y.instance.app.vault.adapter.exists(o)||await y.instance.app.vault.create(o,r),await y.instance.app.vault.adapter.exists(s)||await y.instance.app.vault.create(s,r),await y.instance.app.vault.adapter.exists(i)||await y.instance.app.vault.create(i,r),n=!0,n}catch(u){throw console.error("createDirectory error",u),u}},Ge=async(e,t)=>{let n=`---
tags:
  - ${y.instance.settings.defaultTag}
---
\`\`\`json
\`\`\``,r=`${y.instance.settings.targetFolder}/${t}`,a=`${r}/${_[e]}`,o=`${a}/History.md`,s=`${a}/Expenditure plan.md`,i=`${a}/Income plan.md`;try{return await y.instance.app.vault.adapter.exists(y.instance.settings.targetFolder)||await y.instance.app.vault.createFolder(y.instance.settings.targetFolder),await y.instance.app.vault.adapter.exists(r)||await y.instance.app.vault.createFolder(r),await y.instance.app.vault.adapter.exists(a)||await y.instance.app.vault.createFolder(a),await y.instance.app.vault.adapter.exists(o)||await y.instance.app.vault.create(o,n),await y.instance.app.vault.adapter.exists(s)?await Te():(await y.instance.app.vault.create(s,n),await pe()),await y.instance.app.vault.adapter.exists(i)?await Ce():(await y.instance.app.vault.create(i,n),await ye()),"success"}catch(c){return console.error("defCreateOtherMonthDirectory error",c),"Error creating directory"}};var D=async e=>{let{selectedYear:t,selectedMonth:n}=A(),{year:r,month:a}=t&&n?{year:t,month:n}:U(),o=`${y.instance.settings.targetFolder}/${r}/${a}/${e}.md`,s=app.vault.getAbstractFileByPath(o);if(!(s instanceof ge.TFile))return await se(),{status:"error",error:new Error(`File not found: ${o}. Please try again`)};let i=await app.vault.read(s);if(!i)return{status:"error",error:new Error(`File is empty: ${o}`)};let c=i.match(/```json([\s\S]*?)```/);if(c===null)throw new Error("jsonMatch file is null");let l;return c[1].length>3?l=JSON.parse(c[1].trim()):l=null,{jsonData:l,content:i,file:s,status:"success"}},le=async(e,t,n)=>{let r=`${y.instance.settings.targetFolder}/${t}/${n}/${e}.md`,a=app.vault.getAbstractFileByPath(r);if(!(a instanceof ge.TFile))return{status:"error",error:new Error(`File not found: ${r}`)};let o=await app.vault.read(a);if(!o)return{status:"error",error:new Error(`File is empty: ${r}`)};let s=o.match(/```json([\s\S]*?)```/);if(s===null)throw new Error("jsonMatch file is null");let i;return s[1].length>3?i=JSON.parse(s[1].trim()):i=null,{jsonData:i,content:o,file:a,status:"success"}},I=async e=>{let t=`${y.instance.settings.targetFolder}/Archive/${e}.md`,n=app.vault.getAbstractFileByPath(t);if(!(n instanceof ge.TFile))return await se(),{status:"error",error:new Error(`File not found: ${t}. Please try again`)};let r=await app.vault.read(n);if(!r)return{status:"error",error:new Error(`File is empty: ${t}`)};let a=r.match(/```json([\s\S]*?)```/);if(a===null)throw new Error("jsonMatch file is null");let o;return a[1].length>3?o=JSON.parse(a[1].trim()):o=null,{jsonData:o,content:r,file:n,status:"success"}},K=async(e,t)=>{let n={History:()=>D("History"),expense:()=>D("Expenditure plan"),income:()=>D("Income plan"),"Archive bills":()=>I("Archive bills")};try{let r=n[t];if(!r)return{status:"error",error:new Error("Element not found")};let a=await r();if(a.status==="error")return{status:"error",error:a.error};if(!a.jsonData)return{status:"error",error:new Error("jsonData is null or undefined")};let o=a.jsonData.find(i=>i.id===e);return o===void 0?{status:"error",error:new Error("Item is undefined")}:{item:o,status:"success"}}catch(r){return{status:"error",error:r instanceof Error?r:new Error(String(r))}}},Ye=async e=>{try{let t=e.toLowerCase(),[n,r,a,o]=await Promise.all([D("History"),D("Expenditure plan"),D("Income plan"),I("Archive bills")]);if(n.status==="error")return n;if(!n.jsonData)throw new Error("History jsonData is null or undefined");if(r.status==="error"||a.status==="error"||o.status==="error")throw new Error("One of the additional data files returned an error");if(!r.jsonData||!a.jsonData||!o.jsonData)throw new Error("Additional data is null or undefined");let i=[...r.jsonData,...a.jsonData,...o.jsonData].filter(l=>"name"in l&&l.name.toLowerCase().includes(t)).map(l=>l.id),c=n.jsonData.filter(l=>{var f,m,u,d;let p=((f=l.type)==null?void 0:f.toLowerCase().includes(t))||l.amount.toString().includes(e)||((m=l.comment)==null?void 0:m.toLowerCase().includes(t));return i.length===0?p:p||((u=l.bill)==null?void 0:u.id)&&i.includes(l.bill.id)||((d=l.category)==null?void 0:d.id)&&i.includes(l.category.id)});return{status:"success",jsonData:c.length?c:null}}catch(t){return{status:"error",error:t instanceof Error?t:new Error(String(t))}}};var ze=["USD","EUR","RUB","KZT","UZS"],Se=()=>crypto.randomUUID(),U=()=>{if(typeof moment!="undefined"){moment.locale("en");let e=moment(),t=e.format("YYYY"),n=e.format("MMMM");return{now:e,year:t,month:n}}else{let e=new Date,t=String(e.getFullYear()),n=_[e.getMonth()];return{now:e,year:t,month:n}}},he=()=>{let e=Object.entries(xe).map(([r,a])=>({code:r,name:a.name||r,symbol:a.symbol||a.symbolNative})),t=e.filter(r=>ze.includes(r.code)),n=e.filter(r=>!ze.includes(r.code));return{popularCurrencies:t,otherCurrencies:n}};function be(e,t){let n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],{selectedYear:a,selectedMonth:o}=A();if(a===null&&o===null){let s=new Date,i=s.getFullYear(),c=s.getMonth(),l=new Date(i,c+1,0).getDate();for(let p=l;p>=1;p--){let f=new Date(i,c,p),m=f.getDate(),u=n[f.getDay()],d=r[c],g=`${m} ${d}, ${u}`,v=Math.floor((f-s)/(1e3*60*60*24));v===-1?g=`Today, ${g}`:v===0?g=`Tomorrow, ${g}`:v===1?g=`The day after tomorrow, ${g}`:v===-2?g=`Yesterday, ${g}`:v===-3&&(g=`The day before yesterday, ${g}`);let b=`${i}-${String(c+1).padStart(2,"0")}-${String(p).padStart(2,"0")}`,h=e.createEl("option",{text:g,attr:{value:b}});(b===t||v===-1)&&(h.selected=!0)}}else{let s=new Date(`${o} 1, ${a}`),i=isNaN(s)?null:s.getMonth(),c=Number(a),l=i,p=new Date(c,l+1,0).getDate();for(let f=p;f>=1;f--){let m=new Date(c,l,f),u=m.getDate(),d=n[m.getDay()],g=r[l],v=`${u} ${g}, ${d}`,b=`${c}-${String(l+1).padStart(2,"0")}-${String(f).padStart(2,"0")}`;e.createEl("option",{text:v,attr:{value:b}})}}}function ve(e,t){let n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t),a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;Array.from(e.options).find(s=>s.value===a)&&(e.value=a)}function De(e,t){return t==="expense"?`- ${e}`:t==="income"?`+ ${e}`:"Error"}function Ee(e){let t=J(e),n=V(e);return t===0?`+${n}`:n===0?`-${t}`:`-${t} +${n}`}function J(e){if(!e)return 0;let t=0;return e.forEach((n,r)=>{n.type==="expense"&&(t+=Number(n.amount))}),t}function V(e){if(!e)return 0;let t=0;return e.forEach((n,r)=>{n.type==="income"&&(t+=Number(n.amount))}),t}function ae(e){if(!e||e===null)return 0;let t=0;return e.forEach((n,r)=>{n.generalBalance&&(t+=Number(n.balance))}),t}function _e(e){if(!e||e===null)return 0;let t=0;return e.forEach((n,r)=>{n.generalBalance||(t+=Number(n.balance))}),t}function Ue(e){let t=new Date,n=t.getFullYear(),r=t.getMonth(),a=new Date(n,r+1,0).getDate(),o=t.getDate(),s=a-o+1;return Math.trunc(e/s)}function N(e){let t=xe[e];return t&&(t.symbol||t.symbolNative)||e}function Ve(e,t){let n=Number(ae(e))+Number(J(t)),r=Number(J(t))/n*100;return Number(J(t))<=n?100-r:r===0?100:r}function we(e){let[t,n,r]=e.split("-").map(Number),a=new Date(t,n-1,r),o=new Date;o.setHours(0,0,0,0);let s=Math.round((o.getTime()-a.getTime())/(1e3*60*60*24)),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],l="";s===0?l="Today":s===1?l="Yesterday":s===-1?l="Tomorrow":s===2?l="The day before yesterday":s===-2&&(l="The day after tomorrow");let p=o.getFullYear(),m=a.getFullYear()!==p?`${c[a.getMonth()]} ${a.getDate()}, ${a.getFullYear()}, ${i[a.getDay()]}`:`${c[a.getMonth()]} ${a.getDate()}, ${i[a.getDay()]}`;return l?`${l}, ${m}`:m}async function Ze(e,t,n){let r=await le("Expenditure plan",t,e);if(r.status==="error")return r.error;if(r.jsonData===void 0)throw new Error("Expesnse plan is undefined");let a=await le("Income plan",t,e);if(a.status==="error")return a.error;if(a.jsonData===void 0)throw new Error("Expesnse plan is undefined");let o=J(r.jsonData),s=V(a.jsonData);s>=o?(n.createEl("span",{text:`-${o}`,cls:"expense-all-month-success"}),n.createEl("span",{text:`+${s}`,cls:"income-all-month"})):(n.createEl("span",{text:`-${o}`,cls:"expense-all-month-failure"}),n.createEl("span",{text:`+${s}`,cls:"income-all-month"}))}async function We(e){let t=0,n=0;for(let r=1;r<=12;r++){let a=await le("Expenditure plan",e,_[r]);if(a.status==="error")return;if(a.jsonData===void 0)throw new Error("Expesnse plan is undefined");let o=await le("Income plan",e,_[r]);if(o.status==="error")return;if(o.jsonData===void 0)throw new Error("Expesnse plan is undefined");t+=J(a.jsonData),n+=V(o.jsonData)}return`-${t} +${n}`}function Qe(){let e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[1].split(".")[0]}var jn=20,In=1,q=1e6,qe=1e6,On=-7,Bn=21,xn=!1,ce="[big.js] ",X=ce+"Invalid ",Pe=X+"decimal places",Tn=X+"rounding mode",Xe=ce+"Division by zero",B={},G=void 0,Cn=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function en(){function e(t){var n=this;if(!(n instanceof e))return t===G&&arguments.length===0?en():new e(t);if(t instanceof e)n.s=t.s,n.e=t.e,n.c=t.c.slice();else{if(typeof t!="string"){if(e.strict===!0&&typeof t!="bigint")throw TypeError(X+"value");t=t===0&&1/t<0?"-0":String(t)}Nn(n,t)}n.constructor=e}return e.prototype=B,e.DP=jn,e.RM=In,e.NE=On,e.PE=Bn,e.strict=xn,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function Nn(e,t){var n,r,a;if(!Cn.test(t))throw Error(X+"number");for(e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),a=t.length,r=0;r<a&&t.charAt(r)=="0";)++r;if(r==a)e.c=[e.e=0];else{for(;a>0&&t.charAt(--a)=="0";);for(e.e=n-r-1,e.c=[],n=0;r<=a;)e.c[n++]=+t.charAt(r++)}return e}function ee(e,t,n,r){var a=e.c;if(n===G&&(n=e.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Tn);if(t<1)r=n===3&&(r||!!a[0])||t===0&&(n===1&&a[0]>=5||n===2&&(a[0]>5||a[0]===5&&(r||a[1]!==G))),a.length=1,r?(e.e=e.e-t+1,a[0]=1):a[0]=e.e=0;else if(t<a.length){if(r=n===1&&a[t]>=5||n===2&&(a[t]>5||a[t]===5&&(r||a[t+1]!==G||a[t-1]&1))||n===3&&(r||!!a[0]),a.length=t,r){for(;++a[--t]>9;)if(a[t]=0,t===0){++e.e,a.unshift(1);break}}for(t=a.length;!a[--t];)a.pop()}return e}function ne(e,t,n){var r=e.e,a=e.c.join(""),o=a.length;if(t)a=a.charAt(0)+(o>1?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(r>0)if(++r>o)for(r-=o;r--;)a+="0";else r<o&&(a=a.slice(0,r)+"."+a.slice(r));else o>1&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&n?"-"+a:a}B.abs=function(){var e=new this.constructor(this);return e.s=1,e};B.cmp=function(e){var t,n=this,r=n.c,a=(e=new n.constructor(e)).c,o=n.s,s=e.s,i=n.e,c=e.e;if(!r[0]||!a[0])return r[0]?o:a[0]?-s:0;if(o!=s)return o;if(t=o<0,i!=c)return i>c^t?1:-1;for(s=(i=r.length)<(c=a.length)?i:c,o=-1;++o<s;)if(r[o]!=a[o])return r[o]>a[o]^t?1:-1;return i==c?0:i>c^t?1:-1};B.div=function(e){var t=this,n=t.constructor,r=t.c,a=(e=new n(e)).c,o=t.s==e.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>q)throw Error(Pe);if(!a[0])throw Error(Xe);if(!r[0])return e.s=o,e.c=[e.e=0],e;var i,c,l,p,f,m=a.slice(),u=i=a.length,d=r.length,g=r.slice(0,i),v=g.length,b=e,h=b.c=[],S=0,j=s+(b.e=t.e-e.e)+1;for(b.s=o,o=j<0?0:j,m.unshift(0);v++<i;)g.push(0);do{for(l=0;l<10;l++){if(i!=(v=g.length))p=i>v?1:-1;else for(f=-1,p=0;++f<i;)if(a[f]!=g[f]){p=a[f]>g[f]?1:-1;break}if(p<0){for(c=v==i?a:m;v;){if(g[--v]<c[v]){for(f=v;f&&!g[--f];)g[f]=9;--g[f],g[v]+=10}g[v]-=c[v]}for(;!g[0];)g.shift()}else break}h[S++]=p?l:++l,g[0]&&p?g[v]=r[u]||0:g=[r[u]]}while((u++<d||g[0]!==G)&&o--);return!h[0]&&S!=1&&(h.shift(),b.e--,j--),S>j&&ee(b,j,n.RM,g[0]!==G),b};B.eq=function(e){return this.cmp(e)===0};B.gt=function(e){return this.cmp(e)>0};B.gte=function(e){return this.cmp(e)>-1};B.lt=function(e){return this.cmp(e)<0};B.lte=function(e){return this.cmp(e)<1};B.minus=B.sub=function(e){var t,n,r,a,o=this,s=o.constructor,i=o.s,c=(e=new s(e)).s;if(i!=c)return e.s=-c,o.plus(e);var l=o.c.slice(),p=o.e,f=e.c,m=e.e;if(!l[0]||!f[0])return f[0]?e.s=-c:l[0]?e=new s(o):e.s=1,e;if(i=p-m){for((a=i<0)?(i=-i,r=l):(m=p,r=f),r.reverse(),c=i;c--;)r.push(0);r.reverse()}else for(n=((a=l.length<f.length)?l:f).length,i=c=0;c<n;c++)if(l[c]!=f[c]){a=l[c]<f[c];break}if(a&&(r=l,l=f,f=r,e.s=-e.s),(c=(n=f.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;n>i;){if(l[--n]<f[n]){for(t=n;t&&!l[--t];)l[t]=9;--l[t],l[n]+=10}l[n]-=f[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--m;return l[0]||(e.s=1,l=[m=0]),e.c=l,e.e=m,e};B.mod=function(e){var t,n=this,r=n.constructor,a=n.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(Xe);return n.s=e.s=1,t=e.cmp(n)==1,n.s=a,e.s=o,t?new r(n):(a=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=a,r.RM=o,this.minus(n.times(e)))};B.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};B.plus=B.add=function(e){var t,n,r,a=this,o=a.constructor;if(e=new o(e),a.s!=e.s)return e.s=-e.s,a.minus(e);var s=a.e,i=a.c,c=e.e,l=e.c;if(!i[0]||!l[0])return l[0]||(i[0]?e=new o(a):e.s=a.s),e;if(i=i.slice(),t=s-c){for(t>0?(c=s,r=l):(t=-t,r=i),r.reverse();t--;)r.push(0);r.reverse()}for(i.length-l.length<0&&(r=l,l=i,i=r),t=l.length,n=0;t;i[t]%=10)n=(i[--t]=i[t]+l[t]+n)/10|0;for(n&&(i.unshift(n),++c),t=i.length;i[--t]===0;)i.pop();return e.c=i,e.e=c,e};B.pow=function(e){var t=this,n=new t.constructor("1"),r=n,a=e<0;if(e!==~~e||e<-qe||e>qe)throw Error(X+"exponent");for(a&&(e=-e);e&1&&(r=r.times(t)),e>>=1,!!e;)t=t.times(t);return a?n.div(r):r};B.prec=function(e,t){if(e!==~~e||e<1||e>q)throw Error(X+"precision");return ee(new this.constructor(this),e,t)};B.round=function(e,t){if(e===G)e=0;else if(e!==~~e||e<-q||e>q)throw Error(Pe);return ee(new this.constructor(this),e+this.e+1,t)};B.sqrt=function(){var e,t,n,r=this,a=r.constructor,o=r.s,s=r.e,i=new a("0.5");if(!r.c[0])return new a(r);if(o<0)throw Error(ce+"No square root");o=Math.sqrt(+ne(r,!0,!0)),o===0||o===1/0?(t=r.c.join(""),t.length+s&1||(t+="0"),o=Math.sqrt(t),s=((s+1)/2|0)-(s<0||s&1),e=new a((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new a(o+""),s=e.e+(a.DP+=4);do n=e,e=i.times(n.plus(r.div(n)));while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return ee(e,(a.DP-=4)+e.e+1,a.RM)};B.times=B.mul=function(e){var t,n=this,r=n.constructor,a=n.c,o=(e=new r(e)).c,s=a.length,i=o.length,c=n.e,l=e.e;if(e.s=n.s==e.s?1:-1,!a[0]||!o[0])return e.c=[e.e=0],e;for(e.e=c+l,s<i&&(t=a,a=o,o=t,l=s,s=i,i=l),t=new Array(l=s+i);l--;)t[l]=0;for(c=i;c--;){for(i=0,l=s+c;l>c;)i=t[l]+o[c]*a[l-c-1]+i,t[l--]=i%10,i=i/10|0;t[l]=i}for(i?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e};B.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==G){if(e!==~~e||e<0||e>q)throw Error(Pe);for(n=ee(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return ne(n,!0,!!r)};B.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==G){if(e!==~~e||e<0||e>q)throw Error(Pe);for(n=ee(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return ne(n,!1,!!r)};B.toJSON=B.toString=function(){var e=this,t=e.constructor;return ne(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])};typeof Symbol!="undefined"&&(B[Symbol.for("nodejs.util.inspect.custom")]=B.toJSON);B.toNumber=function(){var e=+ne(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(ce+"Imprecise conversion");return e};B.toPrecision=function(e,t){var n=this,r=n.constructor,a=n.c[0];if(e!==G){if(e!==~~e||e<1||e>q)throw Error(X+"precision");for(n=ee(new r(n),e,t);n.c.length<e;)n.c.push(0)}return ne(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!a)};B.valueOf=function(){var e=this,t=e.constructor;if(t.strict===!0)throw Error(ce+"valueOf disallowed");return ne(e,e.e<=t.NE||e.e>=t.PE,!0)};var $n=en(),T=$n;var Z=require("obsidian");var x=require("obsidian");var me=require("obsidian");var je=async(e,t)=>{let n=await I("Archive bills");if(n.status==="error")return{status:"error",error:n.error};if(n.jsonData===null||n.jsonData===void 0)throw new Error("Bill is null or undefined");let r=n.jsonData.find(o=>o.id===e.bill.id);if(!r)return{status:"error",error:new Error(`Bill ${e.bill.id} not found`)};let a=t?new T(r.balance).plus(t.amount):new T(r.balance);return new T(e.amount).gt(a)?{status:"error",error:new Error(`On bill ${r.name} insufficient funds`)}:{status:"success"}},Ne=async(e,t)=>{let n=app.vault.getAbstractFileByPath(y.instance.settings.targetFolder);if(!n||!(n instanceof me.TFolder))throw new Error("Finance folder not found or is not a folder");let r=[],a=o=>{for(let s of o.children)s instanceof me.TFolder?a(s):s instanceof me.TFile&&s.name==="History.md"&&r.push(s)};a(n);for(let o of r)try{let i=(await app.vault.read(o)).match(/```json([\s\S]*?)```/);if(!i||i[1].trim().length<=2)continue;let c=JSON.parse(i[1].trim());if(!Array.isArray(c))continue;if(c.some(p=>{var f,m;return t==="plan"?((f=p==null?void 0:p.category)==null?void 0:f.id)===e:t==="bill"?((m=p==null?void 0:p.bill)==null?void 0:m.id)===e:!1}))return!0}catch(s){console.error(`Error processing file: ${o.path}`,s)}return!1};var nn=async(e,t)=>{let n=await D("History");if(n.status==="error")return{status:"error",error:n.error};if(!n.jsonData)return{status:"error",error:new Error("Error with data history")};if(!n.content)return{status:"error",error:new Error("Error with content history")};if(!n.file)return{status:"error",error:new Error("Error with file history")};if(e.type==="expense"){let r=await je(e,t);if(r.status==="error")return{status:"error",error:r.error}}if(e.type==="expense"){let r=await oe(e,"edit",t);if(r.status==="error")return{status:"error",error:r.error}}else if(e.type==="income"){let r=await ie(e,"edit",t);if(r.status==="error")return{status:"error",error:r.error}}else return{status:"error",error:new Error("The specified type is not suitable")};try{let r=n.jsonData.map(s=>s.id===e.id?{...s,...e}:s),a=JSON.stringify(r,null,4),o=n.content.replace(/```json[\s\S]*?```/,"```json\n"+a+"\n```");return await y.instance.app.vault.modify(n.file,o),{status:"success"}}catch(r){return{status:"error",error:new Error(`Failed to editing JSON to history: ${r}`)}}},tn=async e=>{let t={expense:()=>D("Expenditure plan"),income:()=>D("Income plan")};try{let n=t[e.type];if(!n)return{status:"error",error:new Error("Element not found")};let r=await n();if(r.status==="error")return{status:"error",error:r.error};if(!r.jsonData)return{status:"error",error:new Error("jsonData is null or undefined")};if(!r.file)return{status:"error",error:new Error("History file is null or undefined")};if(!r.content)return{status:"error",error:new Error("History content is null or undefined")};let a=r.jsonData.map(i=>i.id===e.id?{...i,...e}:i),o=JSON.stringify(a,null,4)+"\n```",s=r.content.replace(/```json[\s\S]*?```/,"```json\n"+o);if(await y.instance.app.vault.modify(r.file,s),e.type==="expense")await W();else if(e.type==="income")await Q();else return{status:"error",error:new Error("The specified type is not suitable")};return{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to editing JSON to plan: ${n}`)}}},rn=async e=>{e.balance===""&&(e.balance="0");let t=await I("Archive bills");if(t.status==="error")return{status:"error",error:t.error};if(!t.jsonData)return{status:"error",error:new Error("Error with data bill")};if(!t.content)return{status:"error",error:new Error("Error with content bill")};if(!t.file)return{status:"error",error:new Error("Error with file bill")};try{let n=t.jsonData.map(o=>o.id===e.id?{...o,...e}:o),r=JSON.stringify(n,null,4)+"\n```",a=t.content.replace(/```json[\s\S]*?```/,"```json\n"+r);return await y.instance.app.vault.modify(t.file,a),{status:"success"}}catch(n){return{status:"error",error:new Error(`Failed to editing JSON to bill: ${n}`)}}},ue=async(e,t,n)=>{try{let r=JSON.stringify(e,null,4),a=n.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await y.instance.app.vault.modify(t,a),{status:"success"}}catch(r){return{status:"error",error:new Error(`Error update ${t.name}: ${r}`)}}};T.DP=2;T.RM=T.roundHalfUp;var oe=async(e,t,n)=>{let r=new T(e.amount),a=await I("Archive bills");if(a.status==="error")return{status:"error",error:a.error};if(a.jsonData===void 0||a.jsonData===null)return{status:"error",error:new Error("Bill jsonData is undefined")};let o=await D("Expenditure plan");if(o.status==="error")return{status:"error",error:o.error};if(o.jsonData===void 0||o.jsonData===null)return{status:"error",error:new Error("Plan jsonData is undefined")};let s=a.jsonData,i=o.jsonData,c=async()=>{if(a.file===void 0)return{status:"error",error:new Error("Bill file is undefined")};if(a.content===void 0)return{status:"error",error:new Error("Bill content is undefined")};if(o.file===void 0)return{status:"error",error:new Error("Plan file is undefined")};if(o.content===void 0)return{status:"error",error:new Error("Plan content is undefined")};let m=await ue(s,a.file,a.content);if(m.status==="error")return{status:"error",error:m.error};let u=await ue(i,o.file,o.content);return u.status==="error"?{status:"error",error:u.error}:{status:"success"}},l=(m,u)=>{s=s.map(d=>d.id===m?{...d,balance:new T(d.balance).plus(u).toFixed(2)}:d)},p=(m,u)=>{i=i.map(d=>d.id===m?{...d,amount:new T(d.amount).plus(u).toFixed(2)}:d)},f=async()=>{if(!n)return{status:"error",error:new Error("Old data is required for edit")};let m=new T(n.amount);l(n.bill.id,m),p(n.category.id,m.times(-1)),await c();let u=await I("Archive bills"),d=await D("Expenditure plan");return u.status==="error"?{status:"error",error:u.error}:d.status==="error"?{status:"error",error:d.error}:!u.jsonData||!d.jsonData?{status:"error",error:new Error("Reload data error")}:(s=u.jsonData,i=d.jsonData,l(e.bill.id,r.times(-1)),p(e.category.id,r),await c())};switch(t){case"add":return l(e.bill.id,r.times(-1)),p(e.category.id,r),await c();case"remove":return l(e.bill.id,r),p(e.category.id,r.times(-1)),await c();case"edit":return await f();default:return{status:"error",error:new Error("Invalid modifier")}}},ie=async(e,t,n)=>{let r=new T(e.amount),a=await I("Archive bills");if(a.status==="error")return{status:"error",error:a.error};if(a.jsonData===void 0||a.jsonData===null)return{status:"error",error:new Error("Bill jsonData is undefined")};let o=await D("Income plan");if(o.status==="error")return{status:"error",error:o.error};if(o.jsonData===void 0||o.jsonData===null)return{status:"error",error:new Error("Plan jsonData is undefined")};let s=a.jsonData,i=o.jsonData,c=async()=>{if(a.file===void 0)return{status:"error",error:new Error("Bill file is undefined")};if(a.content===void 0)return{status:"error",error:new Error("Bill content is undefined")};if(o.file===void 0)return{status:"error",error:new Error("Plan file is undefined")};if(o.content===void 0)return{status:"error",error:new Error("Plan content is undefined")};let m=await ue(s,a.file,a.content);if(m.status==="error")return{status:"error",error:m.error};let u=await ue(i,o.file,o.content);return u.status==="error"?{status:"error",error:u.error}:{status:"success"}},l=(m,u)=>{s=s.map(d=>d.id===m?{...d,balance:new T(d.balance).plus(u).toFixed(2)}:d)},p=(m,u)=>{i=i.map(d=>d.id===m?{...d,amount:new T(d.amount).plus(u).toFixed(2)}:d)},f=async()=>{if(!n)return{status:"error",error:new Error("Old data is required for edit")};let m=new T(n.amount);l(n.bill.id,m.times(-1)),p(n.category.id,m.times(-1)),await c();let u=await I("Archive bills"),d=await D("Income plan");return u.status==="error"?{status:"error",error:u.error}:d.status==="error"?{status:"error",error:d.error}:!u.jsonData||!d.jsonData?{status:"error",error:new Error("Reload data error")}:(s=u.jsonData,i=d.jsonData,l(e.bill.id,r),p(e.category.id,r),await c())};switch(t){case"add":return l(e.bill.id,r),p(e.category.id,r),await c();case"remove":return l(e.bill.id,r.times(-1)),p(e.category.id,r.times(-1)),await c();case"edit":return await f();default:return{status:"error",error:new Error("Invalid modifier")}}},an=async e=>{if(e.fromBillId===e.toBillId)return{status:"error",error:new Error("Cannot transfer to the same bill")};let t=await I("Archive bills");if(t.status==="error")return{status:"error",error:t.error};if(!t.jsonData||!t.file||!t.content)return{status:"error",error:new Error("Archive bills data is incomplete")};let n=t.jsonData.find(m=>m.id===e.fromBillId),r=t.jsonData.find(m=>m.id===e.toBillId);if(!n||!r)return{status:"error",error:new Error("One or both bills not found")};let a=new T(n.balance),o=new T(r.balance),s,i;if(e.type==="same-currency"?(s=new T(e.amount),i=s):(s=new T(e.sourceAmount),i=new T(e.targetAmount)),s.gt(a))return{status:"error",error:new Error(`Insufficient funds in bill ${n.name}`)};let c=a.minus(s),l=o.plus(i),p=t.jsonData.map(m=>m.id===n.id?{...m,balance:c.toFixed(2)}:m.id===r.id?{...m,balance:l.toFixed(2)}:m),f=t.content.replace(/```json[\s\S]*?```/,`\`\`\`json
${JSON.stringify(p,null,4)}
\`\`\``);try{return await y.instance.app.vault.modify(t.file,f),{status:"success"}}catch(m){return{status:"error",error:new Error(`Error tranfer berween bills: ${m}`)}}};var on=async e=>{if(e.type==="expense"){let n=await je(e);if(n.status==="error")return{status:"error",error:n.error}}let t=await D("History");if(t.status==="error")return{status:"error",error:t.error};if(e.type==="expense"){let n=await oe(e,"add");if(n.status==="error")return{status:"error",error:n.error}}else if(e.type==="income"){let n=await ie(e,"add");if(n.status==="error")return{status:"error",error:n.error}}else return{status:"error",error:new Error("The specified type is not suitable")};if(t.content===void 0)throw new Error("content is undefined");if(t.file===void 0)throw new Error("file is undefined");try{if(t.jsonData==null){let n=JSON.stringify([e],null,4)+"\n```",r=t.content.replace(/\\```$/,n);return await y.instance.app.vault.modify(t.file,r),{status:"success"}}else if(t.jsonData.length>=1){let n=JSON.stringify([e],null,4)+"]\n```",r=t.content.lastIndexOf("}"),a=t.content.slice(0,r+1)+`,
`+n.replace(/\[/,"").replace(/\]/,"");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}else throw new Error("jsonData has an unexpected format")}catch(n){return{status:"error",error:new Error(`Failed to add JSON to history: ${n}`)}}},sn=async e=>e.type==="expense"?await Fn(e):e.type==="income"?await An(e):{status:"error",error:new Error("The specified type is not suitable")};async function Fn(e){let t=await D("Expenditure plan");if(t.status==="error")return{status:"error",error:t.error};if(t.jsonData===void 0)return{status:"error",error:new Error("Archive bills is null or undefined")};if(t.content===null||t.content===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};if(t.file===null||t.file===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};try{if(t.jsonData===null){let n=JSON.stringify([e],null,4)+"\n```",r=t.content.replace(/\\```$/,n);await y.instance.app.vault.modify(t.file,r);let a=await W();return a.status==="error"?{status:"error",error:a.error}:{status:"success"}}else if(t.jsonData.length>=1){let n=JSON.stringify([e],null,4)+"]\n```",r=t.content.lastIndexOf("}"),a=t.content.slice(0,r+1)+`,
`+n.replace(/\[/,"").replace(/\]/,"");await y.instance.app.vault.modify(t.file,a);let o=await W();return o.status==="error"?{status:"error",error:o.error}:{status:"success"}}else return{status:"error",error:new Error("Error with jsonData expenditure plan")}}catch(n){return{status:"error",error:new Error(`Error creating expediture plans: ${n}`)}}}async function An(e){let t=await D("Income plan");if(t.status==="error")return{status:"error",error:t.error};if(t.jsonData===void 0)return{status:"error",error:new Error("Archive bills is null or undefined")};if(t.content===null||t.content===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};if(t.file===null||t.file===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};try{if(t.jsonData===null){let n=JSON.stringify([e],null,4)+"\n```",r=t.content.replace(/\\```$/,n);return await y.instance.app.vault.modify(t.file,r),(await Q()).status==="error"?{status:"error",error:new Error("Error archiving income plan")}:{status:"success"}}else if(t.jsonData.length>=1){let n=JSON.stringify([e],null,4)+"]\n```",r=t.content.lastIndexOf("}"),a=t.content.slice(0,r+1)+`,
`+n.replace(/\[/,"").replace(/\]/,"");return await y.instance.app.vault.modify(t.file,a),(await Q()).status==="error"?{status:"error",error:new Error("Error archiving income plan")}:{status:"success"}}else return{status:"error",error:new Error("Error with jsonData income plan")}}catch(n){return{status:"error",error:new Error(`Error creating income plans: ${n}`)}}}var ln=async e=>{e.balance===""&&(e.balance="0");let t=await I("Archive bills");if(t.status==="error")return{status:"error",error:t.error};if(t.jsonData===void 0)return{status:"error",error:new Error("Archive bills is null or undefined")};if(t.content===null||t.content===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};if(t.file===null||t.file===void 0)return{status:"error",error:new Error("Archive bills content is null or undefined")};try{if(t.jsonData===null){let n=JSON.stringify([e],null,4)+"\n```",r=t.content.replace(/\\```$/,n);return await y.instance.app.vault.modify(t.file,r),{status:"success"}}else if(t.jsonData.length>=1){let n=JSON.stringify([e],null,4)+"]\n```",r=t.content.lastIndexOf("}"),a=t.content.slice(0,r+1)+`,
`+n.replace(/\[/,"").replace(/\]/,"");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}else return{status:"error",error:new Error("Error with jsonData bills")}}catch(n){return{status:"error",error:new Error(`Error creating bills: ${n}`)}}};var cn=async()=>{let e=await I("Archive bills");if(e.status==="error"){new x.Notice(e.error.message),console.error(e.error);return}if(e.jsonData===void 0){new x.Notice("Bills is undefined"),console.error("Bills is null or undefined");return}if(e.jsonData===null)return new x.Notice("Add a bill");let t=await D("Expenditure plan");if(t.status==="error"){new x.Notice(t.error.message),console.error(t.error);return}if(t.jsonData===void 0){new x.Notice("Expenditure plan is undefined"),console.error("Expenditure plan is undefined");return}if(t.jsonData===null)return new x.Notice("Add a expenditure plan");let n=await D("Income plan");if(n.status==="error"){new x.Notice(n.error.message),console.error(n.error);return}if(n.jsonData===void 0){new x.Notice("Income plan is undefined"),console.error("Income plan is undefined");return}if(n.jsonData===null)return new x.Notice("Add a income plan");let r=await D("History");if(r.status==="error"){new x.Notice(r.error.message),console.error(r.error);return}if(r.jsonData===void 0){new x.Notice("History is undefined"),console.error("History is undefined");return}let{contentEl:a}=E.instance,{selectedYear:o,selectedMonth:s}=A();a.empty(),a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Operation"});let c=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,x.setIcon)(c,"arrow-left"),c.addEventListener("click",()=>{E.instance.onOpen()});let l=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}),p,f=l.createEl("div",{cls:"main-form_radio"}),m=f.createEl("button",{text:"Expense",cls:"main-radio_exprense",attr:{"data-radio":"expense",type:"button"}});m.dataset.radio==="expense"&&(p=m.dataset.radio,m.addClass("main-radion-button--active"));let u=f.createEl("button",{text:"Income",cls:"main-radio_income",attr:{"data-radio":"income",type:"button"}});u.addEventListener("click",()=>{u.dataset.radio==="income"&&(m.removeClass("main-radion-button--active"),u.addClass("main-radion-button--active"),p=u.dataset.radio,h(),g.focus())}),m.addEventListener("click",()=>{m.dataset.radio==="expense"&&(u.removeClass("main-radion-button--active"),m.addClass("main-radion-button--active"),p=m.dataset.radio,h(),g.focus())});let d=l.createEl("div",{cls:"main-form-input"}),g=d.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",inputmode:"decimal"}});g.focus();let v=d.createEl("select",{cls:"form-selects",attr:{name:"select-bills",id:"select-bills"}});if(e.jsonData.some(P=>P.generalBalance===!0)){let P=document.createElement("optgroup");P.label="Main",e.jsonData.forEach(O=>{if(O.generalBalance){let $=document.createElement("option");$.value=O.id,$.textContent=`${O.emoji} ${O.name} \u2022 ${O.balance} ${N(O.currency)}`,P.appendChild($)}}),v.appendChild(P)}if(e.jsonData.some(P=>P.generalBalance===!1)){let P=document.createElement("optgroup");P.label="Additional",e.jsonData.forEach(O=>{if(!O.generalBalance){let $=document.createElement("option");$.value=O.id,$.textContent=`${O.emoji} ${O.name} \u2022 ${O.balance} ${N(O.currency)}`,P.appendChild($)}}),v.appendChild(P)}if(r.jsonData===null)e.jsonData.sort((P,O)=>Number(O.balance)-Number(P.balance)),v.value=e.jsonData[0].id;else{let P={};r.jsonData.forEach(H=>{let L=H.bill.id;P[L]=(P[L]||0)+1});let O=0,$=null;for(let H in P)P[H]>O?(O=P[H],$=H):P[H]===O&&(e.jsonData.sort((L,z)=>Number(z.balance)-Number(L.balance)),v.value=e.jsonData[0].id);let re=e.jsonData.sort((H,L)=>H.id===$?-1:L.id===$?1:0);v.value=re[0].id}let b=d.createEl("select",{cls:"form-selects",attr:{name:"select-category",id:"select-category"}});h();function h(){if(t.status==="error"){new x.Notice(t.error.message),console.error(t.error);return}if(n.status==="error"){new x.Notice(n.error.message),console.error(n.error);return}p==="expense"?(b.empty(),t.jsonData&&(t.jsonData.sort((P,O)=>Number(O.amount)-Number(P.amount)),t.jsonData.forEach(P=>{b.createEl("option",{text:`${P.emoji} ${P.name} \u2022 ${P.amount} ${N(y.instance.settings.baseCurrency)}`,attr:{value:P.id}})}))):(b.empty(),n.jsonData&&(n.jsonData.sort((P,O)=>Number(O.amount)-Number(P.amount)),n.jsonData.forEach(P=>{b.createEl("option",{text:`${P.emoji} ${P.name} \u2022 ${P.amount} ${N(y.instance.settings.baseCurrency)}`,attr:{value:P.id}})})))}let S=d.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}}),j=d.createEl("select",{cls:"form-selects",attr:{name:"select-date",id:"select-date"}});be(j);let M=Date.now()-new Date(new Date().getFullYear(),new Date().getMonth(),0).getTime()>3*24*60*60*1e3,F=Date.now()-new Date(new Date().getFullYear(),new Date().getMonth(),0).getTime()>2*24*60*60*1e3,R=d.createEl("div",{cls:"form-selects-date-buttons"});o===null&&s===null&&F&&(R.createEl("button",{text:"Today",attr:{type:"button"}}).addEventListener("click",()=>{ve(j,0)}),R.createEl("button",{text:"Yesterday",attr:{type:"button"}}).addEventListener("click",()=>{ve(j,-1)})),o===null&&s===null&&M&&R.createEl("button",{text:"The day before yesterday",attr:{type:"button"}}).addEventListener("click",()=>{ve(j,-2)}),d.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async P=>{if(P.preventDefault(),!(Number(g.value)>=1))return g.focus(),new x.Notice("Enter the amount");let O=await K(v.value,"Archive bills");if(O.status==="error"){new x.Notice(O.error.message),console.error(O.error);return}if(O.item.currency!==y.instance.settings.baseCurrency)return new x.Notice("I apologize, but for now you can only add transactions to accounts in the base currency.");let $={id:String(Se()),amount:String(g.value),bill:{id:v.value},category:{id:b.value},comment:S.value.trim(),date:`${j.value}T${Qe()}`,type:p},re=await on($);re.status==="success"?setTimeout(()=>{E.instance.onOpen(),new x.Notice("Operation added")},100):(new x.Notice(re.error.message),console.error(re.error))})},mn=()=>{let{contentEl:e}=E.instance;e.empty();let t=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,x.setIcon)(t,"arrow-left"),t.addEventListener("click",()=>{E.instance.onOpen()}),e.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let r=e.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}),a,o=r.createEl("div",{cls:"main-form_radio"}),s=o.createEl("button",{text:"Expense",cls:"main-radio_exprense",attr:{"data-radio":"expense",type:"button"}});s.dataset.radio==="expense"&&(a=s.dataset.radio,s.addClass("main-radion-button--active"));let i=o.createEl("button",{text:"Income",cls:"main-radio_income",attr:{"data-radio":"income",type:"button"}});i.addEventListener("click",()=>{i.dataset.radio==="income"&&(s.removeClass("main-radion-button--active"),i.addClass("main-radion-button--active"),a=i.dataset.radio,l.focus())}),s.addEventListener("click",()=>{s.dataset.radio==="expense"&&(i.removeClass("main-radion-button--active"),s.addClass("main-radion-button--active"),a=s.dataset.radio,l.focus())});let c=r.createEl("div",{cls:"main-form-input"}),l=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text"}});l.focus();let p=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text"}});p.addEventListener("input",()=>{let u=p.value,g=Array.from(u).filter(v=>/\p{Extended_Pictographic}/u.test(v));p.value=g.slice(0,1).join("")});let f=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}});c.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async u=>{if(u.preventDefault(),!l.value)return l.focus(),new x.Notice("Enter the name");let d={id:String(Se()),name:l.value.trim(),emoji:p.value,amount:"0",comment:f.value.trim(),type:a},g=await sn(d);g.status==="success"?setTimeout(()=>{E.instance.onOpen(),new x.Notice("The plan has been added.")},100):(new x.Notice(g.error.message),console.error(g.error))})},un=()=>{let{contentEl:e}=E.instance;e.empty();let t=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,x.setIcon)(t,"arrow-left"),t.addEventListener("click",()=>{E.instance.onOpen()}),e.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let a=e.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),o=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text"}});o.focus();let s=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text"}});s.addEventListener("input",()=>{let b=s.value,S=Array.from(b).filter(j=>/\p{Extended_Pictographic}/u.test(j));s.value=S.slice(0,1).join("")});let i=a.createEl("select",{cls:"form-selects",attr:{name:"select-currency",id:"select-currency"}}),{popularCurrencies:c,otherCurrencies:l}=he(),p=document.createElement("optgroup");p.label="Popular",c.forEach(b=>{let h=document.createElement("option");h.value=b.code,h.textContent=`${b.code} \u2022 ${b.name} \u2022 ${b.symbol}`,p.appendChild(h)});let f=document.createElement("optgroup");f.label="All currencies",l.forEach(b=>{let h=document.createElement("option");h.value=b.code,h.textContent=`${b.code} ${b.name} \u2022 ${b.symbol}`,f.appendChild(h)}),i.appendChild(p),i.appendChild(f),i.value=y.instance.settings.baseCurrency;let m=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Current balance",id:"input-current-balance",type:"number",inputmode:"decimal"}}),u=a.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text"}}),d=a.createEl("div",{cls:"form-checkbox-div"}),g=d.createEl("input",{cls:"form-checkbox",attr:{id:"input-checkbox",type:"checkbox",checked:!0}});d.createEl("span",{text:"Take into account in the general balance",cls:"form-text"}),i.addEventListener("change",()=>{i.value!==y.instance.settings.baseCurrency?(g.checked=!1,d.style.display="none"):(d.style.display="flex",g.checked=!0)}),a.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async b=>{if(b.preventDefault(),!o.value)return o.focus(),new x.Notice("Enter the name");let h={id:String(Se()),name:o.value.trim(),emoji:s.value,balance:String(m.value).trim(),currency:i.value,generalBalance:g.checked,comment:u.value.trim()},S=await ln(h);S.status==="success"?setTimeout(()=>{E.instance.onOpen(),new x.Notice("The bill has been added.")},100):(new x.Notice(S.error.message),console.error(S.error))})};var w=require("obsidian");var dn=async e=>{if(e==null)return{status:"error",error:new Error("Element is null or undefined")};let t=await D("History");if(t.status==="error")return{status:"error",error:t.error};if(t.file===null||t.file===void 0)return{status:"error",error:new Error("History file is null or undefined")};if(t.content===null||t.content===void 0)return{status:"error",error:new Error("History content is null or undefined")};if(t.jsonData===null||t.jsonData===void 0)return{status:"error",error:new Error("History data is null or undefined")};if(e.type==="expense"){let n=await oe(e,"remove");if(n.status==="error")return{status:"error",error:n.error}}else if(e.type==="income"){let n=await ie(e,"remove");if(n.status==="error")return{status:"error",error:n.error}}else return{status:"error",error:new Error("Unknown transaction type")};if(t.jsonData.length<=1)try{let n=t.content.replace(/```json[\s\S]*?```/,"```json\n```");return await y.instance.app.vault.modify(t.file,n),{status:"success"}}catch(n){return{status:"error",error:new Error(`Error deleting item: ${n}`)}}else try{let n=t.jsonData.filter(o=>o.id!==e.id),r=JSON.stringify(n,null,4),a=t.content.replace(/```json[\s\S]*?```/,"```json\n"+r+"\n```");return await y.instance.app.vault.modify(t.file,a),{status:"success"}}catch(n){return{status:"error",error:new Error(`Error deleting item: ${n}`)}}},fn=async e=>{let{id:t,name:n,emoji:r,type:a}=e;if(!t)return{status:"error",error:new Error("Element not found")};let o={expense:()=>D("Expenditure plan"),income:()=>D("Income plan")};try{let s=o[a];if(!s)return{status:"error",error:new Error("Element not found")};let i=await s();if(i.status==="error")return{status:"error",error:i.error};if(i.file===null||i.file===void 0)return{status:"error",error:new Error("History file is null or undefined")};if(i.content===null||i.content===void 0)return{status:"error",error:new Error("History content is null or undefined")};if(i.jsonData===null||i.jsonData===void 0)return{status:"error",error:new Error("History data is null or undefined")};if(await Ne(t,"plan"))return{status:"error",error:new Error(`The category ${r} \u2022 ${n} cannot be deleted because it is used in history.`)};let c;if(i.jsonData.length<=1)c=i.content.replace(/```json[\s\S]*?```/,"```json\n```");else if(i.jsonData.length>=2){let l=i.jsonData.filter(f=>f.id!==t),p=JSON.stringify(l,null,4);c=i.content.replace(/```json[\s\S]*?```/,"```json\n"+p+"\n```")}else c="Error";if(c==="Error")return{status:"error",error:new Error("Error with create new content")};if(await y.instance.app.vault.modify(i.file,c),a==="expense"){let l=await W();if(l.status==="error")return{status:"error",error:l.error}}else if(a==="income"){let l=await Q();if(l.status==="error")return{status:"error",error:l.error}}else return{status:"error",error:new Error("The plan has an invalid type.")};return{status:"success"}}catch(s){return{status:"error",error:new Error(`Error deleting item: ${s}`)}}},pn=async e=>{let{id:t,name:n,emoji:r}=e;if(!t)return{status:"error",error:new Error("Element not found")};let a=await I("Archive bills");if(a.status==="error")return{status:"error",error:a.error};if(!a.jsonData)return{status:"error",error:new Error("jsonData is null or undefined")};if(!a.file)return{status:"error",error:new Error("History file is null or undefined")};if(!a.content)return{status:"error",error:new Error("History content is null or undefined")};try{if(await Ne(t,"bill"))return{status:"error",error:new Error(`The bill ${r} \u2022 ${n} cannot be deleted because it is in use in history.`)};let o;if(a.jsonData.length<=1)o=a.content.replace(/```json[\s\S]*?```/,"```json\n```");else if(a.jsonData.length>=2){let s=a.jsonData.filter(c=>c.id!==t),i=JSON.stringify(s,null,4);o=a.content.replace(/```json[\s\S]*?```/,"```json\n"+i+"\n```")}else o="Error";return o==="Error"?{status:"error",error:new Error("Error with create new content")}:(await y.instance.app.vault.modify(a.file,o),{status:"success"})}catch(o){return{status:"error",error:new Error(`Error deleting item: ${o}`)}}};var $e=async e=>{var b;let{id:t}=e.target.closest("li").dataset;if(!t)return"Element not found";let n=await K(t,"History");if(n.status==="error"){new w.Notice(n.error.message),console.error(n.error);return}let{contentEl:r}=E.instance;r.empty(),r.createEl("div",{cls:"main-header"}).createEl("h1",{text:"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F"});let o=r.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,w.setIcon)(o,"arrow-left"),o.addEventListener("click",()=>{E.instance.onOpen()});let s=r.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,w.setIcon)(s,"trash-2"),s.addEventListener("click",async()=>{let h=await dn(n.item);h.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("The operation is remote.")},100):(new w.Notice(h.error.message),console.error(h.error))});let c=r.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),l=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",value:n.item.amount,inputmode:"decimal"}}),p=c.createEl("select",{cls:"form-selects",attr:{name:"select-bills",id:"select-bills"}}),f=await I("Archive bills");if(f.status==="error"){new w.Notice(f.error.message),console.error(f.error);return}if(f.jsonData===null||f.jsonData===void 0)throw new Error("Bill is null or undefined");if(f.jsonData.some(h=>h.generalBalance===!0)){let h=document.createElement("optgroup");h.label="Main",f.jsonData.forEach(S=>{if(S.generalBalance){let j=document.createElement("option");j.value=S.id,j.textContent=`${S.emoji} ${S.name} \u2022 ${S.balance} ${N(S.currency)}`,h.appendChild(j)}}),p.appendChild(h)}if(f.jsonData.some(h=>h.generalBalance===!1)){let h=document.createElement("optgroup");h.label="Additional",f.jsonData.forEach(S=>{if(!S.generalBalance){let j=document.createElement("option");j.value=S.id,j.textContent=`${S.emoji} ${S.name} \u2022 ${S.balance} ${N(S.currency)}`,h.appendChild(j)}}),p.appendChild(h)}p.value=n.item.bill.id;let m=c.createEl("select",{cls:"form-selects",attr:{name:"select-category",id:"select-category"}});u();async function u(){if(n.status==="error"){new w.Notice(n.error.message),console.error(n.error);return}if(n.item.type==="expense"){m.empty();let h=await D("Expenditure plan");if(h.status==="error"){new w.Notice(h.error.message),console.error(h.error);return}if(h.jsonData===null||h.jsonData===void 0)throw new Error("Expenditure plan is null or undefined");h.jsonData.sort((S,j)=>Number(j.amount)-Number(S.amount)),h.jsonData.forEach(S=>{if(S.id===n.item.category.id){m.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(y.instance.settings.baseCurrency)}`,attr:{value:S.id,selected:"selected"}});return}m.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(y.instance.settings.baseCurrency)}`,attr:{value:S.id}})})}else if(n.item.type==="income"){m.empty();let h=await D("Income plan");if(h.status==="error"){new w.Notice(h.error.message),console.error(h.error);return}if(h.jsonData===null||h.jsonData===void 0)throw new Error("Expenditure plan is null or undefined");h.jsonData.sort((S,j)=>Number(j.amount)-Number(S.amount)),h.jsonData.forEach(S=>{if(S.id===n.item.category.id){m.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(y.instance.settings.baseCurrency)}`,attr:{value:S.id,selected:"selected"}});return}m.createEl("option",{text:`${S.emoji} ${S.name} \u2022 ${S.amount} ${N(y.instance.settings.baseCurrency)}`,attr:{value:S.id}})})}else return"Error category type"}let d=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:(b=n.item.comment)!=null?b:""}}),g=c.createEl("select",{cls:"form-selects",attr:{name:"select-date",id:"select-date"}});be(g,n.item.date),g.value=n.item.date.split("T")[0],c.createEl("button",{text:"Safe",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async h=>{if(h.preventDefault(),!(Number(l.value)>=1))return l.focus(),new w.Notice("Enter the amount");let S=await K(p.value,"Archive bills");if(S.status==="error"){new w.Notice(S.error.message),console.error(S.error);return}if(S.item.currency!==y.instance.settings.baseCurrency)return new w.Notice("I apologize, but for now you can only add transactions to accounts in the base currency.");let j={id:n.item.id,amount:String(l.value),bill:{id:p.value},category:{id:m.value},comment:d.value,date:`${g.value}T${n.item.date.split("T")[1]}`,type:n.item.type},M=await nn(j,n.item);M.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("Operation changed")},100):(new w.Notice(M.error.message),console.error(M.error))})},Fe=async e=>{var g,v;let{id:t,type:n}=e.target.closest("li").dataset;if(!t)return"Element not found";let r=await K(t,n);if(r.status==="error"){new w.Notice(r.error.message),console.error(r.error);return}let{contentEl:a}=E.instance;a.empty();let o=a.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,w.setIcon)(o,"arrow-left"),o.addEventListener("click",()=>{E.instance.onOpen()});let s=a.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,w.setIcon)(s,"trash-2"),s.addEventListener("click",async()=>{let b=await fn(r.item);b.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("The plan has been removed.")},100):(new w.Notice(b.error.message),console.error(b.error))}),a.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let l=a.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),p=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text",value:r.item.name}}),f=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text",value:(g=r.item.emoji)!=null?g:""}});f.addEventListener("input",()=>{let b=f.value,S=Array.from(b).filter(j=>/\p{Extended_Pictographic}/u.test(j));f.value=S.slice(0,1).join("")});let m=l.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:(v=r.item.comment)!=null?v:""}});l.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async b=>{if(b.preventDefault(),!p.value)return p.focus(),new w.Notice("Enter the name");let h={id:r.item.id,name:p.value.trim(),emoji:f.value,amount:r.item.amount,comment:m.value.trim(),type:r.item.type},S=await tn(h);S.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("The plan has been edited.")},100):(new w.Notice(S.error.message),console.error(S.error))});let d=await D("History");if(d.status==="error"){new w.Notice(d.error.message),console.error(d.error);return}if(d.jsonData===void 0)throw new Error("History is undefined");if(d.jsonData!==null){let b=d.jsonData.filter(F=>F.category.id===t);if(b.length<1)return;let h=new Date,j=Object.values(b.reduce((F,R)=>{let Y=R.date.split("T")[0];return F[Y]||(F[Y]=[]),F[Y].push(R),F},{})).sort((F,R)=>new Date(R[0].date).getTime()-new Date(F[0].date).getTime()).map(F=>F.sort((R,Y)=>Math.abs(new Date(R.date).getTime()-h)-Math.abs(new Date(Y.date).getTime()-h)));a.createEl("h1",{text:"History of the plan"});let M=a.createEl("div",{cls:"history-plan"});j.forEach((F,R)=>{let Y=M.createEl("div",{cls:"history-block"}),P=Y.createEl("div",{cls:"full-data-block"});P.createEl("p",{text:we(F[0].date.split("T")[0])}),P.createEl("span",{text:Ee(F)});let O=Y.createEl("ul",{cls:"data-list"});F.forEach(async($,re)=>{let H=O.createEl("li",{cls:"data-item",attr:{"data-id":$.id}});H.onclick=async Sn=>{await $e(Sn)};let L=await K($.category.id,$.type);if(L.status==="error"){new w.Notice(L.error.message),console.error(L.error);return}let z=await K($.bill.id,"Archive bills");if(z.status==="error"){new w.Notice(z.error.message),console.error(z.error);return}let Ke=H.createEl("div",{cls:"data-link"}),Je=Ke.createEl("div",{cls:"data-link-emoji"}),fe=Ke.createEl("div",{cls:"data-link-text"});Je.createEl("p",{text:`${L.item.emoji}`}),Je.createEl("span",{text:`${z.item.emoji}`}),$.comment===""?(fe.createEl("p",{text:`${L.item.name}`}),fe.createEl("span",{text:`${z.item.name}`})):(fe.createEl("p",{text:`${$.comment}`}),fe.createEl("span",{text:`${L.item.name} \u2022 ${z.item.name}`})),H.createEl("div",{cls:"data-link"}).createEl("p",{text:`${De($.amount,$.type)} ${N(z.item.currency)}`})})})}},Ae=async e=>{var b,h;let{id:t}=e.target.closest("li").dataset;if(!t)return"Element not found";let n=await K(t,"Archive bills");if(n.status==="error"){new w.Notice(n.error.message),console.error(n.error);return}let{contentEl:r}=E.instance;r.empty();let a=r.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,w.setIcon)(a,"arrow-left"),a.addEventListener("click",()=>{E.instance.onOpen()});let o=r.createEl("div",{cls:"delete-button",attr:{id:"delete-button"}});(0,w.setIcon)(o,"trash-2"),o.addEventListener("click",async()=>{let S=await pn(n.item);S.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("The bill has been removed.")},100):(new w.Notice(S.error.message),console.error(S.error))}),r.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Categories"});let c=r.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),l=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Name",id:"input-name",type:"text",value:n.item.name}}),p=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Emoji",id:"input-emoji",type:"text",value:(b=n.item.emoji)!=null?b:""}});p.addEventListener("input",()=>{let S=p.value,M=Array.from(S).filter(F=>/\p{Extended_Pictographic}/u.test(F));p.value=M.slice(0,1).join("")});let f=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Current balance",id:"input-current-balance",type:"number",value:n.item.balance,inputmode:"decimal"}}),m=c.createEl("input",{cls:"form-inputs",attr:{placeholder:"Note",id:"input-comment",type:"text",value:(h=n.item.comment)!=null?h:""}}),u=await I("Archive bills");if(u.status==="error"){new w.Notice(u.error.message),console.error(u.error);return}if(u.jsonData===null||u.jsonData===void 0)throw new Error("Bills is null or undefined");if(u.jsonData.length>1){let S=c.createEl("div",{cls:"form-transfer-expense-div"});(0,w.setIcon)(S,"upload"),S.createEl("span",{text:"Transactions between bills",cls:"form-text-transfer"}),S.addEventListener("click",async()=>{await kn(n.item.id)})}let d=c.createEl("div",{cls:"form-checkbox-div"});n.item.currency!==y.instance.settings.baseCurrency&&(d.style.display="none");let g=d.createEl("input",{cls:"form-checkbox",attr:{id:"input-checkbox",type:"checkbox",checked:n.item.generalBalance?"checked":null}});d.createEl("span",{text:"Take into account in the general balance",cls:"form-text"}),c.createEl("button",{text:"Add",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async()=>{if(e.preventDefault(),!l.value)return l.focus(),new w.Notice("Enter the name");let S={id:n.item.id,name:l.value.trim(),emoji:p.value,balance:String(f.value.trim()),currency:n.item.currency,generalBalance:g.checked,comment:m.value.trim()},j=await rn(S);j.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("The bill has been edited.")},100):(new w.Notice(j.error.message),console.error(j.error))})},kn=async e=>{if(!e)return"Element not found";let t=await I("Archive bills");if(t.status==="error"){new w.Notice(t.error.message),console.error(t.error);return}if(!t.jsonData)return"Bill is null or undifined";let{contentEl:n}=E.instance;n.empty();let r=n.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,w.setIcon)(r,"arrow-left"),r.addEventListener("click",()=>{E.instance.onOpen()}),n.createEl("div",{cls:"main-header"}).createEl("h1",{text:"Transfer"});let s=n.createEl("form",{cls:"main-add-form",attr:{id:"main-add-form"}}).createEl("div",{cls:"main-form-input"}),i=s.createEl("select",{cls:"form-selects",attr:{name:"select-from-bill",id:"select-from-bill"}});if(t.jsonData.some(u=>u.generalBalance===!0)){let u=document.createElement("optgroup");u.label="Main",t.jsonData.forEach(d=>{if(d.generalBalance){let g=document.createElement("option");g.value=d.id,g.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,g.dataset.currency=d.currency,u.appendChild(g)}}),i.appendChild(u)}if(t.jsonData.some(u=>u.generalBalance===!1)){let u=document.createElement("optgroup");u.label="Additional",t.jsonData.forEach(d=>{if(!d.generalBalance){let g=document.createElement("option");g.value=d.id,g.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,g.dataset.currency=d.currency,u.appendChild(g)}}),i.appendChild(u)}i.value=e;let c=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Source amount",id:"input-source-amount",type:"number",inputmode:"decimal",style:"display: none;"}}),l=s.createEl("select",{cls:"form-selects",attr:{name:"select-to-bill",id:"select-to-bill"}});if(l.createEl("option",{text:"Select an account",attr:{value:"",selected:"",disabled:"",hidden:""}}),t.jsonData.some(u=>u.generalBalance===!0)){let u=document.createElement("optgroup");u.label="Main",t.jsonData.forEach(d=>{if(d.generalBalance){let g=document.createElement("option");g.value=d.id,g.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,g.dataset.currency=d.currency,u.appendChild(g)}}),l.appendChild(u)}if(t.jsonData.some(u=>u.generalBalance===!1)){let u=document.createElement("optgroup");u.label="Additional",t.jsonData.forEach(d=>{if(!d.generalBalance){let g=document.createElement("option");g.value=d.id,g.textContent=`${d.name} \u2022 ${d.balance} ${N(d.currency)}`,g.dataset.currency=d.currency,u.appendChild(g)}}),l.appendChild(u)}let p=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Target amount",id:"input-target-amount",type:"number",inputmode:"decimal",style:"display: none;"}}),f=s.createEl("input",{cls:"form-inputs",attr:{placeholder:"Sum",id:"input-sum",type:"number",inputmode:"decimal"}});i.addEventListener("change",()=>{let u=i.options[i.selectedIndex],d=l.options[l.selectedIndex];if(d.value===""){c.style.display="none",p.style.display="none",f.style.display="block";return}u.dataset.currency===d.dataset.currency?(c.style.display="none",p.style.display="none",f.style.display="block"):(c.style.display="block",p.style.display="block",f.style.display="none")}),l.addEventListener("change",()=>{let u=i.options[i.selectedIndex];l.options[l.selectedIndex].dataset.currency===u.dataset.currency?(c.style.display="none",p.style.display="none",f.style.display="block"):(c.style.display="block",p.style.display="block",f.style.display="none")}),s.createEl("button",{text:"Transfer",cls:"add-button",attr:{type:"submit"}}).addEventListener("click",async u=>{if(u.preventDefault(),!l.value)return new w.Notice("Select an account");let d=i.options[i.selectedIndex],g=l.options[l.selectedIndex],v=d.dataset.currency===g.dataset.currency,b;if(v){if(!f.value)return f.focus(),new w.Notice("Enter the amount");b={type:"same-currency",fromBillId:i.value,toBillId:l.value,amount:Number(f.value)}}else{if(!c.value||!p.value)return(c.value?p:c).focus(),new w.Notice("Enter both amounts");b={type:"cross-currency",fromBillId:i.value,toBillId:l.value,sourceAmount:Number(c.value),targetAmount:Number(p.value)}}let h=await an(b);h.status==="success"?setTimeout(()=>{E.instance.onOpen(),new w.Notice("Transfer completed")},100):(new w.Notice(h.error.message),console.error(h.error))})};var te=async(e,t)=>{A({openPageNow:"History"});let n=await D("History");if(n.status==="error"){new Z.Notice(n.error.message),console.error(n.error);return}if(n.jsonData===null){let a=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined"),a.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),a.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else e.removeClass("main-content-body--undefined"),e.createEl("input",{cls:"input-search",attr:{id:"input-search",type:"search",placeholder:"\u{1F50E} Search by operations"}}).addEventListener("input",async o=>{let s=o.target.value,i=await Ye(s);if(i.status==="error"){new Z.Notice(i.error.message),console.error(i.error);return}if(i.jsonData===void 0)throw new Error("jsonData is null or undefined");if(r.empty(),i.jsonData===null){let c=r.createEl("div",{cls:"undefined-content"});r.addClass("main-content-body--undefined"),c.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),c.createEl("p",{text:"No matching operations found."})}else i.jsonData.length>=1,r.removeClass("main-content-body--undefined"),ke(r,e,i)});let r=e.createEl("div",{cls:"history-content"});ke(r,e,n,t)};function ke(e,t,n,r){if(n.status==="error")return n.error;if(n.jsonData!==null){let o=new Date,i=Object.values(n.jsonData.reduce((c,l)=>{let p=l.date.split("T")[0];return c[p]||(c[p]=[]),c[p].push(l),c},{})).sort((c,l)=>new Date(l[0].date).getTime()-new Date(c[0].date).getTime()).map(c=>c.sort((l,p)=>Math.abs(new Date(l.date).getTime()-o)-Math.abs(new Date(p.date).getTime()-o)));n.jsonData.length>=5&&t.addClass("main-content-body--padding"),i.forEach(c=>{let l=e.createEl("div",{cls:"history-block"}),p=l.createEl("div",{cls:"header-block"});p.createEl("div",{cls:"header-date-block"}).createEl("p",{text:we(c[0].date.split("T")[0])}),p.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:`${Ee(c)}`});let u=l.createEl("ul",{cls:"data-list"});c.forEach(async(d,g)=>{let v=u.createEl("li",{cls:"data-item",attr:{"data-id":d.id}});v.onclick=async R=>{await $e(R)};let b=await K(d.category.id,d.type);if(b.status==="error")return new Z.Notice(b.error.message);let h=await K(d.bill.id,"Archive bills");if(h.status==="error")return new Z.Notice(h.error.message);let S=v.createEl("div",{cls:"data-link"}),j=S.createEl("div",{cls:"data-link-emoji"}),M=S.createEl("div",{cls:"data-link-text"});j.createEl("p",{text:`${b.item.emoji}`}),j.createEl("span",{text:`${h.item.emoji}`}),d.comment===""?(M.createEl("p",{text:`${b.item.name}`}),M.createEl("span",{text:`${h.item.name}`})):(M.createEl("p",{text:`${d.comment}`}),M.createEl("span",{text:`${b.item.name} \u2022 ${h.item.name}`})),v.createEl("div",{cls:"data-link"}).createEl("p",{text:`${De(d.amount,d.type)} ${N(h.item.currency)}`})})})}let a=r==null?void 0:r.createEl("button",{text:"Add an expense or income",cls:"add-button"});a==null||a.addEventListener("click",()=>{cn()})}var de=async(e,t)=>{A({openPageNow:"Plans"});let n=await D("Expenditure plan");if(n.status==="error"){new Z.Notice(n.error.message),console.error(n.error);return}if(n.jsonData===void 0)throw new Error("jsonData is undefined");let r=await D("Income plan");if(r.status==="error"){new Z.Notice(r.error.message),console.error(r.error);return}let a=[];if(n.jsonData===null&&r.jsonData===null){let s=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined"),s.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),s.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else{if(n.jsonData!==null){e.removeClass("main-content-body--undefined");let s=n.jsonData.slice().sort((m,u)=>new T(u.amount).cmp(new T(m.amount)));s.forEach(m=>a.push(m));let i=e.createEl("div",{cls:"plan-block"}),c=i.createEl("div",{cls:"header-block"});c.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Expense"}),c.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(J(s))});let f=i.createEl("ul",{cls:"data-list"});s.forEach((m,u)=>{let d=f.createEl("li",{cls:"data-item",attr:{"data-id":m.id,"data-type":m.type}});d.onclick=async v=>{await Fe(v)};let g=d.createEl("div",{cls:"data-link"});g.createEl("span",{text:`${m.emoji}`}),g.createEl("p",{text:`${m.name}`}),d.createEl("p",{text:String(m.amount)})})}if(r.jsonData!==null){if(r.jsonData===void 0)throw new Error("incomePlanInfo is undefined");e.removeClass("main-content-body--undefined");let s=r.jsonData.slice().sort((m,u)=>new T(u.amount).cmp(new T(m.amount)));s.forEach(m=>a.push(m));let i=e.createEl("div",{cls:"plan-block"}),c=i.createEl("div",{cls:"header-block"});c.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Income"}),c.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(V(s))});let f=i.createEl("ul",{cls:"data-list"});s.forEach((m,u)=>{let d=f.createEl("li",{cls:"data-item",attr:{"data-id":m.id,"data-type":m.type}});d.onclick=async v=>{await Fe(v)};let g=d.createEl("div",{cls:"data-link"});g.createEl("span",{text:`${m.emoji}`}),g.createEl("p",{text:`${m.name}`}),d.createEl("p",{text:String(m.amount)})})}}a.length>5&&e.addClass("main-content-body--padding"),t.createEl("button",{text:"Create a category",cls:"add-button"}).addEventListener("click",()=>{mn()})},Me=async(e,t)=>{A({openPageNow:"Bills"});let n=await I("Archive bills");if(n.status==="error"){new Z.Notice(n.error.message),console.error(n.error);return}if(n.jsonData===void 0)throw new Error("Bill is undefined");if(n.jsonData===null){let a=e.createEl("div",{cls:"undefined-content"});e.addClass("main-content-body--undefined"),a.createEl("span",{text:"\u{1F355} \u{1F3AE} \u{1F455}"}),a.createEl("p",{text:"Enter any income and expenses to see how much money is actually left."})}else{if(n.jsonData.length>5&&e.addClass("main-content-body--padding"),n.jsonData.filter(a=>a.generalBalance).length>=1){e.removeClass("main-content-body--undefined");let a=e.createEl("div",{cls:"bill-block"}),o=a.createEl("div",{cls:"header-block"});o.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Main"}),o.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(ae(n.jsonData))});let c=a.createEl("ul",{cls:"data-list"});n.jsonData.forEach((l,p)=>{if(l.generalBalance){let f=c.createEl("li",{cls:"data-item",attr:{"data-id":l.id}});f.onclick=async u=>{await Ae(u)};let m=f.createEl("div",{cls:"data-link"});m.createEl("span",{text:`${l.emoji}`}),m.createEl("p",{text:`${l.name}`}),f.createEl("p",{text:`${String(l.balance)} ${N(l.currency)}`})}})}if(n.jsonData.filter(a=>!a.generalBalance).length>=1){e.removeClass("main-content-body--undefined");let a=e.createEl("div",{cls:"bill-block"}),o=a.createEl("div",{cls:"header-block"});o.createEl("div",{cls:"header-type-block"}).createEl("span",{text:"Additional"}),o.createEl("div",{cls:"header-amount-block"}).createEl("span",{text:String(_e(n.jsonData))});let c=a.createEl("ul",{cls:"data-list"});n.jsonData.forEach((l,p)=>{if(!l.generalBalance){let f=c.createEl("li",{cls:"data-item",attr:{"data-id":l.id}});f.onclick=async u=>{await Ae(u)};let m=f.createEl("div",{cls:"data-link"});m.createEl("span",{text:`${l.emoji}`}),m.createEl("p",{text:`${l.name}`}),f.createEl("p",{text:`${String(l.balance)} ${N(l.currency)}`})}})}}t.createEl("button",{text:"Add a bill",cls:"add-button"}).addEventListener("click",()=>{un()})};var Re=async()=>{if(!E.instance||!y.instance)return;if(A({selectedMonth:null,selectedYear:null}),!await se())return Re();let{contentEl:t}=E.instance,{month:n}=U(),r=await I("Archive bills");if(r.status==="error"){new k.Notice(r.error.message),console.error(r.error);return}if(r.jsonData===void 0)throw new Error("billsInfo is undefined");let a=await D("Expenditure plan");if(a.status==="error"){new k.Notice(a.error.message),console.error(a.error);return}if(a.jsonData===void 0)throw new Error("expenditurePlanInfo is undefined");let o=await D("Income plan");if(o.status==="error"){new k.Notice(o.error.message),console.error(o.error);return}if(o.jsonData===void 0)throw new Error("incomePlanInfo is undefined");t.empty(),t.addClass("finance-content");let i=t.createEl("div",{cls:"finance-header"}).createEl("button",{attr:{id:"showAllMonths"}});(0,k.setIcon)(i,"calendar-days"),i.createEl("span",{text:n}),i.addEventListener("click",async()=>{t.dataset.page==="home"&&(t.setAttribute("data-page","months"),await yn())}),t.setAttribute("data-page","home");let c=t.createEl("div",{cls:"balance"}),l=c.createEl("div",{cls:"balance-top"});l.createEl("span",{text:"Balance"}),l.createEl("p",{text:`${ae(r.jsonData)} ${N(y.instance.settings.baseCurrency)}`}),l.createEl("span",{text:`~${Ue(ae(r.jsonData))} for a day`}),c.createEl("div",{cls:"balance-line"}).style.setProperty("--after-width",`${Ve(r.jsonData,a.jsonData)}%`);let f=c.createEl("div",{cls:"balance-body"}),m=f.createEl("div",{cls:"balance_body-expenses"});m.createEl("span",{text:"Expense"});let u=m.createEl("div",{cls:"balance_expenses-check"});(0,k.setIcon)(u,"upload"),u.createEl("p",{text:String(J(a.jsonData))});let d=f.createEl("div",{cls:"balance_body-income"});d.createEl("span",{text:"Income"});let g=d.createEl("div",{cls:"balance_income-check"});(0,k.setIcon)(g,"download"),g.createEl("p",{text:String(V(o.jsonData))}),Mn()},Mn=async()=>{let{contentEl:e}=E.instance,{openPageNow:t}=A(),n=e.createEl("div",{cls:"main-nav"}),a=e.createEl("div",{cls:"main-content"}).createEl("div",{cls:"main-content-body"}),o=e.createEl("div",{cls:"main-content-button"}),s=n.createEl("a",{text:"History",cls:"home_button--active",attr:{id:"history-button",href:"#"}});s.addEventListener("click",async()=>{i.removeClass("home_button--active"),c.removeClass("home_button--active"),s.addClass("home_button--active"),a.empty(),o.empty(),await te(a,o)});let i=n.createEl("a",{text:"Plan",attr:{id:"plan-button",href:"#"}});i.addEventListener("click",async()=>{s.removeClass("home_button--active"),c.removeClass("home_button--active"),i.addClass("home_button--active"),a.empty(),o.empty(),await de(a,o)});let c=n.createEl("a",{text:"Bills",attr:{id:"bills-button",href:"#"}});c.addEventListener("click",async()=>{s.removeClass("home_button--active"),i.removeClass("home_button--active"),c.addClass("home_button--active"),a.empty(),o.empty(),await Me(a,o)}),!t||t==="History"||t===null?(await te(a,o),s.addClass("home_button--active"),c.removeClass("home_button--active"),i.removeClass("home_button--active")):t==="Plans"?(await de(a,o),s.removeClass("home_button--active"),i.addClass("home_button--active"),c.removeClass("home_button--active")):t==="Bills"?(await Me(a,o),s.removeClass("home_button--active"),i.removeClass("home_button--active"),c.addClass("home_button--active")):(await te(a,o),s.addClass("home_button--active"),c.removeClass("home_button--active"),i.removeClass("home_button--active"))},yn=async()=>{let{contentEl:e}=E.instance;e.empty();let{year:t}=U(),n=e.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,k.setIcon)(n,"arrow-left"),n.addEventListener("click",()=>{var s;(s=E.instance)==null||s.onOpen()}),e.createEl("div",{cls:"calendar-header"}).createEl("h1",{text:"Calendar"});let a=e.createEl("div",{cls:"calendar-main"}),o=["\u2603\uFE0F January","\u{1F328}\uFE0F February","\u{1F337} March","\u{1F331} April","\u2600\uFE0F May","\u{1F333} June","\u{1F3D6}\uFE0F July","\u{1F33E} August","\u{1F341} September","\u{1F342} October","\u2614 November","\u2744\uFE0F December"];for(let s=Number(t);s>=y.instance.settings.startYear;s--){let i=a.createEl("div",{cls:"calendar-list-title"});i.createEl("span",{text:String(s)}),i.createEl("span",{text:await We(String(s))});let c=a.createEl("ul",{cls:"calendar-list",attr:{"data-year":s}});for(let l=o.length-1;l>=0;l--){let p=c.createEl("li",{attr:{"data-month":`${l+1}`,"data-year":`${s}`}});p.onclick=async m=>{await Rn(m)},p.createEl("p",{text:o[l]});let f=p.createEl("div",{cls:"story-month"});Ze(_[l],String(s),f)}}},Rn=async e=>{var i,c,l,p,f;let{year:t,month:n}=U(),r=((c=(i=e.target)==null?void 0:i.closest)==null?void 0:c.call(i,"[data-month]"))||e.target,a=Number((l=r==null?void 0:r.dataset)==null?void 0:l.month),o=String((p=r==null?void 0:r.dataset)==null?void 0:p.year);if(_[a-1]===n&&o===t)return(f=E.instance)==null?void 0:f.onOpen();A({selectedMonth:_[a-1],selectedYear:o});let s=await Ge(a-1,o);s!=="success"&&new k.Notice(s),await Le()},Le=async()=>{if(!E.instance||!y.instance)return;let{selectedMonth:e}=A(),t=await D("Expenditure plan");if(t.status==="error"){new k.Notice(t.error.message),console.error(t.error);return}if(t.jsonData==null)throw new Error("expenditurePlanInfo is null or undefined");let n=await D("Income plan");if(n.status==="error"){new k.Notice(n.error.message),console.error(n.error);return}if(n.jsonData==null)throw new Error("incomePlanInfo is null or undefined");let{contentEl:r}=E.instance;r.empty();let a=r.createEl("div",{cls:"exit-button",attr:{id:"exit-button"}});(0,k.setIcon)(a,"arrow-left"),a.addEventListener("click",()=>{var u;A({selectedMonth:null,selectedYear:null}),(u=E.instance)==null||u.onOpen()}),r.createEl("div",{cls:"finance-header"}).createEl("button",{text:`\u{1F5D3}\uFE0F ${e}`,attr:{id:"showAllMonths"}}).addEventListener("click",async()=>{r.dataset.page==="home"&&(r.setAttribute("data-page","months"),await yn())}),r.setAttribute("data-page","home");let i=r.createEl("div",{cls:"balance"});i.addClass("balance-other");let c=i.createEl("div",{cls:"balance-body"}),l=c.createEl("div",{cls:"balance_body-expenses"});l.createEl("span",{text:"Expense"});let p=l.createEl("div",{cls:"balance_expenses-check"});(0,k.setIcon)(p,"upload"),p.createEl("p",{text:String(J(t.jsonData))});let f=c.createEl("div",{cls:"balance_body-income"});f.createEl("span",{text:"Income"});let m=f.createEl("div",{cls:"balance_income-check"});(0,k.setIcon)(m,"download"),m.createEl("p",{text:String(V(t.jsonData))}),Ln()},Ln=async()=>{let{contentEl:e}=E.instance,t=e.createEl("div",{cls:"main-nav"}),r=e.createEl("div",{cls:"main-content"}).createEl("div",{cls:"main-content-body"}),a=e.createEl("div",{cls:"main-content-button"}),o=t.createEl("a",{text:"History",cls:"home_button--active",attr:{id:"history-button",href:"#"}});o.addEventListener("click",async()=>{s.removeClass("home_button--active"),o.addClass("home_button--active"),r.empty(),a.empty(),await te(r,a)});let s=t.createEl("a",{text:"Plan",attr:{id:"plan-button",href:"#"}});s.addEventListener("click",async()=>{o.removeClass("home_button--active"),s.addClass("home_button--active"),r.empty(),a.empty(),await de(r,a)});let{openPageNow:i}=A();!i||i==="History"||i===null?(await te(r,a),o.addClass("home_button--active"),s.removeClass("home_button--active")):i==="Plans"?(await de(r,a),o.removeClass("home_button--active"),s.addClass("home_button--active")):(await te(r,a),o.addClass("home_button--active"),s.removeClass("home_button--active"))};var Ie="financial-accounting-view",y=class extends C.Plugin{constructor(){super(...arguments);this.settings=new Oe}async onload(){y.instance=this,await this.loadSettings(),this.registerView(Ie,n=>new E(n)),this.app.workspace.onLayoutReady(()=>{this.addSettingTab(new He(this.app,this));let n=this.addRibbonIcon("badge-dollar-sign","Add operation",async()=>{await this.activateView()});this.registerInterval(window.setInterval(()=>{let r=document.querySelector(".workspace-ribbon.mod-left");!r||!n||C.Platform.isMobile&&r.firstChild!==n&&r.append(n)},1e3)),this.unregisterTracking=Kn(this.app,()=>{gn(r=>{r.classList.add("disable-mobile-nav-bar")})},()=>{gn(r=>{r.classList.remove("disable-mobile-nav-bar")})}),this.addCommand({id:"view-finance",name:"Open the finance panel",callback:()=>this.activateView()})})}async activateView(){let{workspace:n}=this.app,r=n.getLeavesOfType(Ie)[0];r||(C.Platform.isDesktop?r=n.getRightLeaf(!1):r=n.getLeaf(!0),r&&await r.setViewState({type:Ie,active:!0})),r&&n.revealLeaf(r)}async loadSettings(){let n=await this.loadData(),r=new Oe;this.settings=Object.assign({},r,n||{})}async saveSettings(){await this.saveData(this.settings)}onunload(){var n;(n=this.unregisterTracking)==null||n.call(this)}},E=class extends C.ItemView{constructor(t){super(t)}getViewType(){return Ie}getDisplayText(){return"Financial accounting view"}getIcon(){return"chart-pie"}async onOpen(){E.instance=this;let{selectedYear:t,selectedMonth:n}=A();n===null&&t===null?await Re():await Le()}async onClose(){}},Oe=class{constructor(){this.targetFolder="Finances",this.startYear=2020,this.baseCurrency="USD",this.defaultTag="Finances"}},He=class extends C.PluginSettingTab{constructor(n,r){super(n,r);this.plugin=r}display(){let{containerEl:n}=this;n.empty(),new C.Setting(n).setName("Financial Accounting Plugin Settings").setHeading();let r=this.app.vault.getAllLoadedFiles().filter(m=>m instanceof C.TFolder).map(m=>m.path),a=this.plugin.settings.targetFolder||"Finances/",o=r.includes(a);new C.Setting(n).setName("Working directory").setDesc("Select the folder the plugin will work with.").addDropdown(m=>{for(let u of r)m.addOption(u,u);o||m.addOption(a,`${a} (does not exist)`),m.setValue(a),m.onChange(async u=>{this.plugin.settings.targetFolder=u,await this.plugin.saveSettings(),new C.Notice(`Folder selected: ${u}`)})}),new C.Setting(n).setName("Initial year of accounting").setDesc("Select the year from which financial accounting has been conducted").addDropdown(m=>{let u=new Date().getFullYear();for(let d=u-100;d<=u;d++)m.addOption(String(d),String(d));m.setValue(String(this.plugin.settings.startYear)),m.onChange(async d=>{this.plugin.settings.startYear=Number(d),await this.plugin.saveSettings(),new C.Notice(`The starting year has been changed to ${d}`)})});let i=new C.Setting(n).setName("Main currency").setDesc("Select the currency from which the conversion will be performed").settingEl.createEl("select",{cls:"currency-select"}),{popularCurrencies:c,otherCurrencies:l}=he(),p=document.createElement("optgroup");p.label="Popular",c.forEach(m=>{let u=document.createElement("option");u.value=m.code,u.textContent=`${m.code} \u2022 ${m.name} \u2022 ${m.symbol}`,p.appendChild(u)});let f=document.createElement("optgroup");f.label="All currencies",l.forEach(m=>{let u=document.createElement("option");u.value=m.code,u.textContent=`${m.code} ${m.name} \u2022 ${m.symbol}`,f.appendChild(u)}),i.appendChild(p),i.appendChild(f),i.value=this.plugin.settings.baseCurrency,i.addEventListener("change",async m=>{var v;let u=await I("Archive bills");if(u.status==="error")return new C.Notice(`Error fetching archive bills: ${u.error.message}`);let d=m.target.value,g=(v=u.jsonData)==null?void 0:v.filter(b=>b.generalBalance&&b.currency!==d);if(g&&g.length>0){let b=g[0];i.value=this.plugin.settings.baseCurrency,new C.Notice(`Cannot change base currency. Bill "${b.name}" is set to general balance with currency ${b.currency}. Please change or disable general balance on this bill first.`);return}this.plugin.settings.baseCurrency=d,this.plugin.saveSettings(),new C.Notice(`Base currency changed to ${d}`)}),new C.Setting(n).setName("Default tag for Obsidian").setDesc("Enter one word to use as a tag (no spaces).").addText(m=>{m.setPlaceholder("For example: Finances").setValue(this.plugin.settings.defaultTag||""),m.inputEl.addEventListener("keydown",u=>{u.key==="Enter"&&(u.preventDefault(),m.inputEl.blur())}),m.inputEl.addEventListener("blur",async()=>{let u=m.getValue().trim();if(/\s/.test(u)){new C.Notice("Error: Tag must not contain spaces.");return}if(!/^[\w\---]+$/.test(u)){new C.Notice("The tag can only contain letters, numbers, underscores and hyphens.");return}this.plugin.settings.defaultTag=u,await this.plugin.saveSettings(),new C.Notice(`The tag "${u}" has been saved.`)})})}},Hn=()=>{let e={openPageNow:null,selectedYear:null,selectedMonth:null};return function(n){return n&&(e={...e,...n}),e}},A=Hn();function Kn(e,t,n){let r=()=>{e.workspace.getActiveViewOfType(E)?t():n()};return e.workspace.on("active-leaf-change",r),e.workspace.on("layout-change",r),r(),()=>{e.workspace.off("active-leaf-change",r),e.workspace.off("layout-change",r)}}function gn(e){let t=new MutationObserver(()=>{let n=document.querySelector(".mobile-navbar");n&&(e(n),t.disconnect())});t.observe(document.body,{childList:!0,subtree:!0})}
